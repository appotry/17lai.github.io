const website_id=CONFIG.statistics.umami.data_website_id;const request_url=CONFIG.statistics.umami.api_server+"/api/websites/"+website_id+"/stats";const start_time=new Date(CONFIG.statistics.umami.start_time).getTime();const end_time=(new Date).getTime();const token=CONFIG.statistics.umami.token;if(!website_id){throw new Error("Umami website_id is empty")}if(!request_url){throw new Error("Umami request_url is empty")}if(!start_time){throw new Error("Umami start_time is empty")}if(!token){throw new Error("Umami token is empty")}const params=new URLSearchParams({startAt:start_time,endAt:end_time});const request_header={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+token}};async function siteStats(){try{const t=await fetch(`${request_url}?${params}`,request_header);const n=await t.json();const a=n.pageviews.value;const s=n.visitors.value;let e=document.querySelector("#busuanzi_container_site_pv");if(e){let t=document.querySelector("#busuanzi_value_site_pv");if(t){t.textContent=a;e.style.display="inline-block";document.getElementById("busuanzi_loading_icon_site_pv").style.display="none"}}let i=document.querySelector("#busuanzi_container_site_uv");if(i){let t=document.querySelector("#busuanzi_value_site_uv");if(t){t.textContent=s;i.style.display="inline-block";document.getElementById("busuanzi_loading_icon_site_uv").style.display="none"}}}catch(t){console.error(t);return"-1"}}async function pageStats(t){try{const i=await fetch(`${request_url}?${params}&url=${t}`,request_header);const n=await i.json();const a=n.pageviews.value;let e=document.querySelector("#umami-page-views-container");if(e){let t=document.querySelector("#umami-page-views");if(t){t.textContent=a;e.style.display="inline";document.getElementById("umami-page-views").style.display="inline-block";document.getElementById("umami_pageviews_loading_icon").style.display="none"}}}catch(t){console.error(t);return"-1"}}siteStats();let viewCtn=document.querySelector("#umami-page-views-container");if(viewCtn){let t=window.location.pathname.replace(/\/$/,"")+"/";let e=decodeURI(t.replace(/\/*(index.html)?$/,"/"));pageStats(e)}const tagLinks=document.querySelectorAll('a[href^="/tags/"], a[href^="/categories/"]');tagLinks.forEach(n=>{n.addEventListener("click",function(t){const e=n.getAttribute("href");const i=n.textContent.trim();umami.track("Tags/categories Click",{url:e,tags:i})})});const tocLinks=document.querySelectorAll("#toc-content a.toc-link");tocLinks.forEach(n=>{n.addEventListener("click",function(t){const e=n.getAttribute("href");const i=n.textContent.trim();umami.track("TOC Link Click",{url:e,toc:i})})});const navLinks=document.querySelectorAll("#headNav a.nav-link");navLinks.forEach(n=>{n.addEventListener("click",function(t){const e=n.getAttribute("href");const i=n.textContent.trim();umami.track("HeadNav Link Click",{url:e,nav:i})})});const adLinks=document.querySelectorAll("#toc-aside .ad-link");adLinks.forEach(n=>{n.addEventListener("click",function(t){const e=n.getAttribute("data-ad-id");const i=n.getAttribute("href");umami.track("Ad Click",{url:i,id:e})})});