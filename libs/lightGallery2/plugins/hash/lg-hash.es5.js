var __assign=function(){__assign=Object.assign||function e(t){for(var i,l=1,o=arguments.length;l<o;l++){i=arguments[l];for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s))t[s]=i[s]}return t};return __assign.apply(this,arguments)};var lGEvents={afterAppendSlide:"lgAfterAppendSlide",init:"lgInit",hasVideo:"lgHasVideo",containerResize:"lgContainerResize",updateSlides:"lgUpdateSlides",afterAppendSubHtml:"lgAfterAppendSubHtml",beforeOpen:"lgBeforeOpen",afterOpen:"lgAfterOpen",slideItemLoad:"lgSlideItemLoad",beforeSlide:"lgBeforeSlide",afterSlide:"lgAfterSlide",posterClick:"lgPosterClick",dragStart:"lgDragStart",dragMove:"lgDragMove",dragEnd:"lgDragEnd",beforeNextSlide:"lgBeforeNextSlide",beforePrevSlide:"lgBeforePrevSlide",beforeClose:"lgBeforeClose",afterClose:"lgAfterClose",rotateLeft:"lgRotateLeft",rotateRight:"lgRotateRight",flipHorizontal:"lgFlipHorizontal",flipVertical:"lgFlipVertical",autoplay:"lgAutoplay",autoplayStart:"lgAutoplayStart",autoplayStop:"lgAutoplayStop"};var hashSettings={hash:true,galleryId:"1",customSlideName:false};var Hash=function(){function e(e,t){this.core=e;this.$LG=t;this.settings=__assign(__assign({},hashSettings),this.core.settings);return this}e.prototype.init=function(){var e=this;if(!this.settings.hash){return}this.oldHash=window.location.hash;setTimeout(function(){e.buildFromHash()},100);this.core.LGel.on(lGEvents.afterSlide+".hash",this.onAfterSlide.bind(this));this.core.LGel.on(lGEvents.afterClose+".hash",this.onCloseAfter.bind(this));this.$LG(window).on("hashchange.lg.hash.global"+this.core.lgId,this.onHashchange.bind(this))};e.prototype.onAfterSlide=function(e){var t=this.core.galleryItems[e.detail.index].slideName;t=this.settings.customSlideName?t||e.detail.index:e.detail.index;if(history.replaceState){history.replaceState(null,"",window.location.pathname+window.location.search+"#lg="+this.settings.galleryId+"&slide="+t)}else{window.location.hash="lg="+this.settings.galleryId+"&slide="+t}};e.prototype.getIndexFromUrl=function(e){if(e===void 0){e=window.location.hash}var t=e.split("&slide=")[1];var i=0;if(this.settings.customSlideName){for(var l=0;l<this.core.galleryItems.length;l++){var o=this.core.galleryItems[l];if(o.slideName===t){i=l;break}}}else{i=parseInt(t,10)}return isNaN(i)?0:i};e.prototype.buildFromHash=function(){var e=window.location.hash;if(e.indexOf("lg="+this.settings.galleryId)>0){this.$LG(document.body).addClass("lg-from-hash");var t=this.getIndexFromUrl(e);this.core.openGallery(t);return true}};e.prototype.onCloseAfter=function(){if(this.oldHash&&this.oldHash.indexOf("lg="+this.settings.galleryId)<0){if(history.replaceState){history.replaceState(null,"",this.oldHash)}else{window.location.hash=this.oldHash}}else{if(history.replaceState){history.replaceState(null,document.title,window.location.pathname+window.location.search)}else{window.location.hash=""}}};e.prototype.onHashchange=function(){if(!this.core.lgOpened)return;var e=window.location.hash;var t=this.getIndexFromUrl(e);if(e.indexOf("lg="+this.settings.galleryId)>-1){this.core.slide(t,false,false)}else if(this.core.lGalleryOn){this.core.closeGallery()}};e.prototype.closeGallery=function(){if(this.settings.hash){this.$LG(document.body).removeClass("lg-from-hash")}};e.prototype.destroy=function(){this.core.LGel.off(".lg.hash");this.core.LGel.off(".hash");this.$LG(window).off("hashchange.lg.hash.global"+this.core.lgId)};return e}();export default Hash;