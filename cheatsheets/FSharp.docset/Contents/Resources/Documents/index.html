<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>FSharp</title>
<link href='style.css' rel='stylesheet'>
<link href='//dash_ref/Category/Basics/1'>
<link href='//dash_ref_Basics/Entry/Comments/0'>
<link href='//dash_ref_Basics/Entry/Strings/0'>
<link href='//dash_ref_Basics/Entry/Basic Types and Literals/0'>
<link href='//dash_ref_Basics/Entry/Tuples and Records/0'>
<link href='//dash_ref_Basics/Entry/Discriminated Unions/0'>
<link href='//dash_ref_Basics/Entry/Exceptions/0'>
<link href='//dash_ref/Category/Functions/1'>
<link href='//dash_ref_Functions/Entry/Definition/0'>
<link href='//dash_ref_Functions/Entry/Pipe and composition operators/0'>
<link href='//dash_ref_Functions/Entry/Recursive functions/0'>
<link href='//dash_ref/Category/Collections/1'>
<link href='//dash_ref_Collections/Entry/Lists/0'>
<link href='//dash_ref_Collections/Entry/Arrays/0'>
<link href='//dash_ref_Collections/Entry/Sequences/0'>
<link href='//dash_ref_Collections/Entry/Higher-order functions on collections/0'>
<link href='//dash_ref/Category/Pattern Matching/1'>
<link href='//dash_ref_Pattern Matching/Entry/Pattern Matching/0'>
<link href='//dash_ref_Pattern Matching/Entry/Active Patterns/0'>
<link href='//dash_ref/Category/Scripting/1'>
<link href='//dash_ref_Scripting/Entry/Compiler Directives/0'>
</head>
<body>
<header>
<h1>FSharp</h1>
</header>
<article>
<p></p>
<section class='category'>
<h2 id='//dash_ref/Category/Basics/1'>
Basics
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Basics/Entry/Comments/0'>
<td class='description' colspan='2'>
<div class='name'><p>Comments</p>
</div>
<div class='notes'><p>Block comments are placed between <code>(*</code> and <code>*)</code>. Line comments start from <code>//</code> and continue until the end of the line.</p>
<pre class="highlight fsharp"><span class="c">(* This is block comment *)</span>&#x000A;&#x000A;<span class="c1">// And this is line comment</span></pre>
<p>XML doc comments come after <code>///</code> allowing us to use XML tags to generate documentation.</p>
<pre class="highlight fsharp"><span class="c1">/// The `let` keyword defines an (immutable) value</span>&#x000A;<span class="k">let</span> <span class="n">result</span> <span class="p">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">=</span> <span class="mi">2</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basics/Entry/Strings/0'>
<td class='description' colspan='2'>
<div class='name'><p>Strings</p>
</div>
<div class='notes'><p>F# <code>string</code> type is an alias for <code>System.String</code> type.</p>
<pre class="highlight fsharp"><span class="c1">/// Create a string using string concatenation</span>&#x000A;<span class="k">let</span> <span class="n">hello</span> <span class="p">=</span> <span class="s2">"Hello"</span> <span class="o">+</span> <span class="s2">" World"</span></pre>
<p>Use <em>verbatim strings</em> preceded by <code>@</code> symbol to avoid escaping control characters (except escaping <code>&quot;</code> by <code>&quot;&quot;</code>).</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">verbatimXml</span> <span class="p">=</span> <span class="o">@</span><span class="s2">"&lt;book title=""Paradise Lost""&gt;"</span></pre>
<p>We don&#39;t even have to escape <code>&quot;</code> with <em>triple-quoted strings</em>.</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">tripleXml</span> <span class="p">=</span> <span class="s2">"""&lt;book title="</span><span class="nc">Paradise</span> <span class="nc">Lost</span><span class="s2">"&gt;"""</span></pre>
<p><em>Backslash strings</em> indent string contents by stripping leading spaces.</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">poem</span> <span class="p">=</span>&#x000A;  <span class="s2">"The lesser world was daubed</span><span class="se">\n</span><span class="s2">\&#x000A;    By a colorist of modest skill</span><span class="se">\n</span><span class="s2">\&#x000A;    A master limned you in the finest inks</span><span class="se">\n</span><span class="s2">\&#x000A;    And with a fresh-cut quill."</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basics/Entry/Basic Types and Literals/0'>
<td class='description' colspan='2'>
<div class='name'><p>Basic Types and Literals</p>
</div>
<div class='notes'><p>Most numeric types have associated suffixes, e.g., <code>uy</code> for unsigned 8-bit integers and <code>L</code> for signed 64-bit integer.</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">b</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">l</span> <span class="p">=</span> <span class="mi">86</span><span class="n">uy</span><span class="p">,</span> <span class="mi">86</span><span class="p">,</span> <span class="mi">86</span><span class="nc">L</span>&#x000A;&#x000A;<span class="c1">// [fsi:val b : byte = 86uy]</span>&#x000A;<span class="c1">// [fsi:val i : int = 86]</span>&#x000A;<span class="c1">// [fsi:val l : int64 = 86L]</span></pre>
<p>Other common examples are <code>F</code> or <code>f</code> for 32-bit floating-point numbers, <code>M</code> or <code>m</code> for decimals, and <code>I</code> for big integers.</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">s</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">bi</span> <span class="p">=</span> <span class="mi">4</span><span class="p">.</span><span class="mi">14</span><span class="nc">F</span><span class="p">,</span> <span class="mi">4</span><span class="p">.</span><span class="mi">14</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">7833</span><span class="nc">M</span><span class="p">,</span> <span class="mi">9999</span><span class="nc">I</span>&#x000A;&#x000A;<span class="c1">// [fsi:val s : float32 = 4.14f]</span>&#x000A;<span class="c1">// [fsi:val f : float = 4.14]</span>&#x000A;<span class="c1">// [fsi:val d : decimal = 0.7833M]</span>&#x000A;<span class="c1">// [fsi:val bi : System.Numerics.BigInteger = 9999]</span></pre>
<p>See <a href="http://msdn.microsoft.com/en-us/library/dd233193.aspx">Literals (MSDN)</a> for complete reference.</p>
</div>
</td>
</tr>
<tr id='//dash_ref_Basics/Entry/Tuples and Records/0'>
<td class='description' colspan='2'>
<div class='name'><p>Tuples and Records</p>
</div>
<div class='notes'><p>A <em>tuple</em> is a grouping of unnamed but ordered values, possibly of different types:</p>
<pre class="highlight fsharp"><span class="c1">// Tuple construction</span>&#x000A;<span class="k">let</span> <span class="n">x</span> <span class="p">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"Hello"</span><span class="p">)</span>&#x000A;&#x000A;<span class="c1">// Triple</span>&#x000A;<span class="k">let</span> <span class="n">y</span> <span class="p">=</span> <span class="p">(</span><span class="s2">"one"</span><span class="p">,</span> <span class="s2">"two"</span><span class="p">,</span> <span class="s2">"three"</span><span class="p">)</span>&#x000A;&#x000A;<span class="c1">// Tuple deconstruction / pattern</span>&#x000A;<span class="k">let</span> <span class="p">(</span><span class="n">a'</span><span class="p">,</span> <span class="n">b'</span><span class="p">)</span> <span class="p">=</span> <span class="n">x</span></pre>
<p>The first and second elements of a tuple can be obtained using <code>fst</code>, <code>snd</code>, or pattern matching:</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">c'</span> <span class="p">=</span> <span class="n">fst</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>&#x000A;<span class="k">let</span> <span class="n">d'</span> <span class="p">=</span> <span class="n">snd</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>&#x000A;&#x000A;<span class="k">let</span> <span class="n">print'</span> <span class="n">tuple</span> <span class="p">=</span>&#x000A;    <span class="k">match</span> <span class="n">tuple</span> <span class="k">with</span>&#x000A;    <span class="p">|</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">printfn</span> <span class="s2">"Pair %A %A"</span> <span class="n">a</span> <span class="n">b</span></pre>
<p><em>Records</em> represent simple aggregates of named values, optionally with members:</p>
<pre class="highlight fsharp"><span class="c1">// Declare a record type</span>&#x000A;<span class="k">type</span> <span class="nc">Person</span> <span class="p">=</span> <span class="p">{</span> <span class="nc">Name</span> <span class="p">:</span> <span class="kt">string</span><span class="p">;</span> <span class="nc">Age</span> <span class="p">:</span> <span class="kt">int</span> <span class="p">}</span>&#x000A;&#x000A;<span class="c1">// Create a value via record expression</span>&#x000A;<span class="k">let</span> <span class="n">paul</span> <span class="p">=</span> <span class="p">{</span> <span class="nc">Name</span> <span class="p">=</span> <span class="s2">"Paul"</span><span class="p">;</span> <span class="nc">Age</span> <span class="p">=</span> <span class="mi">28</span> <span class="p">}</span>&#x000A;&#x000A;<span class="c1">// 'Copy and update' record expression</span>&#x000A;<span class="k">let</span> <span class="n">paulsTwin</span> <span class="p">=</span> <span class="p">{</span> <span class="n">paul</span> <span class="k">with</span> <span class="nc">Name</span> <span class="p">=</span> <span class="s2">"Jim"</span> <span class="p">}</span></pre>
<p>Records can be augmented with properties and methods:</p>
<pre class="highlight fsharp"><span class="k">type</span> <span class="nc">Person</span> <span class="k">with</span>&#x000A;  <span class="k">member</span> <span class="n">x</span><span class="p">.</span><span class="nc">Info</span> <span class="p">=</span> <span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="nc">Name</span><span class="p">,</span> <span class="n">x</span><span class="p">.</span><span class="nc">Age</span><span class="p">)</span></pre>
<p>Records are essentially sealed classes with extra topping: default immutability, structural equality, and pattern matching support.</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">isPaul</span> <span class="n">person</span> <span class="p">=</span>&#x000A;<span class="k">match</span> <span class="n">person</span> <span class="k">with</span>&#x000A;<span class="p">|</span> <span class="p">{</span> <span class="nc">Name</span> <span class="p">=</span> <span class="s2">"Paul"</span> <span class="p">}</span> <span class="p">-&gt;</span> <span class="bp">true</span>&#x000A;<span class="p">|</span> <span class="p">_</span> <span class="p">-&gt;</span> <span class="bp">false</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basics/Entry/Discriminated Unions/0'>
<td class='description' colspan='2'>
<div class='name'><p>Discriminated Unions</p>
</div>
<div class='notes'><p><em>Discriminated unions</em> (DU) provide support for values that can be one of a number of named cases, each possibly with different values and types.</p>
<pre class="highlight fsharp"><span class="k">type</span> <span class="nc">Tree</span><span class="p">&lt;</span><span class="k">'</span><span class="nc">T</span><span class="p">&gt;</span> <span class="p">=</span>&#x000A;<span class="p">|</span> <span class="nc">Node</span> <span class="k">of</span> <span class="nc">Tree</span><span class="p">&lt;</span><span class="k">'</span><span class="nc">T</span><span class="p">&gt;</span> <span class="p">*</span> <span class="k">'</span><span class="nc">T</span> <span class="p">*</span> <span class="nc">Tree</span><span class="p">&lt;</span><span class="k">'</span><span class="nc">T</span><span class="p">&gt;</span>&#x000A;<span class="p">|</span> <span class="nc">Leaf</span>&#x000A;&#x000A;<span class="k">let</span> <span class="k">rec</span> <span class="n">depth</span> <span class="p">=</span> <span class="k">function</span>&#x000A;<span class="p">|</span> <span class="nc">Node</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="o">_,</span> <span class="n">r</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">max</span> <span class="p">(</span><span class="n">depth</span> <span class="n">l</span><span class="p">)</span> <span class="p">(</span><span class="n">depth</span> <span class="n">r</span><span class="p">)</span>&#x000A;<span class="p">|</span> <span class="nc">Leaf</span> <span class="p">-&gt;</span> <span class="mi">0</span></pre>
<p>They allow to wrap a type using Single case union types (<a href="https://fsharpforfunandprofit.com/posts/designing-with-types-single-case-dus/">Designing with types: Single case union types</a>:</p>
<pre class="highlight fsharp"><span class="k">type</span> <span class="nc">CustomerId</span> <span class="p">=</span> <span class="nc">CustomerId</span> <span class="k">of</span> <span class="kt">int</span>&#x000A;<span class="k">let</span> <span class="n">custId</span> <span class="p">=</span> <span class="nc">CustomerId</span> <span class="mi">1</span>&#x000A;<span class="c1">// deconstruct in the param</span>&#x000A;<span class="k">let</span> <span class="n">printCustomerId</span> <span class="p">(</span><span class="nc">CustomerId</span> <span class="n">customerIdInt</span><span class="p">)</span> <span class="p">=</span>&#x000A;  <span class="n">printfn</span> <span class="s2">"The CustomerId is %i"</span> <span class="n">customerIdInt</span>&#x000A;<span class="c1">// or deconstruct explicitly through let statement</span>&#x000A;<span class="k">let</span> <span class="n">printCustomerId2</span> <span class="n">custId</span> <span class="p">=</span>&#x000A;  <span class="k">let</span> <span class="p">(</span><span class="nc">CustomerId</span> <span class="n">customerIdInt</span><span class="p">)</span> <span class="p">=</span> <span class="n">custId</span> <span class="c1">// deconstruct here</span>&#x000A;  <span class="n">printfn</span> <span class="s2">"The CustomerId is %i"</span> <span class="n">customerIdInt</span></pre>
<p>F# Core has a few built-in discriminated unions for error handling, e.g., <a href="http://msdn.microsoft.com/en-us/library/dd233245.aspx">Option</a> and <a href="http://msdn.microsoft.com/en-us/library/ee353439.aspx">Choice</a>.</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">optionPatternMatch</span> <span class="n">input</span> <span class="p">=</span>&#x000A;   <span class="k">match</span> <span class="n">input</span> <span class="k">with</span>&#x000A;    <span class="p">|</span> <span class="nc">Some</span> <span class="n">i</span> <span class="p">-&gt;</span> <span class="n">printfn</span> <span class="s2">"input is an int=%d"</span> <span class="n">i</span>&#x000A;    <span class="p">|</span> <span class="nc">None</span> <span class="p">-&gt;</span> <span class="n">printfn</span> <span class="s2">"input is missing"</span></pre>
<p>Single-case discriminated unions are often used to create type-safe abstractions with pattern matching support:</p>
<pre class="highlight fsharp"><span class="k">type</span> <span class="nc">OrderId</span> <span class="p">=</span> <span class="nc">Order</span> <span class="k">of</span> <span class="kt">string</span>&#x000A;&#x000A;<span class="c1">// Create a DU value</span>&#x000A;<span class="k">let</span> <span class="n">orderId</span> <span class="p">=</span> <span class="nc">Order</span> <span class="s2">"12"</span>&#x000A;&#x000A;<span class="c1">// Use pattern matching to deconstruct single-case DU</span>&#x000A;<span class="k">let</span> <span class="p">(</span><span class="nc">Order</span> <span class="n">id</span><span class="p">)</span> <span class="p">=</span> <span class="n">orderId</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basics/Entry/Exceptions/0'>
<td class='description' colspan='2'>
<div class='name'><p>Exceptions</p>
</div>
<div class='notes'><p>Throw an exception using a built-in keyword:</p>

<ul>
<li><code>failwith</code> throws a generic <code>System.Exception</code></li>
<li><code>invalidArg</code> throws an <code>ArgumentException</code></li>
<li><code>nullArg</code> throws a <code>NullArgumentException</code></li>
<li><code>invalidOp</code> throws an <code>InvalidOperationException</code></li>
</ul>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">divideFailwith</span> <span class="n">x</span> <span class="n">y</span> <span class="p">=</span>&#x000A;  <span class="k">if</span> <span class="n">y</span> <span class="p">=</span> <span class="mi">0</span> <span class="k">then</span>&#x000A;    <span class="n">failwith</span> <span class="s2">"Divisor cannot be zero."</span>&#x000A;  <span class="k">else</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span></pre>
<p>Exception handling is done via <code>try/with</code> expressions, using the pattern matching syntax. To catch a specific .NET exception, you have to match with the cast operator <code>:?</code>.</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">divide</span> <span class="n">x</span> <span class="n">y</span> <span class="p">=</span>&#x000A;  <span class="k">try</span>&#x000A;    <span class="nc">Some</span> <span class="p">(</span><span class="n">x</span> <span class="o">/</span> <span class="n">y</span><span class="p">)</span>&#x000A;  <span class="k">with</span> <span class="o">:?</span> <span class="nn">System</span><span class="p">.</span><span class="nc">DivideByZeroException</span> <span class="p">-&gt;</span>&#x000A;    <span class="n">printfn</span> <span class="s2">"Division by zero!"</span>&#x000A;    <span class="nc">None</span></pre>
<p>The <code>try/finally</code> expression enables you to execute clean-up code even if a block of code throws an exception. Here&#39;s an example which also defines custom exceptions.</p>
<pre class="highlight fsharp"><span class="k">exception</span> <span class="nc">InnerError</span> <span class="k">of</span> <span class="kt">string</span>&#x000A;<span class="k">exception</span> <span class="nc">OuterError</span> <span class="k">of</span> <span class="kt">string</span>&#x000A;&#x000A;<span class="k">let</span> <span class="n">handleErrors</span> <span class="n">x</span> <span class="n">y</span> <span class="p">=</span>&#x000A;   <span class="k">try</span>&#x000A;     <span class="k">try</span>&#x000A;        <span class="k">if</span> <span class="n">x</span> <span class="p">=</span> <span class="n">y</span> <span class="k">then</span> <span class="n">raise</span> <span class="p">(</span><span class="nc">InnerError</span><span class="p">(</span><span class="s2">"inner"</span><span class="o">))</span>&#x000A;        <span class="k">else</span> <span class="n">raise</span> <span class="p">(</span><span class="nc">OuterError</span><span class="p">(</span><span class="s2">"outer"</span><span class="o">))</span>&#x000A;     <span class="k">with</span> <span class="nc">InnerError</span><span class="p">(</span><span class="n">str</span><span class="p">)</span> <span class="p">-&gt;</span>&#x000A;       <span class="n">printfn</span> <span class="s2">"Error1 %s"</span> <span class="n">str</span>&#x000A;   <span class="k">finally</span>&#x000A;      <span class="n">printfn</span> <span class="s2">"Always print this."</span></pre>
<p>Raising an exception is done using the <code>raise</code> keyword:</p>
<pre class="highlight fsharp"><span class="k">exception</span> <span class="nc">MyError</span> <span class="k">of</span> <span class="kt">string</span>&#x000A;<span class="n">raise</span> <span class="p">(</span><span class="nc">MyError</span> <span class="s2">"my error"</span><span class="p">)</span></pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Functions/1'>
Functions
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Functions/Entry/Definition/0'>
<td class='description' colspan='2'>
<div class='name'><p>Definition</p>
</div>
<div class='notes'><p>The <code>let</code> keyword also defines named functions.</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">negate</span> <span class="n">x</span> <span class="p">=</span> <span class="n">x</span> <span class="p">*</span> <span class="p">-</span><span class="mi">1</span>&#x000A;<span class="k">let</span> <span class="n">square</span> <span class="n">x</span> <span class="p">=</span> <span class="n">x</span> <span class="p">*</span> <span class="n">x</span>&#x000A;<span class="k">let</span> <span class="n">print</span> <span class="n">x</span> <span class="p">=</span> <span class="n">printfn</span> <span class="s2">"The number is: %d"</span> <span class="n">x</span>&#x000A;&#x000A;<span class="k">let</span> <span class="n">squareNegateThenPrint</span> <span class="n">x</span> <span class="p">=</span>&#x000A;<span class="n">print</span> <span class="p">(</span><span class="n">negate</span> <span class="p">(</span><span class="n">square</span> <span class="n">x</span><span class="o">))</span></pre>
<p>Infix operator declaration:</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="c">(**)</span> <span class="n">x</span> <span class="n">n</span> <span class="p">=</span> <span class="nn">Math</span><span class="p">.</span><span class="nc">Pow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Functions/Entry/Pipe and composition operators/0'>
<td class='description' colspan='2'>
<div class='name'><p>Pipe and composition operators</p>
</div>
<div class='notes'><p>Pipe operator <code>|&gt;</code> is used to chain functions and arguments together. Double-backtick identifiers are handy to improve readability especially in unit testing:</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">``square, negate, then print``</span> <span class="n">x</span> <span class="p">=</span>&#x000A;  <span class="n">x</span> <span class="p">|&gt;</span> <span class="n">square</span> <span class="p">|&gt;</span> <span class="n">negate</span> <span class="p">|&gt;</span> <span class="n">print</span></pre>
<p>This operator is essential in assisting the F# type checker by providing type information before use:</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">sumOfLengths</span> <span class="p">(</span><span class="n">xs</span> <span class="p">:</span> <span class="kt">string</span> <span class="bp">[]</span><span class="p">)</span> <span class="p">=</span>&#x000A;  <span class="n">xs</span>&#x000A;  <span class="p">|&gt;</span> <span class="nn">Array</span><span class="p">.</span><span class="n">map</span> <span class="p">(</span><span class="k">fun</span> <span class="n">s</span> <span class="p">-&gt;</span> <span class="n">s</span><span class="p">.</span><span class="nc">Length</span><span class="p">)</span>&#x000A;  <span class="p">|&gt;</span> <span class="nn">Array</span><span class="p">.</span><span class="n">sum</span></pre>
<p>Composition operator <code>&gt;&gt;</code> is used to compose functions:</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">squareNegateThenPrint'</span> <span class="p">=</span>&#x000A;  <span class="n">square</span> <span class="o">&gt;&gt;</span> <span class="n">negate</span> <span class="o">&gt;&gt;</span> <span class="n">print</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Functions/Entry/Recursive functions/0'>
<td class='description' colspan='2'>
<div class='name'><p>Recursive functions</p>
</div>
<div class='notes'><p>The <code>rec</code> keyword is used together with the <code>let</code> keyword to define a recursive function:</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="k">rec</span> <span class="n">fact</span> <span class="n">x</span> <span class="p">=</span>&#x000A;  <span class="k">if</span> <span class="n">x</span> <span class="p">&lt;</span> <span class="mi">1</span> <span class="k">then</span> <span class="mi">1</span>&#x000A;  <span class="k">else</span> <span class="n">x</span> <span class="p">*</span> <span class="n">fact</span> <span class="p">(</span><span class="n">x</span> <span class="p">-</span> <span class="mi">1</span><span class="p">)</span></pre>
<p><em>Mutually recursive</em> functions (those functions which call each other) are indicated by <code>and</code> keyword:</p>
<pre class="highlight fsharp">  <span class="k">let</span> <span class="k">rec</span> <span class="n">even</span> <span class="n">x</span> <span class="p">=</span>&#x000A;    <span class="k">if</span> <span class="n">x</span> <span class="p">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="bp">true</span>&#x000A;    <span class="k">else</span> <span class="n">odd</span> <span class="p">(</span><span class="n">x</span> <span class="p">-</span> <span class="mi">1</span><span class="p">)</span>&#x000A;  <span class="k">and</span> <span class="n">odd</span> <span class="n">x</span> <span class="p">=</span>&#x000A;    <span class="k">if</span> <span class="n">x</span> <span class="p">=</span> <span class="mi">1</span> <span class="k">then</span> <span class="bp">true</span>&#x000A;    <span class="k">else</span> <span class="n">even</span> <span class="p">(</span><span class="n">x</span> <span class="p">-</span> <span class="mi">1</span><span class="p">)</span></pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Collections/1'>
Collections
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Collections/Entry/Lists/0'>
<td class='description' colspan='2'>
<div class='name'><p>Lists</p>
</div>
<div class='notes'><p>A <em>list</em> is an immutable collection of elements of the same type.</p>
<pre class="highlight fsharp"><span class="c1">// Lists use square brackets and `;` delimiter</span>&#x000A;<span class="k">let</span> <span class="n">list1</span> <span class="p">=</span> <span class="p">[</span> <span class="s2">"a"</span><span class="p">;</span> <span class="s2">"b"</span> <span class="p">]</span>&#x000A;<span class="c1">// :: (cons operator) is prepending</span>&#x000A;<span class="k">let</span> <span class="n">list2</span> <span class="p">=</span> <span class="s2">"c"</span> <span class="p">::</span> <span class="n">list1</span>&#x000A;<span class="c1">// @ is concat</span>&#x000A;<span class="k">let</span> <span class="n">list3</span> <span class="p">=</span> <span class="n">list1</span> <span class="o">@</span> <span class="n">list2</span>&#x000A;&#x000A;<span class="c1">// Recursion on list using (::) operator</span>&#x000A;<span class="k">let</span> <span class="k">rec</span> <span class="n">sum</span> <span class="kt">list</span> <span class="p">=</span>&#x000A;  <span class="k">match</span> <span class="kt">list</span> <span class="k">with</span>&#x000A;  <span class="p">|</span> <span class="bp">[]</span> <span class="p">-&gt;</span> <span class="mi">0</span>&#x000A;  <span class="p">|</span> <span class="n">x</span> <span class="p">::</span> <span class="n">xs</span> <span class="p">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">sum</span> <span class="n">xs</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Collections/Entry/Arrays/0'>
<td class='description' colspan='2'>
<div class='name'><p>Arrays</p>
</div>
<div class='notes'><p><em>Arrays</em> are fixed-size, zero-based, mutable collections of consecutive data elements.</p>
<pre class="highlight fsharp"><span class="c1">// Arrays use square brackets with bar</span>&#x000A;<span class="k">let</span> <span class="n">array1</span> <span class="p">=</span> <span class="p">[|</span> <span class="s2">"a"</span><span class="p">;</span> <span class="s2">"b"</span> <span class="p">|]</span>&#x000A;<span class="c1">// Indexed access using dot</span>&#x000A;<span class="k">let</span> <span class="n">first</span> <span class="p">=</span> <span class="n">array1</span><span class="o">.[</span><span class="mi">0</span><span class="p">]</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Collections/Entry/Sequences/0'>
<td class='description' colspan='2'>
<div class='name'><p>Sequences</p>
</div>
<div class='notes'><p>A <em>sequence</em> is a logical series of elements of the same type. Individual sequence elements are computed only as required, so a sequence can provide better performance than a list in situations in which not all the elements are used.</p>
<pre class="highlight fsharp"><span class="c1">// Sequences can use yield and contain subsequences</span>&#x000A;<span class="k">let</span> <span class="n">seq1</span> <span class="p">=</span>&#x000A;  <span class="n">seq</span> <span class="p">{</span>&#x000A;    <span class="c1">// "yield" adds one element</span>&#x000A;    <span class="k">yield</span> <span class="mi">1</span>&#x000A;    <span class="k">yield</span> <span class="mi">2</span>&#x000A;&#x000A;    <span class="c1">// "yield!" adds a whole subsequence</span>&#x000A;    <span class="k">yield</span><span class="o">!</span> <span class="p">[</span><span class="mi">5</span><span class="p">..</span><span class="mi">10</span><span class="p">]</span>&#x000A;  <span class="p">}</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Collections/Entry/Higher-order functions on collections/0'>
<td class='description' colspan='2'>
<div class='name'><p>Higher-order functions on collections</p>
</div>
<div class='notes'><p>The same list <code>[ 1; 3; 5; 7; 9 ]</code> or array <code>[| 1; 3; 5; 7; 9 |]</code> can be generated in various ways.</p>

<ul>
<li>Using range operator <code>..</code></li>
</ul>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">xs</span> <span class="p">=</span> <span class="p">[</span> <span class="mi">1</span><span class="p">..</span><span class="mi">2</span><span class="p">..</span><span class="mi">9</span> <span class="p">]</span></pre>
<ul>
<li>Using list or array comprehensions</li>
</ul>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">ys</span> <span class="p">=</span> <span class="p">[|</span> <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="p">..</span><span class="mi">4</span> <span class="p">-&gt;</span> <span class="mi">2</span> <span class="p">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">|]</span></pre>
<ul>
<li>Using <code>init</code> function</li>
</ul>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">zs</span> <span class="p">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">init</span> <span class="mi">5</span> <span class="p">(</span><span class="k">fun</span> <span class="n">i</span> <span class="p">-&gt;</span> <span class="mi">2</span> <span class="p">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span></pre>
<p>Lists and arrays have comprehensive sets of higher-order functions for manipulation.</p>

<ul>
<li><code>fold</code> starts from the left of the list (or array) and <code>foldBack</code> goes in the opposite direction</li>
</ul>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">xs'</span> <span class="p">=</span> <span class="nn">Array</span><span class="p">.</span><span class="n">fold</span> <span class="p">(</span><span class="k">fun</span> <span class="n">str</span> <span class="n">n</span> <span class="p">-&gt;</span>&#x000A;  <span class="n">sprintf</span> <span class="s2">"%s,%i"</span> <span class="n">str</span> <span class="n">n</span><span class="p">)</span> <span class="s2">""</span> <span class="p">[|</span> <span class="mi">0</span><span class="p">..</span><span class="mi">9</span> <span class="p">|]</span></pre>
<ul>
<li><code>reduce</code> doesn&#39;t require an initial accumulator</li>
</ul>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">last</span> <span class="n">xs</span> <span class="p">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">reduce</span> <span class="p">(</span><span class="k">fun</span> <span class="n">acc</span> <span class="n">x</span> <span class="p">-&gt;</span> <span class="n">x</span><span class="p">)</span> <span class="n">xs</span></pre>
<ul>
<li><code>map</code> transforms every element of the list (or array)</li>
</ul>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">ys'</span> <span class="p">=</span> <span class="nn">Array</span><span class="p">.</span><span class="n">map</span> <span class="p">(</span><span class="k">fun</span> <span class="n">x</span> <span class="p">-&gt;</span> <span class="n">x</span> <span class="p">*</span> <span class="n">x</span><span class="p">)</span> <span class="p">[|</span> <span class="mi">0</span><span class="p">..</span><span class="mi">9</span> <span class="p">|]</span></pre>
<ul>
<li><code>iter</code>ate through a list and produce side effects</li>
</ul>
<pre class="highlight fsharp"><span class="k">let</span> <span class="p">_</span> <span class="p">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">iter</span> <span class="p">(</span><span class="n">printfn</span> <span class="s2">"%i"</span><span class="p">)</span> <span class="p">[</span> <span class="mi">0</span><span class="p">..</span><span class="mi">9</span> <span class="p">]</span></pre>
<p>All these operations are also available for sequences. The added benefits of sequences are laziness and uniform treatment of all collections implementing <code>IEnumerable&lt;&#39;T&gt;</code>.</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">zs'</span> <span class="p">=</span>&#x000A;  <span class="n">seq</span> <span class="p">{</span>&#x000A;  <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="p">..</span><span class="mi">9</span> <span class="k">do</span>&#x000A;        <span class="n">printfn</span> <span class="s2">"Adding %d"</span> <span class="n">i</span>&#x000A;          <span class="k">yield</span> <span class="n">i</span>&#x000A;    <span class="p">}</span></pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Pattern Matching/1'>
Pattern Matching
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Pattern Matching/Entry/Pattern Matching/0'>
<td class='description' colspan='2'>
<div class='name'><p>Pattern Matching</p>
</div>
<div class='notes'><p>Pattern matching is often facilitated through <code>match</code> keyword.</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="k">rec</span> <span class="n">fib</span> <span class="n">n</span> <span class="p">=</span>&#x000A;  <span class="k">match</span> <span class="n">n</span> <span class="k">with</span>&#x000A;  <span class="p">|</span> <span class="mi">0</span> <span class="p">-&gt;</span> <span class="mi">0</span>&#x000A;  <span class="p">|</span> <span class="mi">1</span> <span class="p">-&gt;</span> <span class="mi">1</span>&#x000A;  <span class="p">|</span> <span class="p">_</span> <span class="p">-&gt;</span> <span class="n">fib</span> <span class="p">(</span><span class="n">n</span> <span class="p">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fib</span> <span class="p">(</span><span class="n">n</span> <span class="p">-</span> <span class="mi">2</span><span class="p">)</span></pre>
<p>In order to match sophisticated inputs, one can use <code>when</code> to create filters or guards on patterns:</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">sign</span> <span class="n">x</span> <span class="p">=</span>&#x000A;  <span class="k">match</span> <span class="n">x</span> <span class="k">with</span>&#x000A;  <span class="p">|</span> <span class="mi">0</span> <span class="p">-&gt;</span> <span class="mi">0</span>&#x000A;  <span class="p">|</span> <span class="n">x</span> <span class="k">when</span> <span class="n">x</span> <span class="p">&lt;</span> <span class="mi">0</span> <span class="p">-&gt;</span> <span class="p">-</span><span class="mi">1</span>&#x000A;  <span class="p">|</span> <span class="n">x</span> <span class="p">-&gt;</span> <span class="mi">1</span></pre>
<p>Pattern matching can be done directly on arguments:</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="n">fst'</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">_)</span> <span class="p">=</span> <span class="n">x</span></pre>
<p>or implicitly via <code>function</code> keyword:</p>
<pre class="highlight fsharp"><span class="c1">/// Similar to `fib`; using `function` for pattern matching</span>&#x000A;<span class="k">let</span> <span class="k">rec</span> <span class="n">fib'</span> <span class="p">=</span> <span class="k">function</span>&#x000A;  <span class="p">|</span> <span class="mi">0</span> <span class="p">-&gt;</span> <span class="mi">0</span>&#x000A;  <span class="p">|</span> <span class="mi">1</span> <span class="p">-&gt;</span> <span class="mi">1</span>&#x000A;  <span class="p">|</span> <span class="n">n</span> <span class="p">-&gt;</span> <span class="n">fib'</span> <span class="p">(</span><span class="n">n</span> <span class="p">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fib'</span> <span class="p">(</span><span class="n">n</span> <span class="p">-</span> <span class="mi">2</span><span class="p">)</span></pre>
<p>For more complete reference visit <a href="http://msdn.microsoft.com/en-us/library/dd547125.aspx">Pattern Matching (MSDN)</a>.</p>
</div>
</td>
</tr>
<tr id='//dash_ref_Pattern Matching/Entry/Active Patterns/0'>
<td class='description' colspan='2'>
<div class='name'><p>Active Patterns</p>
</div>
<div class='notes'><p><em>Complete active patterns</em>:</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="o">(|</span><span class="nc">Even</span><span class="p">|</span><span class="nc">Odd</span><span class="o">|)</span> <span class="n">i</span> <span class="p">=</span>&#x000A;  <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="p">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="nc">Even</span> <span class="k">else</span> <span class="nc">Odd</span>&#x000A;&#x000A;<span class="k">let</span> <span class="n">testNumber</span> <span class="n">i</span> <span class="p">=</span>&#x000A;    <span class="k">match</span> <span class="n">i</span> <span class="k">with</span>&#x000A;    <span class="p">|</span> <span class="nc">Even</span> <span class="p">-&gt;</span> <span class="n">printfn</span> <span class="s2">"%d is even"</span> <span class="n">i</span>&#x000A;    <span class="p">|</span> <span class="nc">Odd</span> <span class="p">-&gt;</span> <span class="n">printfn</span> <span class="s2">"%d is odd"</span> <span class="n">i</span></pre>
<p><em>Parameterized active patterns</em>:</p>
<pre class="highlight fsharp"><span class="k">let</span> <span class="o">(|</span><span class="nc">DivisibleBy</span><span class="o">|_|)</span> <span class="n">by</span> <span class="n">n</span> <span class="p">=</span>&#x000A;  <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">by</span> <span class="p">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="nc">Some</span> <span class="nc">DivisibleBy</span> <span class="k">else</span> <span class="nc">None</span>&#x000A;&#x000A;<span class="k">let</span> <span class="n">fizzBuzz</span> <span class="p">=</span> <span class="k">function</span>&#x000A;    <span class="p">|</span> <span class="nc">DivisibleBy</span> <span class="mi">3</span> <span class="p">&amp;</span> <span class="nc">DivisibleBy</span> <span class="mi">5</span> <span class="p">-&gt;</span> <span class="s2">"FizzBuzz"</span>&#x000A;    <span class="p">|</span> <span class="nc">DivisibleBy</span> <span class="mi">3</span> <span class="p">-&gt;</span> <span class="s2">"Fizz"</span>&#x000A;    <span class="p">|</span> <span class="nc">DivisibleBy</span> <span class="mi">5</span> <span class="p">-&gt;</span> <span class="s2">"Buzz"</span>&#x000A;    <span class="p">|</span> <span class="n">i</span> <span class="p">-&gt;</span> <span class="kt">string</span> <span class="n">i</span></pre>
<p><em>Partial active patterns</em> share the syntax of parameterized patterns but their active recognizers accept only one argument.</p>
</div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Scripting/1'>
Scripting
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Scripting/Entry/Compiler Directives/0'>
<td class='description' colspan='2'>
<div class='name'><p>Compiler Directives</p>
</div>
<div class='notes'><p>Load another F# source file into FSI.</p>
<pre class="highlight fsharp"><span class="p">#</span><span class="n">load</span> <span class="s2">"../lib/StringParsing.fs"</span></pre>
<p>Reference a .NET assembly (<code>/</code> symbol is recommended for Mono compatibility).</p>
<pre class="highlight fsharp"><span class="p">#</span><span class="n">r</span> <span class="s2">"../lib/FSharp.Markdown.dll"</span></pre>
<p>Include a directory in assembly search paths.</p>
<pre class="highlight fsharp"><span class="p">#</span><span class="nc">I</span> <span class="s2">"../lib"</span>&#x000A;<span class="p">#</span><span class="n">r</span> <span class="s2">"FSharp.Markdown.dll"</span></pre>
<p>Other important directives are conditional execution in FSI (<code>INTERACTIVE</code>) and querying current directory (<code>__SOURCE_DIRECTORY__</code>).</p>
<pre class="highlight fsharp"><span class="p">#</span><span class="k">if</span> <span class="nc">INTERACTIVE</span>&#x000A;<span class="k">let</span> <span class="n">path</span> <span class="p">=</span> <span class="o">__</span><span class="nc">SOURCE_DIRECTORY__</span> <span class="o">+</span> <span class="s2">"../lib"</span>&#x000A;<span class="p">#</span><span class="k">else</span>&#x000A;<span class="k">let</span> <span class="n">path</span> <span class="p">=</span> <span class="s2">"../../../lib"</span>&#x000A;<span class="p">#</span><span class="n">endif</span></pre></div>
</td>
</tr>
</table>
</div>
</section>
</article>
<footer>
You can modify and improve this cheat sheet <a onclick="window.dash.openExternal_(this.href); return false;" href="http://cheat.kapeli.com">here</a>
</footer>
</body>
</html>
