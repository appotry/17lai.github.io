<!DOCTYPE html><html><head><meta charset="utf-8"><title>Rails Migrations CLI</title><link href="style.css" rel="stylesheet"><link href="//dash_ref/Category/Creating a Migration/1"><link href="//dash_ref_Creating a Migration/Entry/AddXXXToYYY &lt;fields&gt;/0"><link href="//dash_ref_Creating a Migration/Entry/RemoveXXXFromYYY &lt;fields&gt;/0"><link href="//dash_ref_Creating a Migration/Entry/CreateXXX &lt;fields&gt;/0"><link href="//dash_ref_Creating a Migration/Entry/AddXXXRefToYYY &lt;fields&gt;/0"><link href="//dash_ref_Creating a Migration/Entry/CreateJoinTableXXXYYY &lt;xxx&gt; &lt;yyy&gt;/0"></head><body><header><h1>Rails Migrations CLI</h1></header><article><p></p><p>Basic migration syntax:</p><pre class="highlight plaintext">rails generate migration AddPartNumberToProducts</pre><p>It will generate a named migration:</p><pre class="highlight ruby"><span class="k">class</span> <span class="nc">AddPartNumberToProducts</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span>&#x000A;  <span class="k">def</span> <span class="nf">change</span>&#x000A;  <span class="k">end</span>&#x000A;<span class="k">end</span></pre><p>Below is the naming convention for generating code for migrations automatically.</p><p></p><section class="category"><h2 id="//dash_ref/Category/Creating a Migration/1">Creating a Migration</h2><div class="scrollable"><table><tr id="//dash_ref_Creating a Migration/Entry/AddXXXToYYY &lt;fields&gt;/0"><td class="description" colspan="2"><div class="name"><p>AddXXXToYYY &lt;fields&gt;</p></div><div class="notes"><pre class="highlight plaintext">rails generate migration AddPartNumberToProducts part_number:string</pre><pre class="highlight ruby"><span class="k">class</span> <span class="nc">AddPartNumberToProducts</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span>&#x000A;  <span class="k">def</span> <span class="nf">change</span>&#x000A;    <span class="n">add_column</span> <span class="ss">:products</span><span class="p">,</span> <span class="ss">:part_number</span><span class="p">,</span> <span class="ss">:string</span>&#x000A;  <span class="k">end</span>&#x000A;<span class="k">end</span></pre></div></td></tr><tr id="//dash_ref_Creating a Migration/Entry/RemoveXXXFromYYY &lt;fields&gt;/0"><td class="description" colspan="2"><div class="name"><p>RemoveXXXFromYYY &lt;fields&gt;</p></div><div class="notes"><pre class="highlight plaintext">rails generate migration RemovePartNumberFromProducts part_number:string</pre><pre class="highlight ruby"><span class="k">class</span> <span class="nc">RemovePartNumberFromProducts</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span>&#x000A;  <span class="k">def</span> <span class="nf">change</span>&#x000A;    <span class="n">remove_column</span> <span class="ss">:products</span><span class="p">,</span> <span class="ss">:part_number</span><span class="p">,</span> <span class="ss">:string</span>&#x000A;  <span class="k">end</span>&#x000A;<span class="k">end</span></pre></div></td></tr><tr id="//dash_ref_Creating a Migration/Entry/CreateXXX &lt;fields&gt;/0"><td class="description" colspan="2"><div class="name"><p>CreateXXX &lt;fields&gt;</p></div><div class="notes"><pre class="highlight plaintext">rails generate migration CreateProducts name:string part_number:string</pre><pre class="highlight ruby"><span class="k">class</span> <span class="nc">CreateProducts</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span>&#x000A;  <span class="k">def</span> <span class="nf">change</span>&#x000A;    <span class="n">create_table</span> <span class="ss">:products</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>&#x000A;      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:name</span>&#x000A;      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:part_number</span>&#x000A;    <span class="k">end</span>&#x000A;  <span class="k">end</span>&#x000A;<span class="k">end</span></pre></div></td></tr><tr id="//dash_ref_Creating a Migration/Entry/AddXXXRefToYYY &lt;fields&gt;/0"><td class="description" colspan="2"><div class="name"><p>AddXXXRefToYYY &lt;fields&gt;</p></div><div class="notes"><pre class="highlight plaintext">rails generate migration AddUserRefToProducts user:references</pre><pre class="highlight ruby"><span class="k">class</span> <span class="nc">AddUserRefToProducts</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span>&#x000A;  <span class="k">def</span> <span class="nf">change</span>&#x000A;    <span class="n">add_reference</span> <span class="ss">:products</span><span class="p">,</span> <span class="ss">:user</span><span class="p">,</span> <span class="ss">index: </span><span class="kp">true</span>&#x000A;  <span class="k">end</span>&#x000A;<span class="k">end</span></pre></div></td></tr><tr id="//dash_ref_Creating a Migration/Entry/CreateJoinTableXXXYYY &lt;xxx&gt; &lt;yyy&gt;/0"><td class="description" colspan="2"><div class="name"><p>CreateJoinTableXXXYYY &lt;xxx&gt; &lt;yyy&gt;</p></div><div class="notes"><pre class="highlight plaintext">rails g migration CreateJoinTableCustomerProduct customer product</pre><pre class="highlight ruby"><span class="k">class</span> <span class="nc">CreateJoinTableCustomerProduct</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span>&#x000A;  <span class="k">def</span> <span class="nf">change</span>&#x000A;    <span class="n">create_join_table</span> <span class="ss">:customers</span><span class="p">,</span> <span class="ss">:products</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>&#x000A;      <span class="c1"># t.index [:customer_id, :product_id]</span>&#x000A;      <span class="c1"># t.index [:product_id, :customer_id]</span>&#x000A;    <span class="k">end</span>&#x000A;  <span class="k">end</span>&#x000A;<span class="k">end</span></pre></div></td></tr></table></div></section><section class="notes"><h2>Notes</h2><p>Based on <a href="http://guides.rubyonrails.org/migrations.html">http://guides.rubyonrails.org/migrations.html</a></p></section></article><footer>You can modify and improve this cheat sheet <a onclick="return window.dash.openExternal_(this.href),!1" href="http://cheat.kapeli.com">here</a></footer></body></html>