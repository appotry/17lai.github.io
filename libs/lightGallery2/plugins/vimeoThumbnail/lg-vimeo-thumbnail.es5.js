var __assign=function(){__assign=Object.assign||function e(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o))t[o]=n[o]}return t};return __assign.apply(this,arguments)};function __awaiter(e,l,n,a){function s(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(t,n){function r(e){try{o(a.next(e))}catch(e){n(e)}}function i(e){try{o(a["throw"](e))}catch(e){n(e)}}function o(e){e.done?t(e.value):s(e.value).then(r,i)}o((a=a.apply(e,l||[])).next())})}function __generator(e,n){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,t;return t={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(t[Symbol.iterator]=function(){return this}),t;function a(t){return function(e){return s([t,e])}}function s(t){if(i)throw new TypeError("Generator is already executing.");while(r)try{if(i=1,o&&(l=t[0]&2?o["return"]:t[0]?o["throw"]||((l=o["return"])&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;if(o=0,l)t=[t[0]&2,l.value];switch(t[0]){case 0:case 1:l=t;break;case 4:r.label++;return{value:t[1],done:false};case 5:r.label++;o=t[1];t=[0];continue;case 7:t=r.ops.pop();r.trys.pop();continue;default:if(!(l=r.trys,l=l.length>0&&l[l.length-1])&&(t[0]===6||t[0]===2)){r=0;continue}if(t[0]===3&&(!l||t[1]>l[0]&&t[1]<l[3])){r.label=t[1];break}if(t[0]===6&&r.label<l[1]){r.label=l[1];l=t;break}if(l&&r.label<l[2]){r.label=l[2];r.ops.push(t);break}if(l[2])r.ops.pop();r.trys.pop();continue}t=n.call(e,r)}catch(e){t=[6,e];o=0}finally{i=l=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:true}}}var lGEvents={afterAppendSlide:"lgAfterAppendSlide",init:"lgInit",hasVideo:"lgHasVideo",containerResize:"lgContainerResize",updateSlides:"lgUpdateSlides",afterAppendSubHtml:"lgAfterAppendSubHtml",beforeOpen:"lgBeforeOpen",afterOpen:"lgAfterOpen",slideItemLoad:"lgSlideItemLoad",beforeSlide:"lgBeforeSlide",afterSlide:"lgAfterSlide",posterClick:"lgPosterClick",dragStart:"lgDragStart",dragMove:"lgDragMove",dragEnd:"lgDragEnd",beforeNextSlide:"lgBeforeNextSlide",beforePrevSlide:"lgBeforePrevSlide",beforeClose:"lgBeforeClose",afterClose:"lgAfterClose",rotateLeft:"lgRotateLeft",rotateRight:"lgRotateRight",flipHorizontal:"lgFlipHorizontal",flipVertical:"lgFlipVertical",autoplay:"lgAutoplay",autoplayStart:"lgAutoplayStart",autoplayStop:"lgAutoplayStop"};var vimeoSettings={showVimeoThumbnails:true,showThumbnailWithPlayButton:false};var VimeoThumbnail=function(){function e(e){this.core=e;this.settings=__assign(__assign({},vimeoSettings),this.core.settings);return this}e.prototype.init=function(){var r=this;if(!this.settings.showVimeoThumbnails){return}this.core.LGel.on(lGEvents.init+".vimeothumbnails",function(e){var t=e.detail.instance;var n=t.$container.find(".lg-thumb-outer").get();if(n){r.setVimeoThumbnails(t)}})};e.prototype.setVimeoThumbnails=function(l){return __awaiter(this,void 0,void 0,function(){var t,n,r,i,o;return __generator(this,function(e){switch(e.label){case 0:t=0;e.label=1;case 1:if(!(t<l.galleryItems.length))return[3,5];n=l.galleryItems[t];r=n.__slideVideoInfo||{};if(!r.vimeo)return[3,4];return[4,fetch("https://vimeo.com/api/oembed.json?url="+encodeURIComponent(n.src))];case 2:i=e.sent();return[4,i.json()];case 3:o=e.sent();l.$container.find(".lg-thumb-item").eq(t).find("img").attr("src",this.settings.showThumbnailWithPlayButton?o.thumbnail_url_with_play_button:o.thumbnail_url);e.label=4;case 4:t++;return[3,1];case 5:return[2]}})})};e.prototype.destroy=function(){this.core.LGel.off(".lg.vimeothumbnails");this.core.LGel.off(".vimeothumbnails")};return e}();export default VimeoThumbnail;