<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://blog.17lai.site</id>
    <title>夜法之书 • Posts by &#34;nas&#34; category</title>
    <link href="https://blog.17lai.site" />
    <updated>2021-10-12T05:42:55.000Z</updated>
    <category term="Github" />
    <category term="Jekyll" />
    <category term="blog" />
    <category term="Gitlab" />
    <category term="Git" />
    <category term="Crack" />
    <category term="Linux" />
    <category term="hardlink" />
    <category term="bt" />
    <category term="pt" />
    <category term="note" />
    <category term="markdown" />
    <category term="picgo" />
    <category term="wiz" />
    <category term="Joplin" />
    <category term="Typora" />
    <category term="QNAP" />
    <category term="硬盘" />
    <category term="nas" />
    <category term="embeded" />
    <category term="3G" />
    <category term="4G" />
    <category term="3531a" />
    <category term="移植" />
    <category term="嵌入式" />
    <category term="hisilicon" />
    <category term="Driver" />
    <category term="3798M" />
    <category term="MPP" />
    <category term="UNF" />
    <category term="Kernel" />
    <category term="宝塔" />
    <category term="VPS" />
    <category term="建站" />
    <category term="Nginx" />
    <category term="Apache" />
    <category term="MySQL" />
    <category term="Docker" />
    <category term="LAMP" />
    <category term="PHP" />
    <category term="Tomcat" />
    <category term="JSP" />
    <category term="教程" />
    <category term="Debian" />
    <category term="Laptop" />
    <category term="ED2K" />
    <category term="ATI" />
    <category term="WIFI" />
    <category term="Hotkey" />
    <category term="Rigistry" />
    <category term="email" />
    <category term="https" />
    <category term="ssl" />
    <category term="SSD" />
    <category term="HDD" />
    <category term="管理" />
    <category term="PDCA" />
    <category term="5W2H" />
    <category term="SMART" />
    <category term="SWOT" />
    <category term="GROW" />
    <category term="OKR" />
    <category term="WBS" />
    <category term="PT" />
    <category term="BT" />
    <category term="qbittorrent" />
    <category term="transmission" />
    <category term="Emby" />
    <category term="Sonarr" />
    <category term="Jeckett" />
    <category term="Portainer" />
    <category term="Watchtower" />
    <category term="DNSMasq" />
    <category term="DNSCrypt" />
    <category term="启动" />
    <category term="优化" />
    <category term="SSL" />
    <category term="TLS" />
    <category term="隐私" />
    <category term="安全" />
    <category term="linux" />
    <category term="GitBook" />
    <category term="MySql" />
    <category term="Mariadb" />
    <category term="技巧" />
    <category term="MarkDown" />
    <category term="Mermaid" />
    <category term="Nas" />
    <category term="群晖" />
    <category term="hexo" />
    <category term="matery" />
    <category term="cdn" />
    <category term="seo" />
    <category term="web" />
    <category term="http" />
    <category term="css" />
    <category term="js" />
    <category term="3a" />
    <category term="ae" />
    <category term="image" />
    <category term="ai" />
    <category term="face" />
    <category term="ccs" />
    <category term="vim" />
    <category term="ide" />
    <category term="docker" />
    <category term="music" />
    <category term="韩红" />
    <category term="thinkpad" />
    <category term="sound" />
    <category term="speaker" />
    <category term="刮削" />
    <category term="MusicBrainz" />
    <category term="mp3tag" />
    <category term="tmm" />
    <category term="字幕" />
    <category term="emby" />
    <category term="plex" />
    <category term="qnap" />
    <category term="ipv6" />
    <category term="cmake" />
    <category term="develop" />
    <category term="traefik" />
    <category term="proxy" />
    <category term="swarm" />
    <category term="ubuntu" />
    <category term="vscode" />
    <category term="插件" />
    <category term="编码" />
    <category term="mermaid" />
    <category term="plantuml" />
    <category term="mathjax" />
    <category term="CI/CD" />
    <category term="Earthly" />
    <category term="git" />
    <category term="mstream" />
    <category term="selfhost" />
    <category term="中岛美嘉" />
    <category term="node" />
    <category term="jenkins" />
    <category term="shell" />
    <category term="tools" />
    <category term="winrar" />
    <category term="crack" />
    <category term="emoji" />
    <category term="isp" />
    <category term="awb" />
    <category term="mywork" />
    <entry>
        <id>https://blog.17lai.site/posts/462f1e5c/</id>
        <title>通过 IPV6 访问 Qnap NAS 中 Docker 的服务</title>
        <link rel="alternate" href="https://blog.17lai.site/posts/462f1e5c/"/>
        <content type="html">&lt;link rel=&#34;stylesheet&#34; class=&#34;aplayer-secondary-style-marker&#34; href=&#34;/assets/css/APlayer.min.css&#34;&gt;&lt;script src=&#34;/assets/js/APlayer.min.js&#34; class=&#34;aplayer-secondary-script-marker&#34;&gt;&lt;/script&gt;&lt;h2 id=&#34;环境&#34;&gt;环境&lt;/h2&gt;
&lt;p&gt;系统：QTS 4.3.6&lt;br&gt;
网络：IPV4 &amp;amp; IPV6&lt;br&gt;
Docker: 由 Container Station 提供&lt;/p&gt;
&lt;h2 id=&#34;问题-2&#34;&gt;问题&lt;/h2&gt;
&lt;p&gt;通过 ipv6 地址可以打开 NAS 的管理页面，但是无法访问 Docker 对应端口的服务。&lt;/p&gt;
&lt;h2 id=&#34;排查&#34;&gt;排查&lt;/h2&gt;
&lt;p&gt;QTS 中 Docker 使用的虚拟交换机网络没有启动 IPV6，且无法在虚拟交换机设置中手动启动。&lt;br&gt;
这样一来，Docker 只监听了 tcp4 的端口，对于主机上 tcp6 的端口的访问无法映射到 docker 容器上。&lt;/p&gt;
&lt;h2 id=&#34;解决方案-2&#34;&gt;解决方案&lt;/h2&gt;
&lt;p&gt;在主机上开一个 tcp6 的端口，将其转发到主机上与 docker 关联的 tcp4 端口。&lt;br&gt;
即：&lt;br&gt;
docker(tcp4)–&amp;gt;host(tcp4)–&amp;gt;host(tcp6)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在 qts 上安装包管理器：Entware. https://github.com/Entware/Entware/wiki/Install-on-QNAP-NAS&lt;/li&gt;
&lt;li&gt; 执行 opkg update, 更新&lt;/li&gt;
&lt;li&gt;安装端口转发工具，这里使用 socat：opkg install socat&lt;/li&gt;
&lt;li&gt; 设置转发 host (tcp6)–&amp;gt;host (tcp4):(socat TCP6-LISTEN:6880,reuseaddr,fork TCP4:127.0.0.1:7880 &amp;amp;)&lt;/li&gt;
&lt;li&gt; 大功告成&lt;/li&gt;
&lt;/ul&gt;
&lt;link rel=&#34;stylesheet&#34; href=&#34;/css/bilicard.css&#34; type=&#34;text/css&#34;&gt;</content>
        <category term="nas" />
        <category term="docker" />
        <category term="qnap" />
        <category term="ipv6" />
        <updated>2021-10-12T05:42:55.000Z</updated>
    </entry>
</feed>
