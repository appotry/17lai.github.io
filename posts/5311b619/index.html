<!DOCTYPE HTML>
<html lang="zh-CN">



<head>
    <meta charset="utf-8">
    <meta name="keywords" content="hexo, matery, Github, cdn, seo, blog, google, baidu, bing, shenma, ipfs">
    <meta name="description" content="如果你想自动化部署怎么办？同时部署到多个空间怎么办？如何多种方法同时使用，多线路负载均衡访问了？本篇文章帮助你一一实现！">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="夜法之书">
    <meta name="theme-color" content="#7e9fc4">
    <meta name="msapplication-TileImage" content="/medias_webp/icons/android-chrome-192x192.png">
    <meta name="msapplication-TileColor" content="#7e9fc4">
    <!-- https://nibes.cn/blog/26594 -->
    <!-- https://juejin.cn/post/6844903780228530183 -->
    <!-- https://www.freebuf.com/articles/web/260535.html -->
    <meta http-equiv="Content-Security-Policy"
        content="default-src * vitals.vercel-insights.com 'unsafe-inline' 'unsafe-eval';
            script-src * 'unsafe-inline' 'unsafe-eval';
            connect-src * 'unsafe-inline';
            img-src * data: blob: 'unsafe-inline';
            font-src * data: blob: 'unsafe-inline';
            frame-src *;style-src * 'unsafe-inline';">
    <link rel="apple-touch-icon" href="/medias_webp/icons/apple-touch-icon.webp">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <title>基于Hexo的matery主题搭建博客增强部署篇4 | 夜法之书</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" href="/favicon.webp">
    <!-- preconnect -->
    <link href="//cdn.jsdelivr.net" rel="preconnect" crossorigin>
    <link href="//lib.baomitu.com" rel="preconnect" crossorigin>
    
        <link href="//busuanzi.ibruce.info" rel="preconnect" crossorigin>
        <link href="//busuanzi.ibruce.info" rel="dns-prefetch" crossorigin>
    
    
        <link href="//cimg1.17lai.site" rel="preconnect" crossorigin>
    
    <link href="https://hm.baidu.com" rel="preconnect" crossorigin>
    <link href="https://www.googletagmanager.com" rel="preconnect" crossorigin>
    <link href="https://www.google-analytics.com" rel="preconnect" crossorigin>

    <link href="//cdn.webpushr.com" rel="preconnect" crossorigin>
    <link href="//bot.webpushr.com" rel="preconnect" crossorigin>
    <link href="//analytics.webpushr.com" rel="preconnect" crossorigin>

    
        <link href="https://waline.17lai.site" rel="preconnect" crossorigin>
        <link href="https://waline.17lai.site" rel="dns-prefetch" crossorigin>
    

    <link rel="alternate" type="application/atom+xml" title="所有订阅ATOM--夜法之书" href="https://blog.17lai.site/atom.xml" />
<link rel="alternate" type="application/rss+xml" title="所有订阅RSS2--夜法之书" href="https://blog.17lai.site/rss.xml" />
<link rel="alternate" type="application/json" title="所有订阅JSON--夜法之书" href="https://blog.17lai.site/feed.json" />


    
    
    <style>
        .lazy-background {
            background-image: var(--background-img); /* The final image */
            background-repeat:no-repeat;
            background-size: cover;
            background-attachment:fixed;
            -webkit-transition:all 1.0s ease-in-out;
            -moz-transition:all 1.0s ease-in-out;
            -o-transition:all 1.0s ease-in-out;
            -ms-transition:all 1.0s ease-in-out;
            transition:all 1.0s ease-in-out;
        }
        @media only screen and (max-width: 1024px) {
            /* 分辨率小于1024时不显示背景图 */
            .lazy-background {
                background-image: none;
            }
        }
    </style>




    <!-- bg-cover style     -->



<!-- preload js font css or prefetch -->
<link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" as="script"  importance="high">
<!-- <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery-ui@1.13.2/dist/jquery-ui.min.js" as="script"> -->
<link rel="preload" href="/js/utils.js" as="script" importance="high">
<link rel="preload" href="/js/color-schema.js" as="script" importance="high">

<link rel="stylesheet preload" as="style" type="text/css" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css">
<link rel="preload" as="font" type='font/woff2' href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/webfonts/fa-brands-400.woff2" crossorigin>
<link rel="preload" as="font" type='font/woff2' href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/webfonts/fa-regular-400.woff2" crossorigin>
<link rel="preload" as="font" type='font/woff2' href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/webfonts/fa-solid-900.woff2" crossorigin>

<!-- <link rel="stylesheet preload" as="style" type="text/css" href="css/index.css"> -->
<!-- <link rel="stylesheet" href="css/index.css"> -->
<!-- <link rel="stylesheet preload" as="style" type="text/css" href="/libs/awesome/css/all.min.css"> -->
<!-- <link rel="preload" as="font" type='font/woff2' href="/libs/awesome/webfonts/fa-brands-400.woff2"> -->
<!-- <link rel="preload" as="font" type='font/woff2' href="/libs/awesome/webfonts/fa-regular-400.woff2"> -->
<!-- <link rel="preload" as="font" type='font/woff2' href="/libs/awesome/webfonts/fa-solid-900.woff2"> -->



<!-- <link rel="stylesheet preload" as="style" type="text/css" href="/css/main.css"> -->


  <link rel="stylesheet preload" as="style" type="text/css" href="/css/reward.css">





<link rel="stylesheet preload" as="style" type="text/css" href="https://cdn.jsdelivr.net/npm/@materializecss/materialize@1.2.1/dist/css/materialize.min.css">
<link rel="stylesheet preload" as="style" type="text/css" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.min.css">
<link rel="stylesheet preload" as="style" type="text/css" href="https://cdn.jsdelivr.net/npm/animate.css@3.6.1/animate.min.css">
<link rel="stylesheet preload" as="style" type="text/css" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css">

<link rel="stylesheet preload" as="style" type="text/css" href="https://cdn.jsdelivr.net/npm/jquery-ui@1.13.2/dist/themes/base/jquery-ui.min.css">
<link rel="stylesheet preload" as="style" type="text/css" href="/css/matery.css">
<link rel="stylesheet preload" as="style" type="text/css" href="/css/my.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@materializecss/materialize@1.2.1/dist/css/materialize.min.css">
<link rel="stylesheet" href="/css/matery.css">
<link rel="stylesheet" href="/css/my.css">



  
    <!-- <link rel="prefetch" as="font" type='font/woff2' href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/fonts/iconfont.woff" crossorigin> -->
    <link rel="stylesheet preload" as="style" type="text/css" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css">
  







  <style>
/*文章详情样式*/
#artDetail {
  margin-top: -60px;
}

/* 修改小屏幕下文章详情table样式. */
@media only screen and (max-width: 550px) {
  #articleContent table {
      table-layout: fixed;
  }
}

@media only screen and (min-width: 1418px) {
  #artDetail {
      margin-top: -60px;
      padding: 0 0.75rem;
  }
}

#artDetail .card {
  /* box-shadow: 0 10px 35px 2px rgba(0, 0, 0, .15),0 5px 15px rgba(0, 0, 0, .07),0 2px 5px -5px rgba(0, 0, 0, .1) !important; */
  box-shadow:0 15px 8px rgba(50, 50, 93, .1), 0 5px 8px rgba(0, 0, 0, .07)!important
}

#artDetail .tag-cate {
  padding-bottom: 15px;
}

#artDetail a {
  margin-right: 0 !important;
  text-transform: none !important;
}

#artDetail .article-info {
  padding: 20px 30px 1px 40px;
  margin-bottom: -5px;
}

#artDetail .article-tag .chip,
#artDetail .tag_share .article-tag .chip {
  font-size: 1rem;
  font-weight: 400;
  height: 25px;
  line-height: 24px;
  color: var(--navbar-text-color);
  border-radius: 15px;
  margin-right: 5px;
  margin-bottom: 2px;
  border: 1px solid;

}

#artDetail .post-cate {
  float: right;
  color: var(--post-link-color);
}

#artDetail .post-cate a {
  padding-right: 5px;
  color: var(--post-link-color);
  font-weight: 500;
}

#artDetail .post-cate a:hover {
  text-decoration: underline;
}

#artDetail .post-info {
  color: #525f7f;
}

#artDetail .post-info .post-category {
  padding-right: 4px;
  color: #525f7f;
}

#artDetail .post-info .post-category:hover {
  font-weight: bold;
  color: var(--post-link-color);
  text-decoration: underline;
}

#artDetail .post-info .post-date {
  color: #525f7f;
}

#artDetail .post-info .post-word-count {
  margin-left: 15px;
}

#artDetail .post-info .post-read {
  margin-left: 15px;
  color: #525f7f;
}

#artDetail .article-card-content {
  padding: 0 15px 20px 18px;
}

@media only screen and (max-width: 601px) {
  #artDetail .article-info {
      padding: 15px 15px 1px 15px;
      margin-bottom: -5px;
  }
}

@media only screen and (min-width: 600px) and (max-width: 992px) {
  #artDetail .article-card-content {
      padding: 0 30px 20px 32px;
  }

  #artDetail .article-info {
      padding: 15px 20px 0 28px;
      margin-bottom: -5px;
  }
}

@media only screen and (min-width: 993px) {
  #artDetail .article-card-content {
      padding: 0 50px 20px 50px;
  }
}

#artDetail .reprint {
  margin:15px 0 20px 0;
  border: 1px solid #5cb85c;
  border-radius: 10px;
  padding: 0.5rem 0.8rem;
  line-height: 2;
  transition: box-shadow 0.3s ease-in-out
}

#artDetail .reprint-info {
  word-break: break-word;
}

#artDetail .reprint:hover {
  box-shadow: 0 0 10px 0 rgba(232, 237, 250, .6), 0 4px 8px 0 rgba(232, 237, 250, .5)
}

#artDetail .reprint a {
  font-size: 1.05rem;
  color: var(--post-link-color);
  font-weight: 500;
}

#articleContent p {
  margin: 2px 2px 10px;
  font-size: 1.05rem;
  line-height: 1.85rem;
}

#articleContent blockquote p {
  text-indent: 0.2rem;
}

#articleContent a,
#comments a {
  padding: 0 2px;
  color: var(--post-link-color);
  font-weight: 500;
  text-decoration: underline;
  word-wrap: break-word;
  cursor: pointer;
  transition: color 0.2s ease-in-out, background-color 0.2s ease-in-out;
}

#articleContent a:hover,
#comments a:hover {
  color: var(--link-hover-color);
  transition: color 0.2s ease-in-out, background-color 0.2s ease-in-out;
}

#articleContent .img-item {
  text-align: center;
}

#articleContent img {
  max-width: 100%;
  height: auto;
  cursor: pointer;
}

#articleContent video {
  display: block;
  margin: 30px auto;
  box-shadow: 0 5px 35px 0 rgba(0, 0, 0, .2), 0 10px 35px -11px rgba(0, 0, 0, .6);
  cursor: pointer;
}

#articleContent ol,
#articleContent ul {
  display: block;
  padding-left: 2em;
  word-spacing: 0.05rem;
}

#articleContent ul li,
#articleContent ol li {
  display: list-item;
  line-height: 1.8rem;
  font-size: 1rem;
}

#articleContent ul li {
  list-style-type: disc;
}

#articleContent ul ul li {
  list-style-type: circle;
}

#articleContent table {
  width: 100%;
  display: block;
  border-collapse: collapse;
  border-spacing: 0;
  overflow: auto;
}

/**
#articleContent table,
th,
td {
  padding: 12px 13px;
  border: 1px solid #dfe2e5;
}
**/

table tr:nth-child(2n),
thead {
  background-color: var(--table-tr-bg-color);
}

#articleContent table th {
  background-color: var(--table-th-bg-color);
  min-width: 80px;
  border: 1px solid var(--text-color);
  padding: 6px 6px;
}

#articleContent table td {
  min-width: 80px;
  border: 1px solid var(--text-color);
  padding: 6px 6px;
}

/* table  */
tbody tr:nth-child(even) {
  background-color: var(--table-tr-bg-color);
}
td:nth-child(1) {
  background-color: var(--table-td-bg-color);
}
#articleContent table th {
  background-color: var(--table-th-bg-color);
  border: 1px solid var(--text-color);
  color: var(--text-color);
}

#articleContent [type="checkbox"]:not(:checked),
[type="checkbox"]:checked {
  position: inherit;
  margin-left: -1.3rem;
  margin-right: 0.4rem;
  margin-top: -1px;
  vertical-align: middle;
  left: unset;
  visibility: visible;
  opacity: 1;
}
.task-list label {
  color: var(--text-color);
  font-size: var(--text-font-size);
}
.task-list li::marker {
  content: "";
}
@media only screen and (min-width: 600px) {
  #article-share .social-share a {
      margin-left: 15px !important;
  }
}
</style>

  


    <link rel="stylesheet preload" as="style" href="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.css">
    <link rel="stylesheet preload" as="style" href="/css/post.css">

















  


    <link rel="stylesheet preload" as="style" href="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.css">
    <link rel="stylesheet preload" as="style" href="/css/post.css">




  
    
    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    


  




  <style>
  /* tag button */
  body.DarkMode .theme-btn {
    background: #222;
    border: 2px solid #555;
    border-radius: 2px;
    color: #ccc !important;
    display: inline-block;
    font-size: 0.875em;
    line-height: 2;
    padding: 0 5px !important;
    text-decoration: unset !important;
    transition: background-color 0.2s ease-in-out;
  }
  body.DarkMode .theme-btn:hover {
    background: #666;
    border-color: #666;
    color: #ccc;
  }
  .theme-btn {
    background: #fff;
    border: 2px solid #222;
    border-radius: 2px;
    color: #555 !important;
    display: inline-block;
    font-size: 0.875em;
    line-height: 2;
    padding: 0 5px !important;
    text-decoration: unset !important;
    transition: background-color 0.2s ease-in-out;
  }
  .theme-btn:hover {
    background: #222;
    border-color: #222;
    color: #fff !important;
  }
  .theme-btn + .theme-btn {
    margin: 0 0 8px 8px;
  }
  .theme-btn .fa-fw {
    text-align: left;
    width: 1.285714285714286em;
  }

</style>

  <style>
  /* tag note */
  .post-container .note {
    border-radius: 0;
    margin-bottom: 20px;
    padding: 1em;
    position: relative;
    border: 1px solid #eee;
    border-left-width: 5px;
  }
  .post-container .note summary {
    cursor: pointer;
    outline: 0;
  }
  .post-container .note summary p {
    display: inline;
  }
  .post-container .note h2, .post-container .note h3, .post-container .note h4, .post-container .note h5, .post-container .note h6 {
    border-bottom: initial;
    margin: 0;
    padding-top: 0;
  }
  .post-container .note p:first-child, .post-container .note ul:first-child, .post-container .note ol:first-child, .post-container .note table:first-child, .post-container .note pre:first-child, .post-container .note blockquote:first-child, .post-container .note img:first-child {
    margin-top: 0;
  }
  .post-container .note p:last-child, .post-container .note ul:last-child, .post-container .note ol:last-child, .post-container .note table:last-child, .post-container .note pre:last-child, .post-container .note blockquote:last-child, .post-container .note img:last-child {
    margin-bottom: 0;
  }
  .post-container .note:not(.no-icon) {
    padding-left: 2.5em;
  }
  .post-container .note:not(.no-icon)::before {
    font-size: 1.5em;
    left: 0.3em;
    position: absolute;
    top: calc(50% - 1em);
  }
  .post-container .note.default {
    border-left-color: #777;
  }
  .post-container .note.default h2, .post-container .note.default h3, .post-container .note.default h4, .post-container .note.default h5, .post-container .note.default h6 {
    color: #777;
  }
  .post-container .note.default:not(.no-icon)::before {
    content:'\f0a9';
    font-family:'Font Awesome 5 Free';
    font-weight: 900;
    color: #777;
  }
  .post-container .note.primary {
    border-left-color: #6f42c1;
  }
  .post-container .note.primary h2, .post-container .note.primary h3, .post-container .note.primary h4, .post-container .note.primary h5, .post-container .note.primary h6 {
    color: #6f42c1;
  }
  .post-container .note.primary:not(.no-icon)::before {
    content:'\f055';
    font-family:'Font Awesome 5 Free';
    font-weight: 900;
    color: #6f42c1;
  }
  .post-container .note.info {
    border-left-color: #428bca;
  }
  .post-container .note.info h2, .post-container .note.info h3, .post-container .note.info h4, .post-container .note.info h5, .post-container .note.info h6 {
    color: #428bca;
  }
  .post-container .note.info:not(.no-icon)::before {
    content:'\f05a';
    font-family:'Font Awesome 5 Free';
    font-weight: 900;
    color: #428bca;
  }
  .post-container .note.success {
    border-left-color: #5cb85c;
  }
  .post-container .note.success h2, .post-container .note.success h3, .post-container .note.success h4, .post-container .note.success h5, .post-container .note.success h6 {
    color: #5cb85c;
  }
  .post-container .note.success:not(.no-icon)::before {
    content:'\f058';
    font-family:'Font Awesome 5 Free';
    font-weight: 900;
    color: #5cb85c;
  }
  .post-container .note.warning {
    border-left-color: #f0ad4e;
  }
  .post-container .note.warning h2, .post-container .note.warning h3, .post-container .note.warning h4, .post-container .note.warning h5, .post-container .note.warning h6 {
    color: #f0ad4e;
  }
  .post-container .note.warning:not(.no-icon)::before {
    content:'\f06a';
    font-family:'Font Awesome 5 Free';
    font-weight: 900;
    color: #f0ad4e;
  }
  .post-container .note.danger {
    border-left-color: #d9534f;
  }
  .post-container .note.danger h2, .post-container .note.danger h3, .post-container .note.danger h4, .post-container .note.danger h5, .post-container .note.danger h6 {
    color: #d9534f;
  }
  .post-container .note.danger:not(.no-icon)::before {
    content:'\f056';
    font-family:'Font Awesome 5 Free';
    font-weight: 900;
    color: #d9534f;
  }
</style>

  <style>
  /* tag tabs */
  .post-container .tabs {
    margin-bottom: 20px;
    height: auto;
  }
  .post-container .tabs,
  .tabs-comment {
    padding-top: 10px;
  }
  .post-container .tabs ul.nav-tabs,
  .tabs-comment ul.nav-tabs {
    background: var(--card-bg-color);
    display: flex !important;
    flex-wrap: wrap;
    justify-content: center;
    margin: 0;
    padding: 0 !important;
    position: -webkit-sticky;
    position: sticky;
    top: 0;
    /* z-index: 5; */
  }
  @media (max-width: 413px) {
  .post-container .tabs ul.nav-tabs,
  .tabs-comment ul.nav-tabs {
    display: block;
    margin-bottom: 5px;
  }
  }
  .post-container .tabs ul.nav-tabs li.tab,
  .tabs-comment ul.nav-tabs li.tab {
    border-bottom: 1px solid var(--text-color);
    border-left: 1px solid transparent;
    border-right: 1px solid transparent;
    border-radius: 0 0 0 0;
    border-top: 3px solid transparent;
    flex-grow: 1;
    list-style-type: none !important;
    transition: all 0.2s ease-out;
  }
  @media (max-width: 413px) {
  .post-container .tabs ul.nav-tabs li.tab,
  .tabs-comment ul.nav-tabs li.tab {
    border-bottom: 1px solid transparent;
    border-left: 3px solid transparent;
    border-right: 1px solid transparent;
    border-top: 1px solid transparent;
  }
  }
  @media (max-width: 413px) {
    .post-container .tabs ul.nav-tabs li.tab,
    .tabs-comment ul.nav-tabs li.tab {
        border-radius: 0;
    }
  }
  .post-container .tabs ul.nav-tabs li.tab a,
  .tabs-comment ul.nav-tabs li.tab a {
    border-bottom: initial;
    display: block;
    line-height: 1.8;
    padding: 0.25em 0.75em;
    text-align: center;
    text-decoration: unset !important;
    transition: all 0.2s ease-out;
  }

  .post-container .tabs {
    background-color: var(--card-bg-color);

  }
  .post-container .tabs ul.nav-tabs li.tab a i,
  .tabs-comment ul.nav-tabs li.tab a i {
    width: 1.285714285714286em;
  }
  .post-container .tabs ul.nav-tabs li.tab.active,
  .tabs-comment ul.nav-tabs li.tab.active {
    border-bottom-color: transparent;
    border-left-color: var(--text-color);
    border-right-color: var(--text-color);
    border-top-color: var(--tab-border-top-color);
  }
  @media (max-width: 413px) {
  .post-container .tabs ul.nav-tabs li.tab.active,
  .tabs-comment ul.nav-tabs li.tab.active {
    border-bottom-color: var(--text-color);
    border-left-color: var(--tab-border-top-color);
    border-right-color: var(--text-color);
    border-top-color: var(--text-color);
  }
  }
  .post-container .tabs ul.nav-tabs li.tab.active a,
  .tabs-comment ul.nav-tabs li.tab.active a {
    cursor: default;
    text-decoration: unset;
  }
  .post-container .tabs .tab-content,
  .tabs-comment .tab-content {
    border: 1px solid var(--text-color);
    border-radius: 0 0 0 0;
    border-top-color: transparent;
    white-space: break-spaces;
  }
  @media (max-width: 413px) {
  .post-container .tabs .tab-content,
  .tabs-comment .tab-content {
    border-radius: 0;
    border-top-color: var(--text-color);
  }
  }
  .post-container .tabs .tab-content .tab-pane,
  .tabs-comment .tab-content .tab-pane {
    padding: 20px 20px 0;
  }
  .post-container .tabs .tab-content .tab-pane:not(.active),
  .tabs-comment .tab-content .tab-pane:not(.active) {
    display: none;
  }
  .tabs-comment {
    margin-top: 4em;
    padding-top: 0;
  }
  .tabs-comment .comments {
    margin-top: 0;
    padding-top: 0;
  }

</style>

  <style>
  .label {
    display: inline;
    border-radius: 3px;
    font-size: 85%;
    margin: 0;
    padding: 0.2em 0.4em;
    color: var(--text-color);
    transition: color 0.2s ease-in-out;
  }
  .label-default {
    background: rgba(187, 187, 187, 0.25);
  }
  .label-primary {
    background: rgba(183, 160, 224, 0.25);
  }
  .label-info {
    background: rgba(160, 197, 228, 0.25);
  }
  .label-success {
    background: rgba(174, 220, 174, 0.25);
  }
  .label-warning {
    background: rgba(248, 214, 166, 0.25);
  }
  .label-danger {
    background: rgba(236, 169, 167, 0.25);
  }
</style>

  <style>
  .group-image-container {
    margin: 1.5rem auto;
  }
  .group-image-container img {
    margin: 0 auto;
    border-radius: 3px;
    background-color: transparent;
    box-shadow: 0 3px 9px 0 rgba(0, 0, 0, 0.15), 0 3px 9px 0 rgba(0, 0, 0, 0.15);
  }
  .group-image-row {
    margin-bottom: 0.5rem;
    display: flex;
    justify-content: center;
  }
  .group-image-wrap {
    flex: 1;
    display: flex;
    justify-content: center;
  }
  .group-image-wrap:not(:last-child) {
      margin-right: 0.25rem;
  }
</style>





  
    <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
    
      <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
    
  
  

    

    
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/waline.min.css" media="none" onload="if(media!='all')media='all'">
        <link rel="stylesheet" type="text/css" href="/css/waline.css" media="none" onload="if(media!='all')media='all'">
    

    






  <style>
  /* hexo-admonition */
  .admonition, 
  .admonition.note,
  .admonition.info,
  .admonition.attention,
  .admonition.error{
    margin:1.5625em 0;
    padding:.6rem !important;
    overflow:hidden;
    font-size:.64rem;
    page-break-inside:avoid;
    border-left:.3rem solid #42b983;
    border-radius:.3rem;
    box-shadow:0 .1rem .4rem rgba(0, 0, 0, .05), 0 0 .05rem rgba(0, 0, 0, .1);
    background-color: var(--toc-activ-bg-color);
  }
  p.admonition-title {
    position:relative;
    margin:-.6rem -.6rem .8em -.6rem!important;
    padding:.4rem .6rem .4rem 2.5rem;
    font-weight:700;
    background-color:rgba(66, 185, 131, .1)
  }
  .admonition-title::before {
    position:absolute;
    top:.9rem;
    left:1rem;
    width:12px;
    height:12px;
    background-color:#42b983;
    border-radius:50%;
    content:' '
  }
  .info>.admonition-title, .todo>.admonition-title {
    background-color:rgba(0, 184, 212, .1)
  }
  .attention>.admonition-title, .caution>.admonition-title, .warning>.admonition-title {
    background-color:rgba(255, 145, 0, .1)
  }
  .error>.admonition-title, .fail>.admonition-title, .failure>.admonition-title, .missing>.admonition-title {
    background-color:rgba(255, 82, 82, .1)
  }
  .admonition.info, .admonition.todo {
    border-color:#00b8d4
  }
  .admonition.attention, .admonition.caution, .admonition.warning {
    border-color:#ff9100
  }
  .admonition.error, .admonition.fail, .admonition.failure, .admonition.missing {
    border-color:#ff5252
  }
  .info>.admonition-title::before, .todo>.admonition-title::before {
    background-color:#00b8d4;
    border-radius:50%
  }
  .attention>.admonition-title::before, .caution>.admonition-title::before, .warning>.admonition-title::before {
    background-color:#ff9100;
    border-radius:50%
  }
  .error>.admonition-title::before, .fail>.admonition-title::before, .failure>.admonition-title::before, .missing>.admonition-title::before {
    background-color:#ff5252;
    border-radius:50%
  }
  .admonition>:last-child {
    margin-bottom:0!important
  }
  .admonition code[class*=language-], .admonition pre[class*=language-] {
    background: var(--toc-activ-bg-color)!important;
  }
</style>

  <style>
.bvideo a:link{
  text-decoration:none!important;;
}
.bvideo-box {
  width: 80%;
  height: 96px;
  margin: 0 auto;
  font-weight: 400;
  box-sizing: border-box;
  background: #f4f4f5;
  border: 0.0625rem solid #d1d1d1;
  border-radius: 6px;
  background-color: #fcfcfc;
  display: flex;
  user-select:none;
  cursor:pointer;
  overflow: hidden;
  /* background-color: hsla(240,5%,96%,.3); */
}

.bvideo-cover {
  display: inline-block;
  width: 150px;
  height: 94px;
  min-width: 150px;
  min-height: 94px;
  border-bottom-left-radius: 6px;
  border-top-left-radius: 6px;
  overflow: hidden;
  position: relative;
}

.bvideo-cover .video-cover-img {
  height: 100%;
  width: 100%;
  top: 0;
  left: 0;
  position: absolute;
  display: inline-block;
  background-size: cover;
  background-position: 50%;
}

.bvideo-cover .duration {
  position: absolute;
  right: 3px;
  bottom: 0px;
  padding: 0px;
  color: #fff;
  font-size: 12px;
  border-radius: 2px;
}

.bvideo-cover .bvideo-cover-layer {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-position: 50%;
  background-size: cover;
  background-repeat: no-repeat;
}
.bvideo-info {
  margin-left: 1rem;
  padding-top: 10px;
  min-height: 84px;
  position: relative;
  text-align: left;
}

.bvideo-info .title {
  max-height: 40px;
  min-height:19px;
  color: #222;
  line-height: 1.4;
  font-size: 14px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 25rem;
  margin: 0;
}
.bvideo-info .up-name {
  height: 19px;
  margin-top: 1px;
  margin-left: 2px;
  display: inline-block;
  vertical-align: middle;
  font-size: 12px;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  max-width: 150px
}
.bvideo-info .card-status {
  line-height: 13px;
  font-size: 12px;
  color: #999;
  margin: 0;
  /* position: absolute; */
  bottom: 30px;
}

.bvideo-info .play-num {
  margin-right: 13px;
}

.bvideo-info .partition {
  font-size: 12px;
  line-height: 13px;
  color: #999;
  position: absolute;
  bottom: -1px;
  padding-left: 35px;
  top: 78px;
}

.icon-video {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA2CAMAAACsuQomAAAAclBMVEX///8AAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+As+VLAAAAJnRSTlOzAK8+F4OppBAmnTKsllOOb2dhOS0JBJqAWk0aB19FHgJ8dUAgC8ZU4VsAAAGPSURBVEjHpdbrcqowGIXhtbIxnEGOCmKt2n3/t1hSO6Y2qYwf779M5plkCJkJ+Fih85i+4lwX/NUvHAHQLd3SDED0HHcagGoc2ygA4eRidwV15WNvytmRDzPWmBv5sxFzYcxFzI8QcwVtw5c9kcuYhwRz9X1cYS4J+Cfu4+bfvUJhbvs9umBOFXY6PT3gqNJ4pWSY7rhx6DL/+MZXhdfTRoOnDJJ2ncEbyBpIxBCmJ+IIaSlRivGRCOGpbMdkEV8IBU8t2R3VAt4T3gLOBefnePMMk2m+ArMvtByT0VaAbXEpwLa3cAXm/0rJMXnaCLCtSVZgRvkKzOOalXcCbM9LiuMSEGLzjwqxuR1SnO4AIT7sASHuagUpNscjw+7xuDiDp9Q9HrczkcBTfq01ltoSe0gbiVGMD0SUCe2GBGshbg2ecpGtaDCDncBe+htmdH6VquHdPuLabZ4pdZ/yZSfDcgjc52MDk36nrz6DKeVXLu6S25fwV90eUA62l1eFdU9/Ux2q/YEOtjlbfjoLrugTV6YSSQ5kbxYAAAAASUVORK5CYII=);
  position: absolute;
  background-size: 100% 100%;
  display: inline-block;
  top: 50%;
  left: 50%;
  margin-left: -15px;
  margin-top: -13px;
  height: 26px;
}

.card-label {
  display: inline-block;
  font-weight:550;
  width: 25px;
  height: 13px;
  border:1.5px solid #ffc3d4;
  color:#ffc3d4;
  background-size: 100% 100%;
  position: absolute;
  top: -1px;
  left: 0;
  padding-left:1px;
}
.bvideo-cover .cover-default {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-size: 44px;
  background-color: #f0f1f4;
  background-position: 50%;
  background-repeat: no-repeat;
}
@media (max-width: 768px) {
  .bvideo-cover {
      display: none;
  }
  .partition{
      display:none;
  }

  .bvideo-info .title {
      max-height: 40px;
      min-height:19px;
      color: #222;
      line-height: 1.4;
      font-size: 14px;
      text-overflow: clip;
      overflow: hidden;
      white-space:normal;
      margin: 0;
  }
}

</style>

  <style>
  .douban-card-block {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    max-height: 400px;
}

.douban-card {
    display: flex;
    margin: 30px 10px;
    padding: 15px;
    border-radius: 15px;
    position: relative;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    color: antiquewhite;
    text-decoration: none;
}

.douban-card:hover {
    text-decoration: none;
}

.douban-card-bgimg {
    position: absolute;
    width: 115%;
    height: 115%;
    filter: blur(15px) brightness(0.6);
    background-size: 100%;
    background-position: center;
    background-repeat: no-repeat;
}

.douban-card-img {
    position: relative;
    height: 130px;
    width: 80px;
    background-size: 100%;
    background-position: center;
    background-repeat: no-repeat;
}

.douban-card-left:hover .douban-card-img {
    filter: blur(5px) brightness(0.6);
    transform: perspective(800px) rotateX(180deg);
}

.douban-card-left .douban-card-img {
    transition: all 500ms ease;
}

.douban-card-left {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.douban-card-left .douban-card-status {
    height: 130px;
    width: 80px;
    text-align: center;
    font-weight: bold;
    position: absolute;
    left: 0;
    top: 30%;
    transform: rotateX(180deg);
    backface-visibility: hidden;
    transition: all 500ms ease;
}

.douban-card-left:hover .douban-card-status {
    transform: perspective(800px) rotateX(0deg);
}

.douban-card-right {
    position: relative;
    display: flex;
    flex-direction: column;
    margin-left: 12px;
    font-size: 16px;
    font-family: "Courier New", Courier, monospace;
    line-height: 1.3;
    color: antiquewhite;
}

.douban-card-item {
    margin-top: 4px;
}

</style>



<style>
  .github-emoji {
    height:2em;
    width:2em;
    display:inline-block!important;
    position:relative;
    margin:0 3px!important;
    padding:0
}
.github-emoji:hover {
    animation:emoji-face 5s infinite ease-in-out
}
@keyframes emoji-face {
    2% {
        transform:translate(0, 1.5px) rotate(1.5deg)
    }
    4% {
        transform:translate(0, -1.5px) rotate(-.5deg)
    }
    6% {
        transform:translate(0, 1.5px) rotate(-1.5deg)
    }
    8% {
        transform:translate(0, -1.5px) rotate(-1.5deg)
    }
    10% {
        transform:translate(0, 2.5px) rotate(1.5deg)
    }
    12% {
        transform:translate(0, -.5px) rotate(1.5deg)
    }
    14% {
        transform:translate(0, -1.5px) rotate(1.5deg)
    }
    16% {
        transform:translate(0, -.5px) rotate(-1.5deg)
    }
    18% {
        transform:translate(0, .5px) rotate(-1.5deg)
    }
    20% {
        transform:translate(0, -1.5px) rotate(2.5deg)
    }
    22% {
        transform:translate(0, .5px) rotate(-1.5deg)
    }
    24% {
        transform:translate(0, 1.5px) rotate(1.5deg)
    }
    26% {
        transform:translate(0, .5px) rotate(.5deg)
    }
    28% {
        transform:translate(0, .5px) rotate(1.5deg)
    }
}
</style>

<style>
.vkr-url-wrapper {
    padding: 10px;
    border-radius: 5px;
    border: 1px solid;
    border-color: var(--text-color) var(--text-color) var(--text-color);
    box-shadow: rgba(0,0,0,.14) 0 1px 3px;
    margin-bottom: 10px;
    display: flex;
}
.vkr-url-wrapper .desc-wrapper > hr {
    margin: 10px 0;
    height: 1px;
}
.vkr-url-wrapper .avatar {
    width: 150px !important;
    height: 150px !important;
    border: solid 1px var(--text-color);
    box-shadow: none !important;
    margin: 0;
    margin-right: 10px;
}
.vkr-url-wrapper h2 {
    border: none;
    margin: 0;
    padding: 0;
}
.vkr-url-wrapper .desc-wrapper {
    flex: 1;
}
.vkr-url-wrapper .desc-wrapper a {
    font-size: 22px;
    font-weight: 700;
}
</style>







  <style>

/* 光标闪烁 */
.typed-cursor.typed-cursor--blink{
  -webkit-animation: 1s van-cursor-flicker infinite;
  animation: 1s van-cursor-flicker infinite;
}
/* 呼吸效果 */
#prev-cover i,
#next-cover i,
.paging i,
#recommend-sections .post-card .post-body i,
.index-cover .container .cover-btns i,
#articles .article .card-image i {
  -webkit-animation: 1.5s breathe-flicker infinite;
  animation: 1.5s breathe-flicker infinite;
}

@keyframes van-cursor-flicker {
  from {
      opacity: 0;
  }

  50% {
      opacity: 1;
  }

  100% {
      opacity: 0;
  }
}

@keyframes breathe-flicker {
  from {
      opacity: 0.3;
  }

  50% {
      opacity: 1;
  }

  100% {
      opacity: 0.3;
  }
}

@media only screen and (max-width: 1024px) {
  /* 分辨率小于1024时不显示 */
  /* 光标闪烁 */
  .typed-cursor.typed-cursor--blink{
      -webkit-animation: none;
      animation: none;
  }
  /* 呼吸效果 */
  #prev-cover i,
  #next-cover i,
  .paging i,
  #recommend-sections .post-card .post-body i,
  .index-cover .container .cover-btns i,
  #articles .article .card-image i {
      -webkit-animation: none;
      animation: none;
  }

}
</style>



<style>
/* 滚动条 */
::-webkit-scrollbar-thumb {
  background-color: var(--scrollbar-color);;
  background-image:-webkit-linear-gradient(45deg, rgba(255, 255, 255, .4) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .4) 50%, rgba(255, 255, 255, .4) 75%, transparent 75%, transparent);
  border-radius: 6px;
}
::-webkit-scrollbar-corner,
::-webkit-scrollbar-track {
  background-color: var(--card-bg-color);
  border-radius:3em
}
::-webkit-scrollbar-thumb:hover {
  background-color: var(--scrollbar-hover-color);
}
::-webkit-scrollbar {
  width:  8px;
  height: 8px
}
</style>






    <link rel="stylesheet preload" as="style" type="text/css" href="/libs/live2d/waifu.css">
    <!-- <link rel="preload" href="/libs/live2d/live2d.js" as="script"> -->
    <!-- <link rel="preload" href="/libs/live2d/waifu-tips.js" as="script"> -->


<!-- <link  rel="stylesheet" href="/css/main.css" /> -->



<!-- js script -->
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@materializecss/materialize@1.2.1/dist/js/materialize.min.js" as="script">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" as="script">

<link rel="preload" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.min.js" as="script">
<link rel="preload" href="/js/matery.js" as="script">

<link rel="preload" href="/js/events.js" as="script">
<link rel="preload" href="/js/plugins.js" as="script">

<link rel="preload" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery-all.min.js" as="script">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery-ui@1.13.2/dist/jquery-ui.min.js" as="script">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/scrollprogress@3.0.2/dist/scrollProgress.min.js" as="script">

  <link rel="preload" href="/js/tw_cn.js" as="script">

<link rel="preload" href="/js/img-lazyload.js" as="script" importance="low">
<link rel="preload" href="/js/boot.js" as="script" importance="low">




  <link rel="preload" href="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" as="script">
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/hexo-tag-common-new@latest/js/index.js" as="script">



  <!-- <link rel="prefetch"  as="script" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"> -->



  <link rel="preload" href="https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/pageview.min.mjs" as="script">




  <link rel="preload" href="https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/comment.min.mjs" as="script">




  <link rel="preload" href="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.min.js" as="script">



  
    
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js" as="script">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" as="script">
    

    
    <link rel="stylesheet preload" as="style" type="text/css" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.css">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.js" as="script">
    

    

    
    <link rel="stylesheet preload" as="style" type="text/css" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autolinker/prism-autolinker.min.css">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autolinker/prism-autolinker.min.js" as="script">
    

    

    



    <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
    <script id="matery-configs">
    var Matery = window.Matery || {};
    Matery.ctx = Object.assign({}, Matery.ctx)
    var CONFIG = {"hostname":"blog.17lai.site","root":"/","version":"2.0.0","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":false,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"show_full":true,"show_expand":true,"shrink":true,"break":false,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/medias_webp/loading2.svg","loading_img_dark":"/medias_webp/loading2-dark.svg","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":false,"baidu":{"enable":true,"id":"22cc5bdea6e529c1349d44b7306b3b8c"},"google":{"enable":false,"id":"G-JNYZP4ZLDJ"},"gtag":{"enable":true,"id":"G-JNYZP4ZLDJ"},"tencent":{"enable":false,"sid":null,"cid":null},"woyaola":{"enable":false,"id":null},"cnzz":{"enable":false,"id":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Matery.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
    <script  src="/js/utils.js" ></script>
    <script  src="/js/color-schema.js" ></script>
    

  
    <!-- Baidu Analytics -->
    <script async>
      if (!Matery.ctx.dnt) {
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?22cc5bdea6e529c1349d44b7306b3b8c";
          //hm.setAttribute('async', '');
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      }
    </script>
  

  

  
    <!-- Google gtag.js -->
    <script async>
      if (!Matery.ctx.dnt) {
        Matery.utils.createAsyncScript('https://www.googletagmanager.com/gtag/js?id=G-JNYZP4ZLDJ', false, function() {
        //Matery.utils.createScript('/js/gt.min.js?id=G-JNYZP4ZLDJ', function() {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-JNYZP4ZLDJ');
        });
      }
    </script>
  

  

  

  

  


    
    
    

    
    
      

    
    <!-- import_css 插入css -->
    
    
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.css" />
      
    
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autolinker/prism-autolinker.min.css" />
      
    
    

    
    <script async>
        //passive mode test
        //https://github.com/Modernizr/Modernizr/issues/1894
        var supportsPassive = false;
        try {
            var opts = Object.defineProperty({}, "passive", {
                get: function () {
                supportsPassive = true;
                },
            });
            window.addEventListener("testpassive", null, opts);
            window.removeEventListener("testpassive", null, opts);
        } catch (e) {}
    </script>
    
<meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>




<body class="lazy-background" bg-lazy >
<!-- <body class="lazy-background" > -->
    

    <header class="navbar-fixed">
      <!-- <header class="navbar-fixed"> -->
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                            <img no-lazy src="/favicon.webp" 
                                            style="width: 40px; height:45px" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">夜法之书</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse" aria-label="侧边菜单"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item menu-2d-home">
    
    <a href="/" class="nav-link">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      首页
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item menu-2d-nav">
    
    <a target="_blank" rel="noopener" href="https://nav.17lai.site/" class="nav-link">
      
      <i class="fas fa-suitcase" style="zoom: 0.6;"></i>
      
      导航
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item menu-2d-sosuo">
    
    <a target="_blank" rel="noopener" href="https://so.17lai.site/" class="nav-link">
      
      <i class="fas fa-mask" style="zoom: 0.6;"></i>
      
      SO
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item menu-2d-media">
    
      
        <a href="#" class="nav-link">
      

      
      <i class="fas fa-music" style="zoom: 0.6;"></i>
      
      多媒体
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li class="menu-2d-musics" >
        <a class="nav-link" href="/musics/">
          
          <i class="fas fa-music" style="margin-top: -20px; zoom: 0.6;"></i>
          
          音乐
        </a>
      </li>
      
      <li class="menu-2d-galleries" >
        <a class="nav-link" href="/galleries/">
          
          <i class="fas fa-image" style="margin-top: -20px; zoom: 0.6;"></i>
          
          相册
        </a>
      </li>
      
      <li class="menu-2d-movies" >
        <a class="nav-link" href="/movies/">
          
          <i class="fas fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          视频
        </a>
      </li>
      
      <li class="menu-2d-musicplayer" >
        <a class="nav-link" target="_blank" rel="noopener" href="https://musicplayer.17lai.site/">
          
          <i class="fas fa-music" style="margin-top: -20px; zoom: 0.6;"></i>
          
          在线云音乐
        </a>
      </li>
      
      <li class="menu-2d-music" >
        <a class="nav-link" target="_blank" rel="noopener" href="https://music.17lai.site/">
          
          <i class="fas fa-music" style="margin-top: -20px; zoom: 0.6;"></i>
          
          音乐播放器
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item menu-2d-posts">
    
      
        <a href="#" class="nav-link">
      

      
      <i class="fas fa-folder-plus" style="zoom: 0.6;"></i>
      
      文章
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li class="menu-2d-tags" >
        <a class="nav-link" href="/tags/">
          
          <i class="fas fa-tags" style="margin-top: -20px; zoom: 0.6;"></i>
          
          标签
        </a>
      </li>
      
      <li class="menu-2d-categories" >
        <a class="nav-link" href="/categories/">
          
          <i class="fas fa-bookmark" style="margin-top: -20px; zoom: 0.6;"></i>
          
          分类
        </a>
      </li>
      
      <li class="menu-2d-archives" >
        <a class="nav-link" href="/archives/">
          
          <i class="fas fa-archive" style="margin-top: -20px; zoom: 0.6;"></i>
          
          归档
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item menu-2d-friends">
    
    <a href="/friends/" class="nav-link">
      
      <i class="fas fa-link" style="zoom: 0.6;"></i>
      
      友链
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item menu-2d-toolbox">
    
      
        <a href="#" class="nav-link">
      

      
      <i class="fas fa-toolbox" style="zoom: 0.6;"></i>
      
      工具
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li class="menu-2d-tg" >
        <a class="nav-link" target="_blank" rel="noopener" href="https://t.me/chat_17laisite">
          
          <i class="fab fa-telegram-plane" style="margin-top: -20px; zoom: 0.6;"></i>
          
          TG交流群
        </a>
      </li>
      
      <li class="menu-2d-tg-sub" >
        <a class="nav-link" target="_blank" rel="noopener" href="https://t.me/sub_17laisite">
          
          <i class="fab fa-telegram-plane" style="margin-top: -20px; zoom: 0.6;"></i>
          
          TG订阅群
        </a>
      </li>
      
      <li class="menu-2d-linuxtool" >
        <a class="nav-link" target="_blank" rel="noopener" href="https://linux-command.17lai.site/">
          
          <i class="fas fa-terminal" style="margin-top: -20px; zoom: 0.6;"></i>
          
          Linux命令
        </a>
      </li>
      
      <li class="menu-2d-cheatsheets" >
        <a class="nav-link" href="/dash/">
          
          <i class="fas fa-laptop-code" style="margin-top: -20px; zoom: 0.6;"></i>
          
          各种快查表
        </a>
      </li>
      
      <li class="menu-2d-onebox" >
        <a class="nav-link" target="_blank" rel="noopener" href="https://onebox.17lai.site/">
          
          <i class="fas fa-cloud" style="margin-top: -20px; zoom: 0.6;"></i>
          
          私人网盘
        </a>
      </li>
      
      <li class="menu-2d-staticnav" >
        <a class="nav-link" href="/nav/">
          
          <i class="fas fa-tools" style="margin-top: -20px; zoom: 0.6;"></i>
          
          网址导航
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item menu-2d-about">
    
      
        <a href="#" class="nav-link">
      

      
      <i class="fas fa-id-badge" style="zoom: 0.6;"></i>
      
      关于
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li class="site-author menu-2d-aboutme" >
        <a class="nav-link" href="/about/">
          
          <i class="fas fa-user-circle" style="margin-top: -20px; zoom: 0.6;"></i>
          
          关于我
        </a>
      </li>
      
      <li class="menu-2d-abouttech" >
        <a class="nav-link" href="/myTeck/">
          
          <i class="fas fa-address-card" style="margin-top: -20px; zoom: 0.6;"></i>
          
          我的技术
        </a>
      </li>
      
      <li class="menu-2d-aboutporj" >
        <a class="nav-link" href="/myProject/">
          
          <i class="fas fa-laptop-code" style="margin-top: -20px; zoom: 0.6;"></i>
          
          我的项目
        </a>
      </li>
      
      <li class="menu-2d-aboutpost" >
        <a class="nav-link" href="/myPost/">
          
          <i class="fas fa-pen-nib" style="margin-top: -20px; zoom: 0.6;"></i>
          
          我的文章
        </a>
      </li>
      
      <li class="menu-2d-aboutneed" >
        <a class="nav-link" href="/needtoread/">
          
          <i class="fas fa-exclamation-circle" style="margin-top: -20px; zoom: 0.6;"></i>
          
          博客须知
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="nav-item menu-2d-search" >
    <a href="#searchModal" class="nav-link modal-trigger" onclick="startXMLSearch()" >
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  
    <li class="nav-item menu-2d-dark" id="color-toggle-btn">
      <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;
        <i class="fas fa-sun" id="color-toggle-icon" style="zoom: 0.85;"></i>&nbsp;
      </a>
    </li>
  
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
      <div>
        
          
            <img src="/favicon.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload 
              style="width: 45px; height:45px" class="logo-img circle responsive-img" alt="LOGO">
          
        
        <div class="logo-name">夜法之书</div>
        <div class="logo-desc">
            
            ~软件驱动世界~个人独立技术博客，关于Linux,开源，Nas，Docker，嵌入式，理财，健身等主题！
            
        </div>
      </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a target="_blank" rel="noopener" href="https://nav.17lai.site/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-suitcase"></i>
			
			导航
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a target="_blank" rel="noopener" href="https://so.17lai.site/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-mask"></i>
			
			SO
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-music"></i>
			
			多媒体
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/musics/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-music" style="position: absolute;left:50px" ></i>
			      
		          <span>音乐</span>
                  </a>
                </li>
              
                <li>

                  <a href="/galleries/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-image" style="position: absolute;left:50px" ></i>
			      
		          <span>相册</span>
                  </a>
                </li>
              
                <li>

                  <a href="/movies/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-film" style="position: absolute;left:50px" ></i>
			      
		          <span>视频</span>
                  </a>
                </li>
              
                <li>

                  <a target="_blank" rel="noopener" href="https://musicplayer.17lai.site/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-music" style="position: absolute;left:50px" ></i>
			      
		          <span>在线云音乐</span>
                  </a>
                </li>
              
                <li>

                  <a target="_blank" rel="noopener" href="https://music.17lai.site/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-music" style="position: absolute;left:50px" ></i>
			      
		          <span>音乐播放器</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-folder-plus"></i>
			
			文章
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/tags/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-tags" style="position: absolute;left:50px" ></i>
			      
		          <span>标签</span>
                  </a>
                </li>
              
                <li>

                  <a href="/categories/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-bookmark" style="position: absolute;left:50px" ></i>
			      
		          <span>分类</span>
                  </a>
                </li>
              
                <li>

                  <a href="/archives/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-archive" style="position: absolute;left:50px" ></i>
			      
		          <span>归档</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-link"></i>
			
			友链
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-toolbox"></i>
			
			工具
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a target="_blank" rel="noopener" href="https://t.me/chat_17laisite " style="margin-left:75px">
				  
				   <i class="fa fab fa-telegram-plane" style="position: absolute;left:50px" ></i>
			      
		          <span>TG交流群</span>
                  </a>
                </li>
              
                <li>

                  <a target="_blank" rel="noopener" href="https://t.me/sub_17laisite " style="margin-left:75px">
				  
				   <i class="fa fab fa-telegram-plane" style="position: absolute;left:50px" ></i>
			      
		          <span>TG订阅群</span>
                  </a>
                </li>
              
                <li>

                  <a target="_blank" rel="noopener" href="https://linux-command.17lai.site/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-terminal" style="position: absolute;left:50px" ></i>
			      
		          <span>Linux命令</span>
                  </a>
                </li>
              
                <li>

                  <a href="/dash/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-laptop-code" style="position: absolute;left:50px" ></i>
			      
		          <span>各种快查表</span>
                  </a>
                </li>
              
                <li>

                  <a target="_blank" rel="noopener" href="https://onebox.17lai.site/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-cloud" style="position: absolute;left:50px" ></i>
			      
		          <span>私人网盘</span>
                  </a>
                </li>
              
                <li>

                  <a href="/nav/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-tools" style="position: absolute;left:50px" ></i>
			      
		          <span>网址导航</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-id-badge"></i>
			
			关于
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/about/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-user-circle" style="position: absolute;left:50px" ></i>
			      
		          <span>关于我</span>
                  </a>
                </li>
              
                <li>

                  <a href="/myTeck/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-address-card" style="position: absolute;left:50px" ></i>
			      
		          <span>我的技术</span>
                  </a>
                </li>
              
                <li>

                  <a href="/myProject/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-laptop-code" style="position: absolute;left:50px" ></i>
			      
		          <span>我的项目</span>
                  </a>
                </li>
              
                <li>

                  <a href="/myPost/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-pen-nib" style="position: absolute;left:50px" ></i>
			      
		          <span>我的文章</span>
                  </a>
                </li>
              
                <li>

                  <a href="/needtoread/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-exclamation-circle" style="position: absolute;left:50px" ></i>
			      
		          <span>博客须知</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>
<!-- </header> -->

    </header>

    





<script>
pagePath = window.location.pathname;
</script>


<div id="banner" class="bg-cover pd-header post-cover" style="background-image: url('/medias_webp/cover/hexo.webp')">

    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand center">

                    
                        <!-- <h1 class="description center-align post-title">基于Hexo的matery主题搭建博客增强部署篇4</h1> -->
                        <h1 class="description center-align post-title">
                            基于Hexo的matery主题搭建博客增强部署篇4
                            <span class="typed-cursor h2 typed-cursor--blink" aria-hidden="true">
                                _
                            </span>
                        </h1>
                    

                    <div class="center-align">
                      
                      
                        <div id="waline_container_page_pv" class=""  style="display: inline" >
                            <i class="far fa-eye fa-fw"></i>查阅:&nbsp;&nbsp;
                            <span class="waline-pageview-count" data-path="" ></span>&nbsp;&nbsp;
                        </div>
                      

                      
                        <div id="waline_container_comment_count" class="" style="display: inline" >
                            <i class="far fa-comment fa-fw"></i>评论:&nbsp;&nbsp;
                            <span class="waline-comment-count" data-path="" ></span>条
                        </div>
                      
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>






<main class="post-container content">

    
    

<div class="row">
    
    <div id="main-content" class="col s12 m12 l9">
    
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/hexo/">
                                <span class="chip bg-color">hexo</span>
                            </a>
                        
                            <a href="/tags/github/">
                                <span class="chip bg-color">github</span>
                            </a>
                        
                            <a href="/tags/matery/">
                                <span class="chip bg-color">matery</span>
                            </a>
                        
                            <a href="/tags/cdn/">
                                <span class="chip bg-color">cdn</span>
                            </a>
                        
                            <a href="/tags/seo/">
                                <span class="chip bg-color">seo</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/hexo/" class="post-category">
                                hexo
                            </a>
                            <link rel="alternate dns-prefetch" type="application/atom+xml"
                                    title="分类订阅--hexo"
                                    href="https://blog.17lai.site/categories/hexo/atom.xml" />
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                

                
                <div class="post-date info-break-policy">
                    <!-- <i class="far fa-calendar-minus fa-fw"></i>发布:&nbsp;&nbsp; -->
                    <!-- 2022-03-27 -->

                    <i class="far fa-calendar-minus fa-fw"></i>
                    <span>发布:&nbsp;&nbsp;</span><time datetime="2022-03-27 15:27" pubdate>
                        2022年3月27日 下午
                    </time>
                </div>
                

                
                <div class="post-date info-break-policy">
                    <!-- <i class="far fa-calendar-check fa-fw"></i>更新:&nbsp;&nbsp; -->
                    <!-- 2023-02-02 -->
                    <i class="far fa-calendar-check fa-fw"></i>
                    <span>更新:&nbsp;&nbsp;</span><time datetime="2023-02-02 22:32" update>
                        2023年2月2日 晚上
                    </time>
                </div>
                

                
                    <div class="info-break-policy">
                        <i class="far fa-file-word fa-fw"></i>字数:&nbsp;&nbsp;
                        6.9k
                    </div>
                

                
                    <div class="info-break-policy">
                        <i class="far fa-clock fa-fw"></i>阅时:&nbsp;&nbsp;
                        28 分
                    </div>
                

                <div id="read_mode" class="info-break-policy" style="display: inline">
                    <i class="fas fa-expand"  title="【进入/离开】阅读模式" aria-hidden="true"></i>&nbsp;&nbsp;<span title="【进入/离开】阅读模式" aria-hidden="true">阅读模式</span>
                </div>
            </div>

        </div>
        <hr class="clearfix">

        <div class="card-content article-card-content markdown-body">
            <div id="articleContent">
                <h2 id="各种部署方式">各种部署方式</h2>
<blockquote>
<p>静态博客的部署方式多种多样，免费部署资源非常多。</p>
<p>如果DNS支持多线路，还可以设置多路负载均衡！</p>
<p>注意：这些免费的部署都没法做ICP备案，或者国内CDN套着备案。不过，都免费了，你还要求那么多？</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">部署方式</th>
<th style="text-align:center">费用</th>
<th style="text-align:center">限制</th>
<th style="text-align:center">难易度</th>
<th style="text-align:center">多域名</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Github</td>
<td style="text-align:center">0 $</td>
<td style="text-align:center">100G/M</td>
<td style="text-align:center">简单</td>
<td style="text-align:center">单域名</td>
</tr>
<tr>
<td style="text-align:center">VPS</td>
<td style="text-align:center">约2~5$/M</td>
<td style="text-align:center">看购买套餐</td>
<td style="text-align:center">复杂</td>
<td style="text-align:center">支持</td>
</tr>
<tr>
<td style="text-align:center">Vercel</td>
<td style="text-align:center">0 $</td>
<td style="text-align:center">100G/M</td>
<td style="text-align:center">简单</td>
<td style="text-align:center">支持</td>
</tr>
<tr>
<td style="text-align:center">Netlify</td>
<td style="text-align:center">0 $</td>
<td style="text-align:center">100G/M</td>
<td style="text-align:center">简单</td>
<td style="text-align:center">支持</td>
</tr>
<tr>
<td style="text-align:center">Cloudflare pages</td>
<td style="text-align:center">0 $</td>
<td style="text-align:center">无</td>
<td style="text-align:center">简单</td>
<td style="text-align:center">支持</td>
</tr>
<tr>
<td style="text-align:center">Gitlab</td>
<td style="text-align:center">0 $</td>
<td style="text-align:center">无</td>
<td style="text-align:center">简单</td>
<td style="text-align:center">支持（？）</td>
</tr>
</tbody>
</table>
<p>更<a target="_blank" rel="noopener" href="https://jace.pro/post/2020-12-17-cloudflare-pages-netlify-zeit-github-pages-and-gitlab-pages-where-to-host/">详细对比</a></p>
<table>
<thead>
<tr>
<th>特性</th>
<th>GitHub</th>
<th>GitLab</th>
<th>Netlify</th>
<th>Vercel</th>
<th>CloudFlare</th>
<th>Firebase</th>
<th>Render</th>
</tr>
</thead>
<tbody>
<tr>
<td>Build Limit</td>
<td><a target="_blank" rel="noopener" href="https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/about-github-pages#usage-limits">10/hour</a></td>
<td>None</td>
<td><a target="_blank" rel="noopener" href="https://www.netlify.com/tos#">3/Minute</a></td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/docs/platform/limits#builds-per-hour-(free)">32/hour</a></td>
<td><a target="_blank" rel="noopener" href="https://developers.cloudflare.com/pages/platform/limits#builds">500/month</a></td>
<td>Not Applicable</td>
<td>Unlisted</td>
</tr>
<tr>
<td>Build Time to Error</td>
<td><a target="_blank" rel="noopener" href="https://github.community/t/page-build-timed-out/10476/7">10 minutes</a></td>
<td><a target="_blank" rel="noopener" href="https://docs.gitlab.com/ee/user/gitlab_com/index.html#shared-runners">3 Hours</a></td>
<td><a target="_blank" rel="noopener" href="https://answers.netlify.com/t/support-guide-how-long-should-netlify-builds-take/151/7">15 minutes</a></td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/docs/build-step#maximum-build-duration">30 minutes</a></td>
<td>Unlisted</td>
<td>Not Applicable</td>
<td><a target="_blank" rel="noopener" href="https://community.render.com/t/is-there-a-limit-for-how-long-a-build-is-allowed-to-take/175/3">120 minutes</a></td>
</tr>
<tr>
<td>Build Time per Month</td>
<td>NA</td>
<td><a target="_blank" rel="noopener" href="https://about.gitlab.com/releases/2020/09/01/ci-minutes-update-free-users/">400 Minutes</a></td>
<td><a target="_blank" rel="noopener" href="https://www.netlify.com/pricing/#features">300 Minutes</a></td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/docs/platform/fair-use-policy">6000 Minutes</a></td>
<td>Unlisted</td>
<td>Not Applicable</td>
<td>Unlisted</td>
</tr>
<tr>
<td>Concurrent Builds</td>
<td>🤷‍♂️</td>
<td><a target="_blank" rel="noopener" href="https://docs.gitlab.com/ee/ci/pipelines/">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://www.netlify.com/pricing/#features">One</a></td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/knowledge/why-are-my-vercel-builds-queued">One</a></td>
<td><a target="_blank" rel="noopener" href="https://pages.cloudflare.com/#plans">One</a></td>
<td>Not Applicable</td>
<td>Unlisted</td>
</tr>
<tr>
<td>Deploy Limits</td>
<td>NA</td>
<td>No</td>
<td>Not Applicable</td>
<td>100/Day</td>
<td><a target="_blank" rel="noopener" href="https://twitter.com/jacebenson/status/1339791209942949889">Unlisted</a></td>
<td>Not Applicable</td>
<td>Unlisted</td>
</tr>
<tr>
<td>Deploy Previews</td>
<td>No</td>
<td>No</td>
<td><a target="_blank" rel="noopener" href="https://www.netlify.com/pricing/#features">Yes</a></td>
<td>Yes</td>
<td><a target="_blank" rel="noopener" href="https://pages.cloudflare.com/">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://firebase.google.com/docs/hosting/test-preview-deploy">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://render.com/docs/pull-request-previews">Yes</a></td>
</tr>
<tr>
<td>Serverless Functions</td>
<td><a target="_blank" rel="noopener" href="https://github.com/serverless/github-action">No</a></td>
<td><a target="_blank" rel="noopener" href="https://docs.gitlab.com/ee/user/project/clusters/serverless/aws.html">No</a></td>
<td><a target="_blank" rel="noopener" href="https://www.netlify.com/pricing/#features">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/docs/serverless-functions/introduction">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://developers.cloudflare.com/workers/">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://firebase.google.com/pricing/">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://feedback.render.com/features/p/support-for-serverless-scripts">Not for free</a></td>
</tr>
<tr>
<td>Invocations/Month</td>
<td></td>
<td></td>
<td><a target="_blank" rel="noopener" href="https://www.netlify.com/pricing/#features">125k/per site/mo</a></td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/docs/platform/fair-use-policy">100GB hours/mo</a></td>
<td><a target="_blank" rel="noopener" href="https://developers.cloudflare.com/workers/platform/limits">100k/day</a></td>
<td><a target="_blank" rel="noopener" href="https://firebase.google.com/docs/functions/quotas">125k/mo</a></td>
<td></td>
</tr>
<tr>
<td>Duration Allowed</td>
<td></td>
<td></td>
<td><a target="_blank" rel="noopener" href="https://docs.netlify.com/functions/overview/#default-deployment-options">10s</a></td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/docs/platform/limits#serverless-function-execution-timeout">10s</a></td>
<td><a target="_blank" rel="noopener" href="https://developers.cloudflare.com/workers/platform/limits">10ms</a></td>
<td><a target="_blank" rel="noopener" href="https://firebase.google.com/docs/functions/quotas">540s</a></td>
<td></td>
</tr>
<tr>
<td>DNS Management</td>
<td><a target="_blank" rel="noopener" href="https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/managing-a-custom-domain-for-your-github-pages-site#configuring-a-subdomain">No</a></td>
<td><a target="_blank" rel="noopener" href="https://about.gitlab.com/handbook/support/workflows/verify_pages_domain.html">No</a></td>
<td><a target="_blank" rel="noopener" href="https://docs.netlify.com/domains-https/netlify-dns/">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/knowledge/how-to-manage-vercel-dns-records">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://www.cloudflare.com/dns/">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://firebase.google.com/docs/hosting/custom-domain">No</a></td>
<td><a target="_blank" rel="noopener" href="https://render.com/docs/custom-domains#adding-a-custom-domain">No</a></td>
</tr>
<tr>
<td>HTTPS Available</td>
<td><a target="_blank" rel="noopener" href="https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/securing-your-github-pages-site-with-https">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://docs.gitlab.com/ee/user/project/pages/custom_domains_ssl_tls_certification/lets_encrypt_integration.html">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://docs.netlify.com/domains-https/https-ssl/">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/blog/automatic-ssl-with-vercel-lets-encrypt">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://support.cloudflare.com/hc/en-us/articles/360024787372-End-to-end-HTTPS-with-Cloudflare-Part-1-conceptual-overview">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://firebase.google.com/docs/hosting">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://render.com/docs/static-sites">Yes</a></td>
</tr>
<tr>
<td>Bandwidth/Month</td>
<td><a target="_blank" rel="noopener" href="https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/about-github-pages#usage-limits">100GB/Mo</a></td>
<td><a target="_blank" rel="noopener" href="https://forum.gitlab.com/t/what-are-the-restrictions-for-gitlab-pages-sites/15067/6">No limit</a></td>
<td><a target="_blank" rel="noopener" href="https://www.netlify.com/tos/#for-free-accounts">100GB/Mo</a></td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/docs/platform/fair-use-policy">100GB/Mo</a></td>
<td><a target="_blank" rel="noopener" href="https://pages.cloudflare.com/#plans">No Limit</a></td>
<td><a target="_blank" rel="noopener" href="https://firebase.google.com/docs/hosting/usage-quotas-pricing">10GB/Mo</a></td>
<td><a target="_blank" rel="noopener" href="https://community.render.com/t/request-size-limits/552">100GB/Mo</a></td>
</tr>
<tr>
<td>Site Limit</td>
<td><a target="_blank" rel="noopener" href="https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/about-github-pages#usage-limits">1GB</a></td>
<td><a target="_blank" rel="noopener" href="https://forum.gitlab.com/t/what-are-the-restrictions-for-gitlab-pages-sites/15067/6">10GB</a></td>
<td><a target="_blank" rel="noopener" href="https://www.netlify.com/tos/#for-free-accounts">100GB</a></td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/docs/platform/limits#files">12.5K Files</a></td>
<td><a target="_blank" rel="noopener" href="https://developers.cloudflare.com/pages/platform/limits#files">20K Files</a></td>
<td><a target="_blank" rel="noopener" href="https://firebase.google.com/pricing/">10GB</a></td>
<td><a target="_blank" rel="noopener" href="https://render.com/docs/static-sites">None listed</a></td>
</tr>
<tr>
<td>Default URL</td>
<td><a target="_blank" rel="noopener" href="https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/about-github-pages#about-github-pages">github.io</a></td>
<td><a target="_blank" rel="noopener" href="http://gitlab.io">gitlab.io</a></td>
<td>netlify.app</td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/docs/custom-domains">vercel.app</a></td>
<td><a target="_blank" rel="noopener" href="https://developers.cloudflare.com/pages/getting-started#add-a-custom-cname-record">pages.dev</a></td>
<td><a target="_blank" rel="noopener" href="https://firebase.google.com/docs/hosting">web.app and firebaseapp.com</a></td>
<td><a target="_blank" rel="noopener" href="https://render.com/docs/custom-domains">onrender.com</a></td>
</tr>
<tr>
<td># of Team Members</td>
<td><a target="_blank" rel="noopener" href="https://docs.github.com/en/free-pro-team@latest/github/getting-started-with-github/faq-about-changes-to-githubs-plans#how-long-will-github-free-allow-unlimited-collaborators">Unlimited</a></td>
<td><a target="_blank" rel="noopener" href="https://about.gitlab.com/pricing/">Unlimited</a></td>
<td><a target="_blank" rel="noopener" href="https://www.netlify.com/pricing/#features">One</a></td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/docs/platform/limits">One</a></td>
<td><a target="_blank" rel="noopener" href="https://pages.cloudflare.com/">Unlimited</a></td>
<td></td>
<td><a target="_blank" rel="noopener" href="https://render.com/docs/static-sites#unlimited-collaborators">Unlimited</a></td>
</tr>
<tr>
<td>Team SSO Available</td>
<td><a target="_blank" rel="noopener" href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/about-authentication-with-saml-single-sign-on">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://about.gitlab.com/handbook/business-ops/okta/">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://docs.netlify.com/accounts-and-billing/team-management/saml-single-sign-on/">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/docs/platform/projects#sso-protection">Not for Free</a></td>
<td>Unlisted</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td># of Users</td>
<td><a target="_blank" rel="noopener" href="https://docs.github.com/en/free-pro-team@latest/developers/apps/authorizing-oauth-apps">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://docs.gitlab.com/ee/integration/oauth_provider.html">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://www.netlify.com/pricing/#add-ons-identity">1000/site/month</a></td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/docs/solutions/authentication">No</a></td>
<td><a target="_blank" rel="noopener" href="https://developers.cloudflare.com/workers/tutorials/authorize-users-with-auth0">No</a></td>
<td><a target="_blank" rel="noopener" href="https://firebase.google.com/pricing/">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://feedback.render.com/features/p/password-protection-for-static-sites">Planned</a></td>
</tr>
<tr>
<td>User SSO Available</td>
<td>[Yes]</td>
<td><a target="_blank" rel="noopener" href="https://docs.gitlab.com/ee/user/group/saml_sso/">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://www.netlify.com/pricing/#add-ons-identity">Not for free</a></td>
<td>No</td>
<td>No</td>
<td><a target="_blank" rel="noopener" href="https://firebase.google.com/docs/auth/where-to-start">Yes</a></td>
<td></td>
</tr>
<tr>
<td>Form Submissions/Month</td>
<td>No</td>
<td>No</td>
<td><a target="_blank" rel="noopener" href="https://www.netlify.com/pricing/#add-ons-forms">100</a></td>
<td>No</td>
<td>Yes and No</td>
<td>No</td>
<td><a target="_blank" rel="noopener" href="https://feedback.render.com/features/p/render-form-submissions">Yes - via Formspree integration</a></td>
</tr>
<tr>
<td>Analytics</td>
<td>No</td>
<td><a target="_blank" rel="noopener" href="https://gitlab.com/gitlab-org/gitlab-pages/-/issues/384">Not Yet</a></td>
<td><a target="_blank" rel="noopener" href="https://www.netlify.com/pricing/#add-ons-analytics">Not for free</a></td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/docs/analytics#limits">Free is only good for 1 day</a></td>
<td>Yes</td>
<td><a target="_blank" rel="noopener" href="https://firebase.google.com/pricing/">Yes</a></td>
<td>No</td>
</tr>
<tr>
<td>Split A/B Testing</td>
<td>No</td>
<td>No</td>
<td><a target="_blank" rel="noopener" href="https://docs.netlify.com/site-deploys/split-testing/">Yes</a></td>
<td>No</td>
<td><a target="_blank" rel="noopener" href="https://developers.cloudflare.com/workers/examples/ab-testing">No</a></td>
<td><a target="_blank" rel="noopener" href="https://firebase.google.com/pricing/">Yes</a></td>
<td>No</td>
</tr>
<tr>
<td>Allowed for Business Use</td>
<td><a target="_blank" rel="noopener" href="https://docs.github.com/en/github/working-with-github-pages/about-github-pages#prohibited-uses">No</a></td>
<td><a target="_blank" rel="noopener" href="https://docs.gitlab.com/ee/user/project/pages/">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://answers.netlify.com/t/is-the-free-tier-safe-for-client-projects/13535">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://vercel.com/docs/platform/fair-use-policy#commercial-usage">No for hobby</a></td>
<td><a target="_blank" rel="noopener" href="https://pages.cloudflare.com/#pricing">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://cloud.google.com/terms/aup">Yes</a></td>
<td><a target="_blank" rel="noopener" href="https://render.com/acceptable-use">Yes</a></td>
</tr>
</tbody>
</table>
<blockquote>
<p>Github可以通过同样代码仓库，多个仓库同时部署，不同仓库设置不同的域名来支持多域名！</p>
</blockquote>
<blockquote>
<p>Tips: <code>Github</code>有每个账户1000个仓库限制，每个仓库大小超过1G，就会被人工审查！所以撸羊毛可以，注意仓库个数和大小限制！</p>
</blockquote>
<h3 id="GitHub-Pages">GitHub Pages</h3>
<ul>
<li>
<p>速度：尚可，并不很慢，但有时候会抽风。</p>
</li>
<li>
<p>自定义域名：一个。</p>
</li>
<li>
<p>限制：</p>
</li>
<li>
<ul>
<li>单个文件大于50MB将受到警告。</li>
<li>单个文件大于100MB无法上传。</li>
<li>仓库大小「强烈建议」少于1GB。</li>
<li>每小时可构建10次。<a target="_blank" rel="noopener" href="https://help.github.com/articles/what-is-my-disk-quota/#file-and-repository-size-limitations">https://help.github.com/articles/what-is-my-disk-quota/#file-and-repository-size-limitations</a></li>
<li>每月流量100GB 或者 100,000 次请求。<br>
详情可见：<a target="_blank" rel="noopener" href="https://docs.github.com/en/pages/getting-started-with-github-pages/about-github-pages%23guidelines-for-using-github-pages">https://docs.github.com/en/pages/getting-started-with-github-pages/about-github-pages#guidelines-for-using-github-pages</a></li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>优点：简单方便</li>
<li>缺点：国内速度慢，直连CNAME会泄露GitHub用户名，免费版私有仓库无法使用</li>
</ul>
</blockquote>
<h3 id="Netlify">Netlify</h3>
<p><strong>控制台无法访问。</strong></p>
<ul>
<li>
<p>部署方式：GitHub、GitLab、BitBucket仓库自动拉取以及本地CLI直接推送。</p>
</li>
<li>
<p>速度：较GitHub Pages要快，但是稳定性差上不少，部分时候可能直接出现无法访问。</p>
</li>
<li>
<p>自定义域名：多个。</p>
</li>
<li>
<p>限制：<br>
对于每个账户：</p>
</li>
<li>
<ul>
<li>同时只能构建一个站点。</li>
<li>每月流量100GB。</li>
<li>每月构建时间300分钟。<br>
详情可见：<a target="_blank" rel="noopener" href="https://www.netlify.com/pricing">https://www.netlify.com/pricing</a></li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>优点：pr单独部署，速度还可以，有免费的serverless</li>
<li>缺点：直连CNAME会泄露分配域名</li>
<li>对比Vercel，Netlify在国内的速度确实要比Vercel慢很多，但前者有许多后者没有的服务或插件，比如Algolia、表单等等</li>
</ul>
</blockquote>
<h3 id="Cloudflare-Pages">Cloudflare Pages</h3>
<ul>
<li>
<p>部署方式：GitHub仓库。</p>
</li>
<li>
<p>速度：与GitHub Pages相似。</p>
</li>
<li>
<p>自定义域名：最多10个；</p>
</li>
<li>
<p>限制：</p>
</li>
<li>
<ul>
<li>每月构可构建500次。</li>
<li>每日所有Functions 和 Workers 总计限制 100,000 次请求。</li>
<li>文件数量最多2w个。</li>
<li>单个文件大小不得超过25MB。<br>
详情可见：<a target="_blank" rel="noopener" href="https://developers.cloudflare.com/pages/platform/limits">https://developers.cloudflare.com/pages/platform/limits</a></li>
</ul>
</li>
</ul>
<h3 id="Vercel">Vercel</h3>
<ul>
<li>
<p>部署方式：与Netlify相同，支持GitHub、GitLab、BitBucket仓库自动拉取以及本地CLI直接推送。</p>
</li>
<li>
<p>速度：在所有方案中最快且最稳定。</p>
</li>
<li>
<p>自定义域名：多个。</p>
</li>
<li>
<p>限制：</p>
</li>
<li>
<ul>
<li>每日可构建100次，但每小时不超过32次。</li>
<li>单个Git仓库支持连接3个Vercel项目。</li>
<li>每次构建时长最多45min。每月总计不超过100h。</li>
<li>每月带宽100G。<br>
详情可见：<a target="_blank" rel="noopener" href="https://vercel.com/docs/platform/limits">https://vercel.com/docs/platform/limits</a></li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>优点：pr单独部署，速度快，CNAME无隐私问题，有免费的serverless</li>
<li>缺点：嗯，免费的能做到这样还指望啥？</li>
</ul>
</blockquote>
<h3 id="Cloudflare-CDN"><em>Cloudflare CDN</em></h3>
<p><strong>Cloudflare CDN本身并非博客托管服务，但是可以与上文任意一个服务进行搭配。</strong></p>
<p>使用CF CDN时访问速度大多数时候较快，遇高峰期将减速。总体来说速度不如Vercel。稳定性尚可，但曾出现过无法访问的情况。</p>
<p>最主要的是将获得非常多的扩展功能，如HSTS、访问限制，以及HTTP/3等前沿网络技术。他们对IETF的跟进是很快的。同时还会获得DDoS清洗、网站分析等服务。</p>
<blockquote>
<p>注意，套上CF CDN之后，可能访问速度会下降，例如Vercel，CF pages</p>
<p>最佳方法是使用Vercel+CF Partner？不过现在能用的CF Partner几乎没有了</p>
</blockquote>
<h3 id="gcore-CDN"><em>gcore CDN</em></h3>
<p><a target="_blank" rel="noopener" href="https://gcore.com/">gcore</a></p>
<p>每月 1000G 免费流量！<br>
免费节点在中国访问速度比 cloudflare 更快</p>
<h3 id="jsDelivr-CDN">jsDelivr CDN</h3>
<p><a target="_blank" rel="noopener" href="https://www.jsdelivr.com/">官网</a></p>
<ul>
<li>支持 HTTPS，支持 HTTP2，提供 SRI</li>
<li>网宿、Fastly、Stackpath、Cloudflare Business Plan</li>
<li>非常丰富的国内节点</li>
<li>非常丰富的海外节点</li>
<li>全球的速度都非常优秀</li>
<li><code>cdn.jsdelivr.net</code>，NS1 和 Rage4 主从 DNS</li>
<li>便捷性：★★★★★</li>
</ul>
<p>jsDelivr 支持从 NPM、GitHub Tag 和 WordPress SVN 上抓取文件并分发，大大降低了开发者使用的难度——直接发个 Release 就可以用了。jsDelivr 每个月会被调用上百亿次，服务 620+ TB 的流量，意味着如果你不是通过 jsDelivr 加载较为热门的库，那么缓存命中率是不会太理想的。</p>
<blockquote>
<p>公用库采用jsDelivr加速，自定义修改的js，css使用自己的部署服务</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.skk.moe/post/public-cdn-in-diffrent-views/">其它CDN测评</a></p>
<h3 id="VPS">VPS</h3>
<p>一句话，VPS的超能力就是有钱。配置更好的服务器速度更快，对国内外来说，地理位置最理想的是香港VPS。当然，价格也是相当感人！</p>
<blockquote>
<ul>
<li>优点：钱越多，速度越快。自定义性最高，想做什么服务都可以</li>
<li>缺点：很花钱，网站较大时考虑这个。不够稳定，要稳定性就要多点部署，需要自己维护服务器</li>
</ul>
</blockquote>
<h4 id="RackNerd-VPS-推荐">RackNerd VPS 推荐</h4>
<p>目前个人能找到的<mark>最便宜</mark>的 VPS 服务商: <a target="_blank" rel="noopener" href="https://my.racknerd.com/aff.php?aff=3312">racknerd VPS</a></p>
<p>双11，或者6.18 活动价更优惠！几年前买的一个 1核1G 的，一年不到10刀！现在已经绝版了，并且后续每年循环账单续费没有涨价！</p>
<p>如果你发现了更便宜的服务商，务必留言告诉我！</p>
<h3 id="部署示例">部署示例</h3>
<blockquote>
<p>本站的镜像！</p>
<p>vercel, netlify, cloudflare pages 有100G流量或者访问次数限制，如果访问不了请更换其它部署方式！</p>
</blockquote>
<blockquote>
<ul>
<li>主站： <a href="https://blog.17lai.site">blog.17lai.site</a></li>
<li>Vercel: <a target="_blank" rel="noopener" href="https://17lai.vercel.app">17lai.vercel.app</a></li>
<li>netlify: <a target="_blank" rel="noopener" href="https://17lai.netlify.app">17lai.netlify.app</a></li>
<li>Cloudflare Pages: <a target="_blank" rel="noopener" href="https://17lai.pages.dev/">17lai.pages.dev</a></li>
<li>VPS: <a target="_blank" rel="noopener" href="https://v20blog.17lai.site">v20blog.17lai.site</a></li>
</ul>
</blockquote>
<h2 id="Hexo-Docker-本地部署">Hexo Docker 本地部署</h2>
<p>在最前面的篇章介绍了Hexo Docker 环境的使用方法。具体使用方法见本文系列<a href="/posts/40300608/#Hexo-Docker%E7%8E%AF%E5%A2%83%E4%BD%BF%E7%94%A8%E7%AF%87"><strong>Hexo Docker 环境篇</strong></a>。</p>
<p>优点：本地使用可定制化成都更高</p>
<p>缺点：必须要有Docker 环境。异地使用麻烦，除非ssh,vpn等远程链接方法。</p>
<h2 id="Hexo-Docker-VPS-部署">Hexo Docker VPS 部署</h2>
<p>和 Hexo Docker 本地部署基本一样，最后反向代理设置域名。</p>
<p>具体参考 <a href="/posts/40300608/#Hexo-Docker%E7%8E%AF%E5%A2%83%E4%BD%BF%E7%94%A8%E7%AF%87"><strong>Hexo Docker 环境篇</strong></a></p>
<h2 id="Hexo-IPFS-部署">Hexo IPFS 部署</h2>
<blockquote>
<p>全面拥抱 web 3.0。静态部署 hexo blog！</p>
<p>本节待完善！</p>
</blockquote>
<h3 id="4everland">4everland</h3>
<p><a target="_blank" rel="noopener" href="https://4everland.org/">https://4everland.org/</a></p>
<h3 id="私有部署-IPFS">私有部署 IPFS</h3>
<p>hexo 插件 <a target="_blank" rel="noopener" href="https://github.com/ishallbethat/hexo-deployer-ipfs">hexo-deployer-ipfs</a></p>
<p>Docker 配置 IPFS</p>
<p><a target="_blank" rel="noopener" href="https://www.chinagfw.org/2017/09/hexoipfs.html">Hexo+IPFS搭建个人免服务器独立博客</a></p>
<p><a target="_blank" rel="noopener" href="https://hub.docker.com/r/linuxserver/ipfs">Docker linuxserver/ipfs</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Sitoi/private-network-ipfs">Docker private-network-ipfs</a> <a target="_blank" rel="noopener" href="https://sitoi.cn/posts/40630.html">利用 Docker 搭建 IPFS 私有网络</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/coderzjz/p/14924489.html">IPFS在windows平台下的安装与简单使用</a></p>
<h4 id="Win10-配置IPFS">Win10 配置IPFS</h4>
<p>IPFS是点对点协议InterPlanetary File System的简称，它是一个面向全球的、点对点的分布式版本文件系统，试图将所有具有相同文件系统的计算设备连接在一起。<br>
近日，IFPS宣布了一个未来web发展计划，它用基于内容的地址替代基于域名的地址，也就是用户寻找的不是某个地址而是储存在某个地方的内容，不需要验证发送者的身份，而只需要验证内容的哈希，通过这样可以让网页的速度更快、更安全、更健壮、更持久。IPFS表示，IPFS未来将替代HTTP（以及其他的许多东西）。</p>
<h5 id="2-1-安装IPFS">2.1 安装IPFS</h5>
<p>至官网下载对应版本，一路安装即可，win10系统，下载对应zip解压后，将ipfs.exe添加到%PATH%。<br>
测试是否安装成功：ipfs help<br>
出现 USAGE:<br>
ipfs - Global p2p merkle-dag filesystem.<br>
…<br>
即可。</p>
<h5 id="2-2-启动本地IPFS节点">2.2 启动本地IPFS节点</h5>
<p>第一步:先初始化IPFS<br>
ipfs init<br>
第二部：打开节点<br>
ipfs daemon<br>
此时，你可以在http://localhost:5001/webui，打开自己的操作台。</p>
<h5 id="2-3-将Hexo博客部署到IPFS节点上">2.3 将Hexo博客部署到IPFS节点上</h5>
<p>Hexo是一个静态博客生成器，执行hexo generate后，会在博客目录生成/Public目录,该目录即为全部博客内容<br>
执行 ipfs add -r public<br>
得到：added QmXJJm7aydK22eF1BdKVozcXH5Ltm8ZwbFHo3c36hi9qUx public<br>
QmXJJm7aydK22eF1BdKVozcXH5Ltm8ZwbFHo3c36hi9qUx即为博客网站的site_hash,你可以通过任意运行IPFS的节点访问，如：<a target="_blank" rel="noopener" href="http://localhost:8080/ipfs/">http://localhost:8080/ipfs/</a><mjx-container class="MathJax" jax="SVG" style="direction: ltr; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="79.73ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 35240.8 1000" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(645,0)"><path data-c="1D43C" d="M43 1Q26 1 26 10Q26 12 29 24Q34 43 39 45Q42 46 54 46H60Q120 46 136 53Q137 53 138 54Q143 56 149 77T198 273Q210 318 216 344Q286 624 286 626Q284 630 284 631Q274 637 213 637H193Q184 643 189 662Q193 677 195 680T209 683H213Q285 681 359 681Q481 681 487 683H497Q504 676 504 672T501 655T494 639Q491 637 471 637Q440 637 407 634Q393 631 388 623Q381 609 337 432Q326 385 315 341Q245 65 245 59Q245 52 255 50T307 46H339Q345 38 345 37T342 19Q338 6 332 0H316Q279 2 179 2Q143 2 113 2T65 2T43 1Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(1149,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z" style="stroke-width: 3;"></path></g><g data-mml-node="msub" transform="translate(1853,0)"><g data-mml-node="mi"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(771,-150) scale(0.707)"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z" style="stroke-width: 3;"></path></g></g><g data-mml-node="mi" transform="translate(3301.9,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(4051.9,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(4696.9,0)"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(5584.9,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">，</text></g><g data-mml-node="mi" transform="translate(6584.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">也</text></g><g data-mml-node="mi" transform="translate(7584.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">可</text></g><g data-mml-node="mi" transform="translate(8584.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">以</text></g><g data-mml-node="mi" transform="translate(9584.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">通</text></g><g data-mml-node="mi" transform="translate(10584.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">过</text></g><g data-mml-node="mi" transform="translate(11584.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">官</text></g><g data-mml-node="mi" transform="translate(12584.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">方</text></g><g data-mml-node="mi" transform="translate(13584.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">运</text></g><g data-mml-node="mi" transform="translate(14584.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">行</text></g><g data-mml-node="mi" transform="translate(15584.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">的</text></g><g data-mml-node="mi" transform="translate(16584.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">节</text></g><g data-mml-node="mi" transform="translate(17584.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">点</text></g><g data-mml-node="mi" transform="translate(18584.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">访</text></g><g data-mml-node="mi" transform="translate(19584.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">问</text></g><g data-mml-node="mi" transform="translate(20584.9,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">：</text></g><g data-mml-node="mi" transform="translate(21584.9,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(22160.9,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(22521.9,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(22882.9,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(23663.7,0)"><path data-c="3A" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" style="stroke-width: 3;"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(24219.5,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z" style="stroke-width: 3;"></path></g></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(24719.5,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z" style="stroke-width: 3;"></path></g></g><g data-mml-node="mi" transform="translate(25219.5,0)"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(25696.5,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(26225.5,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(26586.5,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(27052.5,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(27768.5,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(28297.5,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(28787.5,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(29232.1,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(29577.1,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(30080.1,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(30630.1,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z" style="stroke-width: 3;"></path></g><g data-mml-node="mo" transform="translate(31099.1,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(31543.8,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(31888.8,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z" style="stroke-width: 3;"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(32373.8,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z" style="stroke-width: 3;"></path></g></g><g data-mml-node="mi" transform="translate(32873.8,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(33218.8,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(33721.8,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z" style="stroke-width: 3;"></path></g><g data-mml-node="mi" transform="translate(34271.8,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z" style="stroke-width: 3;"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(34740.8,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z" style="stroke-width: 3;"></path></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; width: auto; overflow: hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi><mi>I</mi><mi>T</mi><msub><mi>E</mi><mi>H</mi></msub><mi>A</mi><mi>S</mi><mi>H</mi><mi>，</mi><mi mathvariant="normal">也</mi><mi mathvariant="normal">可</mi><mi mathvariant="normal">以</mi><mi mathvariant="normal">通</mi><mi mathvariant="normal">过</mi><mi mathvariant="normal">官</mi><mi mathvariant="normal">方</mi><mi mathvariant="normal">运</mi><mi mathvariant="normal">行</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">节</mi><mi mathvariant="normal">点</mi><mi mathvariant="normal">访</mi><mi mathvariant="normal">问</mi><mi>：</mi><mi>h</mi><mi>t</mi><mi>t</mi><mi>p</mi><mo>:</mo><mrow data-mjx-texclass="ORD"><mo>/</mo></mrow><mrow data-mjx-texclass="ORD"><mo>/</mo></mrow><mi>g</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>w</mi><mi>a</mi><mi>y</mi><mo>.</mo><mi>i</mi><mi>p</mi><mi>f</mi><mi>s</mi><mo>.</mo><mi>i</mi><mi>o</mi><mrow data-mjx-texclass="ORD"><mo>/</mo></mrow><mi>i</mi><mi>p</mi><mi>f</mi><mi>s</mi><mrow data-mjx-texclass="ORD"><mo>/</mo></mrow></math></mjx-assistive-mml></mjx-container>SITE_HASH。</p>
<h5 id="2-4-绑定独立域名">2.4 绑定独立域名</h5>
<p>刚才，我们通过ipfs add，将博客发布到了IPFS运行的区块链节点上，但复杂的site_hash并不友好，我们可以使用IPNS技术，通过绑定独立域名来实现与现有的网站访问并无任何不一样的体现。我们假设你已经有一个可以正常使用的域名，<a target="_blank" rel="noopener" href="http://xn--aa-d29c.com">如aa.com</a>，没有域名的可以到任意域名服务商初购买。<br>
首先，我们将网站发布<br>
执行 ipfs name publish QmXJJm7aydK22eF1BdKVozcXH5Ltm8ZwbFHo3c36hi9qUx<br>
得到 Published to QmV61ui6H9qX3126yGH846dPkMgSe7SZcDxrVwm2gxTidu: /ipfs/QmXJJm7aydK22eF1BdKVozcXH5Ltm8ZwbFHo3c36hi9qUx<br>
记住QmV61ui6H9qX3126yGH846dPkMgSe7SZcDxrVwm2gxTidu为你的peerid，该hash是保持不变的。<br>
那好，我们现在只需要将aa.com解析到上述地址即可，添加TXT记录为dnslink=/ipns/QmV61ui6H9qX3126yGH846dPkMgSe7SZcDxrVwm2gxTidu,同时将域名A记录指向任意ipfs节点的ip，<a target="_blank" rel="noopener" href="http://xn--gateway-i22m.ipfs.io">如gateway.ipfs.io</a>。<br>
<a target="_blank" rel="noopener" href="http://xn--aa-rl8c259h5ez60m.com">现在访问aa.com</a>，你是不是发现已经可以正常访问你刚才生成的博客了。当然，在没有优化之前，访问会很慢，但可以打开。<br>
由于IPNS还不稳定，你可以在http://ipfs.io/ipfs/QmeaNWtacNyWZxEphYCdVmF6bcMg7Bjn6e5sGdK6fr1nMx 查看本页面。</p>
<h2 id="将Hexo部署到VPS实现自动发布">将Hexo部署到VPS实现自动发布</h2>
<h3 id="搭建流程">搭建流程</h3>
<ol>
<li>服务器环境配置，安装Git、Nginx配置、创建git用户</li>
<li>本地hexo初始化</li>
<li>使用Git自动部署并发布博客</li>
</ol>
<h3 id="服务器环境搭建">服务器环境搭建</h3>
<ul>
<li><strong>安装Git和NodeJS(Centos环境)</strong></li>
</ul>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum install git
# 安装NodeJS 
curl --silent --location https://rpm.nodesource.com/setup_5.x | bash -</code></pre></div></figure>
<ul>
<li><strong>创建git账号</strong></li>
</ul>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">adduser git
chmod 740 /etc/sudoers
vim /etc/sudoers</code></pre></div></figure>
<ul>
<li>添加内容<br>
找到</li>
</ul>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">## Allow root to run any commands anywhere
root    ALL=(ALL)     ALL</code></pre></div></figure>
<ul>
<li>添加以下内容</li>
</ul>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">git     ALL=(ALL)     ALL</code></pre></div></figure>
<ul>
<li>保存退出并改回权限</li>
</ul>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">chmod 400 /etc/sudoers</code></pre></div></figure>
<ul>
<li>设置git账号密码</li>
</ul>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sudo passwd git</code></pre></div></figure>
<ul>
<li>使用<code>su git</code>切换到git用户，再执行下列操作：</li>
</ul>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># 切换到git用户目录
cd /home/git
# 创建.ssh文件夹
mkdir ~/.ssh
# 创建authorized_keys文件并编辑
vim ~/.ssh/authorized_keys
# 如果你还没有生成公钥，那么首先在本地电脑中执行 cat ~/.ssh/id_rsa.pub | pbcopy生成公钥
# 再将公钥复制粘贴到authorized_keys
# 保存关闭authorized_keys后，修改相应权限
chmod 600 ~/.ssh/authorized_keys
chmod 700 ~/.ssh</code></pre></div></figure>
<ul>
<li>然后可以通过本地Git Bash执行ssh命令测试是否可以免密登录</li>
</ul>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh -v git@服务器ip地址</code></pre></div></figure>
<p>这样git用户就添加好了。</p>
<blockquote>
<p>Tips: 将公钥拷贝到服务器的~/.ssh/authorized_keys文件中方法有如下几种：</p>
<ol>
<li>将公钥通过scp拷贝到服务器上，然后追加到~/.ssh/authorized_keys文件中，这种方式比较麻烦。scp -P 22 ~/.ssh/id_rsa.pub user@host:~/。</li>
<li>通过ssh-copy-id程序，就是我演示的方法，ssh-copyid user@host即可</li>
<li>可以通过<code>cat ~/.ssh/id_rsa.pub | ssh username@host "mkdir ~/.ssh; cat &gt;&gt; ~/.ssh/authorized_keys"</code>，这个也是比较常用的方法，因为可以更改端口号。</li>
</ol>
</blockquote>
<ul>
<li><strong>安装Nginx</strong></li>
<li>准备工作<br>
首先由于nginx的一些模块依赖一些lib库，所以在安装nginx之前，必须先安装这些lib库，这些依赖库主要有g++、gcc、openssl-devel、pcre-devel和zlib-devel 所以执行如下命令安装</li>
</ul>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum install gcc-c++
yum install pcre pcre-devel
yum install zlib zlib-devel
yum install openssl openssl--devel</code></pre></div></figure>
<p>Ubuntu系统安装命令如下：</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sudo apt-get install libpcre3 libpcre3-dev
sudo apt-get install zlib1g-dev
sudo apt-get install openssl libssl-dev</code></pre></div></figure>
<ul>
<li>安装Nginx<br>
安装之前，最好检查一下是否已经安装有nginx</li>
</ul>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">find -name nginx</code></pre></div></figure>
<p>如果系统已经安装了nginx，那么就先卸载</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum remove nginx</code></pre></div></figure>
<p>然后开始安装<br>
首先进入<code>/usr/local</code>目录</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cd /usr/local</code></pre></div></figure>
<p>从官网下载最新版的nginx</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wget -c https://nginx.org/download/nginx-1.14.2.tar.gz </code></pre></div></figure>
<p>（注：版本号可更改，去官网查看最新版本号修改即可）</p>
<p>解压nginx压缩包</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">tar -zxvf nginx-1.14.2.tar.gz</code></pre></div></figure>
<p>会产生一个nginx-1.14.2 目录，这时进入nginx-1.14.2 目录</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cd  nginx-1.14.2</code></pre></div></figure>
<p>接下来安装，使用–prefix参数指定nginx安装的目录,make、make install安装</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">./configure</code></pre></div></figure>
<p>（默认安装在/usr/local/nginx，推荐使用默认设置）</p>
<p><img src="https://cimg1.17lai.site/data/2021/09/1220210912163925.png" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt=""></p>
<figure><div class="code-area"><pre class="line-numbers language-none"><code class="language-none">make</code></pre></div></figure>
<p><img src="https://cimg1.17lai.site/data/2021/09/1220210912163918.png" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt=""></p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">make install</code></pre></div></figure>
<p><img src="https://cimg1.17lai.site/data/2021/09/1220210912163522.png" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt=""></p>
<p>如果没有报错，顺利完成后，最好看一下nginx的安装目录</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">whereis nginx</code></pre></div></figure>
<p>（where和is要连这些，中间没有空格）</p>
<p><img src="https://cimg1.17lai.site/data/2021/09/1220210912163515.png" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt=""></p>
<ul>
<li>启动和停止nginx</li>
</ul>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cd /usr/local/nginx/sbin/
./nginx 
./nginx -s stop
./nginx -s quit
./nginx -s reload
./nginx -s quit: 此方式停止步骤是待nginx进程处理任务完毕进行停止。
./nginx -s stop: 此方式相当于先查出nginx进程id再使用kill命令强制杀掉进程。</code></pre></div></figure>
<p>查询nginx进程：</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ps aux | grep nginx</code></pre></div></figure>
<p><img src="https://cimg1.17lai.site/data/2021/09/1220210912163454.png" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt=""></p>
<ul>
<li>重启 nginx</li>
</ul>
<ol>
<li>先停止再启动（推荐）：<br>
对 nginx 进行重启相当于先停止再启动，即先执行停止命令再执行启动命令。如下：</li>
</ol>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">./nginx -s quit
./nginx</code></pre></div></figure>
<ol start="2">
<li>重新加载配置文件：<br>
当 nginx 的配置文件 nginx.conf 修改后，要想让配置生效需要重启 nginx，使用 -s reload 不用先停止 nginx 再启动 nginx 即可将配置信息在 nginx 中生效，如下：</li>
</ol>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">./nginx -s reload</code></pre></div></figure>
<p>启动成功后，在浏览器可以看到如下页面：</p>
<p><img src="https://cimg1.17lai.site/data/2021/09/1220210912163437.png" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt=""></p>
<ul>
<li>开机自启动</li>
</ul>
<p>即在rc.local增加启动代码就可以了。</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">vim /etc/rc.local</code></pre></div></figure>
<p>增加一行</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/usr/local/nginx/sbin/nginx</code></pre></div></figure>
<p>到这里，nginx安装完毕，启动、停止、重启操作也都完成。</p>
<h3 id="建立git裸库">建立git裸库</h3>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># 回到git目录
cd /home/git
# 使用git用户创建git裸仓库，以blog.git为例
git init --bare blog.git</code></pre></div></figure>
<h3 id="检查用户组权限">检查用户组权限</h3>
<p>我们的git裸仓库已经建立好了，离成功又近了一步。为了以防万一，我们要检查一下之前的blog.git、.ssh、blog目录的用户组权限是否都为<code>git:git</code></p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># 还记得/var/www/吗？这是之前配置nginx时，我们自己选定的网站根目录，请依据你自己的设置更改，如果没有的话自己
ll -a /www/wwwroot/hexo
ll -a /home/git/</code></pre></div></figure>
<p>如果有哪个不是，执行下面相应的命令后再查看</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sudo chown -R git:git /www/wwwroot/hexo
sudo chmod -R 755 /www/wwwroot/hexo
sudo chown git:git -R /home/git/blog.git</code></pre></div></figure>
<h3 id="使用git-hooks同步网站根目录">使用git-hooks同步网站根目录</h3>
<p>简单来说，我们使用一个钩子文件：post-receive，每当git仓库接收到内容的时候，就会自动调用这个钩子，把内容同步到网站根目录。<br>
在git用户下执行：</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># 新建一个post-receive文件并编辑
vim ~/blog.git/hooks/post-receive</code></pre></div></figure>
<p>在里面输入以下内容，注意修改为自己的设置：</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">#!/bin/bash
set -e
GIT_REPO=/home/git/blog.git
TMP_GIT_CLONE=/tmp/blog
PUBLIC_WWW=/www/wwwroot/hexo
rm -rf ${TMP_GIT_CLONE}
git clone -b main $GIT_REPO $TMP_GIT_CLONE
cd $TMP_GIT_CLONE
#for b in `git branch -r | grep -v -- '-&gt;'`; do git branch --track ${b##origin/} $b; done
#git checkout main
rm -rf ${PUBLIC_WWW}/*
cp -rf ${TMP_GIT_CLONE}/* ${PUBLIC_WWW}
echo "update web done!"
#ls -al ${PUBLIC_WWW}
rm -rf ${TMP_GIT_CLONE}</code></pre></div></figure>
<p>保存退出后，执行以下赋予这个文件可执行权限。</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">chown -R git:git ~/blog.git/hooks/post-receive
chmod +x ~/blog.git/hooks/post-receive</code></pre></div></figure>
<p>好了，以上就是服务器端需要配置的内容。我们还差最后一步就可以完成整个部署了！</p>
<h3 id="修改配置文件nginx-conf">修改配置文件nginx.conf</h3>
<p>修改上面的配置文件：</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">vim /usr/local/nginx/conf/nginx_config</code></pre></div></figure>
<h3 id="然后修改其中两个部分，如下所示：">然后修改其中两个部分，如下所示：</h3>
<p><img src="https://cimg1.17lai.site/data/2021/09/1220210912163900.jpeg" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt=""></p>
<p>然后<code>重启nginx</code>，方法见<code>nginx安装</code>部分。</p>
<h3 id="配置本地Hexo的-config-yml">配置本地Hexo的<code>_config.yml</code></h3>
<p>非常简单，只需要找到本地Hexo博客的站点配置文件<code>_config.yml</code>，找到以下内容并修改：</p>
<figure><div class="code-area"><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">deploy: 
  type: git
  repo: git@你的服务器IP:/home/git/blog.git
  branch: master</code></pre></div></figure>
<p>保存后，剩下的就是Hexo的日常操作了，这里就不赘述了，写完文章后，在你的本地博客根目录执行以下命令：</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo c &amp;&amp; hexo g -d</code></pre></div></figure>
<p>就可以实现线上博客的自动更新了！一切搞定！</p>
<h2 id="Rsync同步部署静态文件方法">Rsync同步部署静态文件方法</h2>
<blockquote>
<p>使用rsync同步</p>
</blockquote>
<p>本地生成静态文件后rsync同步到vps网页目录，lnap使用宝塔配置，这里只需要一个nginx。</p>
<figure><div class="code-area"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># rsync [options] from_dir to_dir
# 替换这里的ip为你的服务器ip
rsync -avzP  /home/17lai.blog  root@8.8.8.8:/www/wwwroot/hexo</code></pre></div></figure>
<h2 id="Hexo-Github-Action-自动部署">Hexo Github Action 自动部署</h2>
<h3 id="准备">准备</h3>
<ol>
<li><code>Hexo</code> 博客源码的仓库，在 <code>GitHub</code> 上。</li>
<li><code>ssh</code> 密钥，参考文章：<a target="_blank" rel="noopener" href="https://sitoi.cn/posts/43508.html">Windows 下利用 Git 生成 SSH KEY 并配置到 GitHub</a></li>
</ol>
<h3 id="步骤">步骤</h3>
<ol>
<li>为需要部署的平台添加密钥</li>
<li>修改 <code>_config.yml</code> 中的 <code>deploy</code> 配置</li>
<li>在 GitHub 上设置 <code>Secrets</code></li>
<li>创建 GitHub Action</li>
</ol>
<h3 id="为需要部署的平台添加密钥">为需要部署的平台添加密钥</h3>
<p>按照之前的教程，只要你之前成功将 Hexo 的博客部署到 GitHub 上，那你电脑在 <code>~/.ssh</code> 目录下一定有以下三个文件：</p>
<ul>
<li><code>id_rsa</code>：私钥</li>
<li><code>id_rsa.pub</code>：公钥</li>
<li><code>known_hosts</code>：记录对所有用户都可信赖的远程主机的公钥</li>
</ul>
<p>将 <code>id_rsa.pub</code>（公钥）添加到不同平台中即可，参考文章：<a target="_blank" rel="noopener" href="https://sitoi.cn/posts/43508.html#%E6%9F%A5%E7%9C%8B-SSH-KEY">Windows 下利用 Git 生成 SSH KEY 并配置到 GitHub</a></p>
<p>下面是不同平台添加的地址：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/settings/ssh/new">GitHub</a></li>
<li><a target="_blank" rel="noopener" href="https://gitlab.com/profile/keys">GitLab</a></li>
<li><a target="_blank" rel="noopener" href="https://e.coding.net/">Coding</a></li>
<li><a target="_blank" rel="noopener" href="https://gitee.com/profile/sshkeys">Gitee</a></li>
</ul>
<h3 id="修改-config-yml-中的-deploy-配置">修改 <code>_config.yml</code> 中的 <code>deploy</code> 配置</h3>
<p>请使用 <code>ssh</code> (即以 <code>git@</code> 开头的 <code>clone</code> 链接) 的连接方式，根据直接的实际地址填写。</p>
<figure><div class="code-area"><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">deploy:
  - type: git
    repo:
      github: git@github.com:Sitoi/Sitoi.github.io.git
      coding: git@e.coding.net:Sitoi/Sitoi.git
      gitee: git@gitee.com:sitoi/sitoi.git
      gitlab: git@gitlab.com:Sitoi/sitoi.gitlab.io.git
    branch: master</code></pre></div></figure>
<h3 id="在-GitHub-上设置-Secrets">在 GitHub 上设置 <code>Secrets</code></h3>
<ol>
<li>
<p>进入到你在 <code>GitHub</code> 上面的源码仓库</p>
</li>
<li>
<p>点击右上角的 <code>Settings</code></p>
</li>
</ol>
<p><img src="https://cimg1.17lai.site/data/2021/10/1220211012133009.png" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="Settings"></p>
<p>Settings</p>
<ol start="3">
<li>
<p>点击左侧的 <code>Secrets</code></p>
</li>
<li>
<p>点击右上角的 <code>New secret</code></p>
</li>
</ol>
<p><img src="https://cimg1.17lai.site/data/2021/10/1220211012133002.png" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="New secret"></p>
<p>New secret</p>
<ol start="5">
<li>在 <code>Name</code> 中输入 <code>HEXO_DEPLOY_PRI</code>，在 <code>Value</code> 中填入 <code>id_rsa</code>（私钥）的全部内容</li>
</ol>
<p><img src="https://cimg1.17lai.site/data/2021/10/1220211012132955.png" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="Add secret"></p>
<p>Add secret</p>
<h3 id="创建-GitHub-Action">创建 GitHub Action</h3>
<ol>
<li>点击项目上方的 <code>Action</code> 按钮</li>
</ol>
<p><img src="https://cimg1.17lai.site/data/2021/10/1220211012132954.png" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="Action"></p>
<p>Action</p>
<ol start="2">
<li>点击 <code>set up a workflow yourself</code> 创建 <code>Workflow</code></li>
</ol>
<p><img src="https://cimg1.17lai.site/data/2021/10/1220211012132947.png" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="Workflow"></p>
<p>Workflow</p>
<ol start="3">
<li>修改 <code>main.yaml</code> 的内容</li>
</ol>
<p><img src="https://cimg1.17lai.site/data/2021/10/1220211012132940.png" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="Create Workflow"></p>
<p>Create Workflow</p>
<blockquote>
<p>根据实际情况修改成你自己的内容</p>
</blockquote>
<ul>
<li>Git 推送使用的用户名：git config –global <a target="_blank" rel="noopener" href="http://user.name">user.name</a> ‘sitoi’：</li>
<li>Git 推送使用的邮箱：git config –global user.email ‘<a href="mailto:133397418@qq.com">133397418@qq.com</a>‘</li>
<li>Hexo 的版本：npm i <a href="mailto:hexo@4.1.1">hexo@4.1.1</a> -g</li>
</ul>
<figure><div class="code-area"><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">name: Hexo CI

on:
  push:
    branches:
      - butterfly

jobs:
  butterfly-build:

    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: [10.x]

    steps:
      - uses: actions/checkout@v1
      - name: Use Node.js 10.x
        uses: actions/setup-node@v1
        with:
          node-version: '10.x'
      - name: env prepare
        env:
          HEXO_DEPLOY_PRI: ${{ secrets.HEXO_DEPLOY_PRI }}
        run: |
          mkdir -p ~/.ssh/
          echo "$HEXO_DEPLOY_PRI" &gt; ~/.ssh/id_rsa
          chmod 600 ~/.ssh/id_rsa
          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts
          ssh-keyscan gitlab.com &gt;&gt; ~/.ssh/known_hosts
          ssh-keyscan e.coding.net &gt;&gt; ~/.ssh/known_hosts
          ssh-keyscan gitee.com &gt;&gt; ~/.ssh/known_hosts
          git config --global user.name 'sito'
          git config --global user.email '133397418@qq.com'
          npm i
          npm i hexo@4.1.1 -g
      - name: gen
        run: |
          hexo clean
          hexo generate
          hexo deploy</code></pre></div></figure>
<ol start="4">
<li>将你的源码推送到 <code>GitHub</code> 上，你的博客一会就会自动更新了。</li>
</ol>
<h2 id="Hexo-Gitlab-CI-CD自动部署">Hexo Gitlab CI/CD自动部署</h2>
<p>啥都不说，直接上代码，请参考 Gitlab 官方项目 <a target="_blank" rel="noopener" href="https://gitlab.com/pages/hexo">Gitlab hexo</a></p>
<p>更多关于 Gitlab CICD 介绍，请看下面文章</p>
<blockquote>
<p><a href="/posts/1879721e/">CI/CD与Git Flow与GitLab</a></p>
</blockquote>
<h2 id="vercel-部署">vercel 部署</h2>
<blockquote>
<p>jsdelivr被封了，怎么办？vercel 部署可以加速访问</p>
</blockquote>
<h3 id="为什么使用-vercel">为什么使用 vercel</h3>
<ul>
<li>国内 <code>Github Pages</code> 速度较慢。</li>
<li><code>vercel</code> 速度快且能够自定义域名，能实现和 <code>Github Pages</code> 一样的效果</li>
</ul>
<blockquote>
<p>vercel 官方地址：<a target="_blank" rel="noopener" href="https://vercel.com/">vercel.com/</a></p>
</blockquote>
<h3 id="如何部署">如何部署</h3>
<ul>
<li>首先注册一个账号</li>
<li>注册成功后进入页面，点击 <code>News Project</code></li>
</ul>
<p><img src="https://cimg1.17lai.site/data/2022/09/04/20220904114329.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="img"></p>
<ul>
<li>然后通过绑定的 <code>github</code> 或者 <code>gitlab</code> 导入需要部署的项目</li>
</ul>
<p><img src="https://cimg1.17lai.site/data/2022/09/04/20220904114329-1.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="img"></p>
<ul>
<li>如果导入的项目是打包好的静态页，在 <code>Build and Output Settings</code> 的 <code>override</code> 都勾上，表示不执行它的默认命令。</li>
</ul>
<p><img src="https://cimg1.17lai.site/data/2022/09/04/20220904114329-2.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="img"></p>
<ul>
<li>点击 <code>deployed</code> 进行部署，如果部署失败可以查看报错信息是不是上一步的某些选项没有覆盖。部署成功后会进入如图所示的界面</li>
</ul>
<p><img src="https://cimg1.17lai.site/data/2022/05/17/20220517211315.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="img"></p>
<h3 id="如何自定义域名">如何自定义域名</h3>
<ul>
<li>腾讯云域名地址：<a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/domain">console.cloud.tencent.com/domain</a></li>
<li><code>vercel</code> 静态页挂载地址：</li>
<li>进入到 setting 中可对项目进行一些设置，如项目名称</li>
</ul>
<p><img src="https://cimg1.17lai.site/data/2022/05/17/20220517211622.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="vercel 自定义域名"></p>
<ul>
<li>下面演示如何自定义域名，默认情况下部署成功后 <code>vercel</code> 会给你生成一个默认的域名，如果想要修改成自己的域名可将域名名称修改成自己的。</li>
<li>当选择修改成自己的域名名称后，<code>vercel</code> 会检查域名指向的 <code>DNS</code> 对不对，如果不对的话会提示你域名的 DNS 应该如何配置，按照 <code>vercel</code> 提示的 <code>DNS</code> 信息</li>
</ul>
<p>在自己的域名的 <code>DNS</code> 配置中进行配置，如图</p>
<p><img src="https://cimg1.17lai.site/data/2022/05/17/20220517205923-5.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="img"></p>
<h3 id="配置多个域名">配置多个域名</h3>
<p>对其他新增的域名选择重定向到自己的主域名即可</p>
<p><img src="https://cimg1.17lai.site/data/2022/05/17/20220517211716.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="vercel 多域名配置"></p>
<h3 id="自定义Header缓存时间">自定义Header缓存时间</h3>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://vercel.com/docs/project-configuration#project-configuration/headers">vercel.com/docs</a></p>
<p><strong>使用Vercel必备配置，本地缓存加速访问！</strong></p>
</blockquote>
<p><code>vercel.json</code></p>
<figure><div class="code-area"><pre class="line-numbers language-json" data-language="json"><code class="language-json">{
  "headers": [
    {
      "source": "/sw.js",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=0, must-revalidate"
        }
      ]
    },
    {
      "source": "(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, s-maxage=86400, max-age=86400"
        }
      ]
    }
  ]
}</code></pre></div></figure>
<h3 id="Vercel自定义404">Vercel自定义404</h3>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://vercel.com/guides/custom-404-page">learn how to customize the 404 page</a>.</p>
</blockquote>
<h2 id="cloudflare-Pages-部署">cloudflare Pages 部署</h2>
<p>jsdelivr被封了，怎么办？cloudflare Pages 部署可以加速访问</p>
<blockquote>
<p><strong>强烈推荐！</strong></p>
<p>全球CDN，静态加速，可以说是最佳部署方案！就是有每日100000次请求限制！可以使用dnspod多线路负载均衡来帮助分流。</p>
</blockquote>
<blockquote>
<p>官网 <a target="_blank" rel="noopener" href="https://dash.cloudflare.com/">cloudflare </a> 首先注册一个账号</p>
</blockquote>
<p><img src="https://cimg1.17lai.site/data/2022/05/17/20220517210709.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="cloudflare"></p>
<p><img src="https://cimg1.17lai.site/data/2022/05/17/20220517210803.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="cloudflare page 连接 github"></p>
<p><img src="https://cimg1.17lai.site/data/2022/05/17/20220517210852.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="cloudflare page 选择仓库"></p>
<p><img src="https://cimg1.17lai.site/data/2022/05/17/20220517211145.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="cloudflare page 自定义域名"></p>
<blockquote>
<p>错过了CloudFlare Partner的时代，官方的CloudFlare for SaaS也提供了一种更灵活的CNAME接入方式</p>
<p><a target="_blank" rel="noopener" href="https://blog.cloudflare.com/zh-cn/waf-for-saas-zh-cn/">https://blog.cloudflare.com/zh-cn/waf-for-saas-zh-cn/</a></p>
</blockquote>
<h2 id="以-token-方式部署到-Github">以 token 方式部署到 Github</h2>
<figure><div class="code-area"><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">deploy:
  type: git
  repo:
    github:
      url: &lt;repository url&gt;
      branch: [branch]
      token: ''
  message: [message]
  name: [git user]
  email: [git email]
  extend_dirs: [extend directory]
  ignore_hidden: false # default is true
  ignore_pattern: regexp  # whatever file that matches the </code></pre></div></figure>
<h2 id="travis-自动部署配置">travis 自动部署配置</h2>
<blockquote>
<p>travis是第三方CICD服务，比action更加强大，下面只是参考，请查阅travis 文档，并结合自己的环境修改！</p>
</blockquote>
<figure><div class="code-area"><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">sudo: false
language: node_js
node_js:
- 10.16.3
cache: npm
branches:
  only:
  - master # build master branch only

env:
  global:
  - GIT_USER: appotry
  - HEXO_BACKUP_REPO: github.com/appotry/hexo-backup.git
  - HEXO_THEME_REPO: github.com/appotry/hexo-theme-matery.git
  - GITHUB_PAGES_REPO: github.com/appotry/hexo.github.io.git
  - APPOTRY_REPO: github.com/appotry/hexo.git

before_install:
- export TZ='Asia/Shanghai'
- npm install hexo -g
- npm install gulp-cli -g

install:
- npm install

script:
- git clone https://${HEXO_THEME_REPO} themes/next
- git clone https://${GIT_USER}:${GITHUB_TOKEN}@${HEXO_BACKUP_REPO} hexo-backup
- mv hexo-backup/source .
- rm -rf source/private
- npm run build

after_success:
- git config --global user.name "appotry"
- git config --global user.email "email@qq.com"
- git clone https://${GIT_USER}:${GITHUB_TOKEN}@${GITHUB_PAGES_REPO} voidking
- unalias cp
- cp -rf public/. 17lai.blog
- cd 17lai.blog
- git add .
- git commit -m "Travis CI Auto Builder"
- git push --force --quiet "https://${GIT_USER}:${GITHUB_TOKEN}@${GITHUB_PAGES_REPO}" master:master</code></pre></div></figure>
<h2 id="利用-GitLab-实现-Hexo-博客的-CI-CD">利用 GitLab 实现 Hexo 博客的 CI/CD</h2>
<p>Portainer 提供了对服务在线更新的 WebHook，所以基于 GitLab 自带的 CI/CD 功能实现 Hexo 博客的持续部署，就非常轻松了。</p>
<p>CI/CD 其实本质上是一套流程，流程规则可以自行定义。在本文研究的主题下，流程分为三步：第一步是编译 Hexo 博客并生成静态文件；第二步是将静态文件打包成可提供 Web 服务的镜像；第三步则是通过 Portainer 的钩子触发服务更新。</p>
<p><code>.gitlab-ci.yml</code></p>
<figure><div class="code-area"><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">stages:
  - compile
  - build
  - deploy

# CONTAINER_RELEASE_IMAGE 根据自己的仓库名修改
variables:
  DOCKER_HOST: tcp://docker:2375
  DOCKER_DRIVER: overlay2
  CONTAINER_RELEASE_IMAGE: registry.gitlab.com/xxx/xxx:latest

compile:
  stage: compile
  image: node:lts-alpine
  script:
    - npm install
    - ./node_modules/hexo/bin/hexo generate
  artifacts:
    paths:
      - public/
    expire_in: 20 minutes

build:
  stage: build
  image: docker:stable
  services:
    - docker:dind
  script:
    - docker login -u gitlab-ci-token -p $CI_JOB_TOKEN registry.gitlab.com
    - docker info
    - docker build -f ./Dockerfile -t $CONTAINER_RELEASE_IMAGE public
    - docker push $CONTAINER_RELEASE_IMAGE

# 根据自己的钩子修改下方的 URL
deploy:
  stage: deploy
  script:
    - curl https://xxx.xxx.xxx/api/webhooks/xxx -X POST
</code></pre></div></figure>
<p>为了保证服务更新的成功率，可以在 <code>deploy</code> 环节加个错误判断和重试次数，具体的看 GitLab 官方文档即可。</p>
<p>下面给出我的 Dockerfile 文件，供参考。</p>
<figure><div class="code-area"><pre class="line-numbers language-docker" data-language="docker"><code class="language-docker">FROM nginx:alpine

COPY . /usr/share/nginx/html

RUN chmod 777 /usr/share/nginx/html -R \
    &amp;&amp; sed -i 's/#error_page  404/error_page  404/' /etc/nginx/conf.d/default.conf</code></pre></div></figure>
<h2 id="DNSPOD-多线路负载均衡">DNSPOD 多线路负载均衡</h2>
<blockquote>
<p>DNSPOD官网 <a target="_blank" rel="noopener" href="https://console.dnspod.cn/dns/list">console.dnspod.cn</a></p>
</blockquote>
<p><img src="https://cimg1.17lai.site/data/2022/05/17/20220517212142.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="dnspod"></p>
<p><img src="https://cimg1.17lai.site/data/2022/05/17/20220517212323.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="dnspod 多线路负载均衡"></p>
<blockquote>
<p>dnspod对cname数目有限制。</p>
<p>这里使用权重来分配各条线路访问比例！</p>
</blockquote>
<h2 id="乒乓部署">乒乓部署</h2>
<blockquote>
<p>也可以叫旋转门部署。</p>
<p>解决调试博客插件，修改半成品文章时部署到云端会影响正在查阅博客的用户的问题！</p>
<p>使用Docker版本本地预览是很不错，但是 jsdelivr 版本发布需要在 Github 生成新 release 这时本地就不行了。乒乓部署可以解决这个问题！</p>
</blockquote>
<p>具体方法就是同时部署到两个地方A和B，博客域名在两个服务器之间切换。这里以 Vercel 为例</p>
<h3 id="准备工作：">准备工作：</h3>
<ul>
<li>创建2个Github仓库，对应服务器A和B的部署</li>
<li>建立两个服务器A和B，分别关联两个 Github 仓库</li>
<li>把调试完毕的代码上传到两个仓库</li>
<li>这时通过服务器A和B都是可以正常浏览的</li>
</ul>
<h3 id="要调试的时候：">要调试的时候：</h3>
<ul>
<li>发布到A之前，把博客域名转移到服务器B</li>
<li>在服务A做一些调试，在线 debug 工作</li>
<li>特别是在线 <a target="_blank" rel="noopener" href="https://pagespeed.web.dev/">pageseed</a> 测试调优，这种事必备方法。简单不需要新的 jsdelivr 版本调试本地 <a target="_blank" rel="noopener" href="https://github.com/appotry/docker-hexo">docker-hexo</a> 调试即可！</li>
</ul>
<p><img src="https://cimg1.17lai.site/data/2022/08/20/20220820181601.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="输入想转移的域名"></p>
<p><img src="https://cimg1.17lai.site/data/2022/08/20/20220820181557.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload alt="点击确认转移域名"></p>
<h3 id="调试完毕后：">调试完毕后：</h3>
<ul>
<li>把域名切换到服务器A</li>
<li>同时部署到服务器B，服务器B同步A的部署内容，以便下次备用</li>
</ul>
<blockquote>
<p>总结就是服务器A现行，服务器B做后备，调试发布使用A，调试A的时候B就顶上前台！</p>
<p>这样，调试和正常部署网络服务两不误。是不是感觉自己是个大聪明！</p>
</blockquote>
<h2 id="i-class-fa-solid-fa-school-i-系列教程"><i class="fa-solid fa-school"></i><strong>系列教程</strong></h2>
<p><a href="/atom.xml"><i class="fa-solid fa-square-rss"></i>全部文章RSS订阅</a></p>
<h3 id="i-class-fa-sharp-fa-solid-fa-blog-i-Hexo系列"><i class="fa-sharp fa-solid fa-blog"></i><strong>Hexo系列</strong></h3>
<p><a href="/categories/hexo/atom.xml"><i class="fa-solid fa-square-rss"></i><strong>HexoRSS分类订阅</strong></a></p>
<p>[三万字教程]基于Hexo的matery主题搭建博客并深度优化完全一站式教程</p>
<ul>
<li><a href="/posts/40300608/">Hexo Docker环境与Hexo基础配置篇</a></li>
<li><a href="/posts/4d8a0b22/">hexo博客自定义修改篇</a></li>
<li><a href="/posts/9b056c86/">hexo博客网络优化篇</a></li>
<li><a href="/posts/5311b619/">hexo博客增强部署篇</a></li>
<li><a href="/posts/4a2050e2/">hexo博客个性定制篇</a></li>
<li><a href="/posts/84b4059a/">hexo博客常见问题篇</a></li>
<li><a href="/posts/253706ff/">hexo博客博文撰写篇之完美笔记大攻略终极完全版</a></li>
<li><a href="/posts/cf0f47fd/">Hexo Markdown以及各种插件功能测试</a></li>
</ul>
<blockquote>
<ul>
<li>markdown 各种其它语法插件，latex公式支持，mermaid图表，plant uml图表，URL卡片，bilibili卡片，github卡片，豆瓣卡片，插入音乐和视频，插入脑图，插入PDF，嵌入iframe</li>
</ul>
</blockquote>
<ul>
<li><a href="/posts/217ccdc1/">在 Hexo 博客中插入 ECharts 动态图表</a></li>
<li><a href="/posts/546887ac/">使用nodeppt给hexo博客嵌入PPT演示</a></li>
<li><a href="/posts/e922fac8/">Vercel部署高级用法教程</a></li>
</ul>
<h3 id="i-class-fa-solid-fa-clipboard-i-笔记系列"><i class="fa-solid fa-clipboard"></i><strong>笔记系列</strong></h3>
<p><a href="/categories/note/atom.xml"><i class="fa-solid fa-square-rss"></i><strong>Note分类RSS订阅</strong></a></p>
<ul>
<li><a href="/posts/a8535f26/">完美笔记进化论</a></li>
<li><a href="/posts/253706ff/">hexo博客博文撰写篇之完美笔记大攻略终极完全版</a></li>
<li><a href="/posts/e6086437/">Joplin入门指南&amp;实践方案</a></li>
<li><a href="/posts/45f878cd/">替代Evernote免费开源笔记Joplin-网盘同步笔记历史版本Markdown可视化</a></li>
<li><a href="/posts/92d347d6/">Joplin 插件以及其Markdown语法。All in One!</a></li>
<li><a href="/posts/e3ee7f8b/">Joplin 插件使用推荐</a></li>
<li><a href="/posts/1802a8a7/">为知笔记私有化Docker部署</a></li>
</ul>
<h3 id="i-class-fa-solid-fa-book-i-Gitbook使用系列"><i class="fa-solid fa-book"></i><strong>Gitbook使用系列</strong></h3>
<p><a href="/categories/gitbook/atom.xml"><i class="fa-solid fa-square-rss"></i>Gitbook分类RSS订阅</a></p>
<ul>
<li><a href="/posts/7fe86002/">GitBook+GitLab撰写发布技术文档-Part1:GitBook篇</a></li>
<li><a href="/posts/7790e989/">GitBook+GitLab撰写发布技术文档-Part2:GitLab篇</a></li>
<li><a href="/posts/d6bad1e5/">自己动手制作电子书的最佳方式（支持PDF、ePub、mobi等格式）</a></li>
</ul>
<h3 id="i-class-fa-brands-fa-square-gitlab-i-Gitlab-使用系列"><i class="fa-brands fa-square-gitlab"></i><strong>Gitlab 使用系列</strong></h3>
<p><a href="/categories/gitlab/atom.xml"><i class="fa-solid fa-square-rss"></i><strong>Gitlab RSS 分类订阅</strong></a></p>
<ul>
<li><a href="/posts/acc13b70/"><strong>Gitlab的安装及使用教程完全版</strong></a></li>
<li><a href="/posts/29a820b3/">破解Gitlab EE</a></li>
<li><a href="/posts/d08eb7b/">Gitlab的安装及使用</a></li>
<li><a href="/posts/1879721e/">CI/CD与Git Flow与GitLab</a></li>
</ul>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://blog.17lai.site" rel="external nofollow noreferrer">夜法之书</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://blog.17lai.site/posts/5311b619/">https://blog.17lai.site/posts/5311b619/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a>
                    许可协议。转载请注明来源
                    <a href="https://blog.17lai.site" target="_blank">夜法之书</a>
                    !
                </span>
            </div>
        
    </div>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/hexo/">
                                    <span class="chip bg-color">hexo</span>
                                </a>
                            
                                <a href="/tags/github/">
                                    <span class="chip bg-color">github</span>
                                </a>
                            
                                <a href="/tags/matery/">
                                    <span class="chip bg-color">matery</span>
                                </a>
                            
                                <a href="/tags/cdn/">
                                    <span class="chip bg-color">cdn</span>
                                </a>
                            
                                <a href="/tags/seo/">
                                    <span class="chip bg-color">seo</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <div id="article-share">
    
        <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    
    
</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close" href="javascript:;" aria-label="打赏作者"><i class="fa fa-times-circle"></i></a>
            <p class="reward-title">码字辛苦，打赏作者！</p>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias_webp/reward/alipay.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload loading="lazy" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias_webp/reward/wechat.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload loading="lazy" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- webpush按钮 -->
<div class="webpush-dingyue" style="margin: 10px 0; text-align: center">
    <div id="webpushr-subscription-button"  data-size="small"
                    data-button-text="订阅博文" data-subscriber-count-text="个用户已订阅"
                    data-background-color="#6295d0">
    </div>
</div>

<script>
  $(function() {
    $( ".reward-tabs" ).tabs({
      event: "mouseover"
    });
  });
</script>

            
        </div>
    </div>

    <div id="comments" lazyload>




    <div class="card waline-card" data-aos="fade-up">
  <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
      <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
      <span>评论</span>
  </div>
  <div id="waline" class="card-content" style="display: grid">
  </div>
</div>















<!-- 直达评论 -->
<div id="to_comment" class="comment-scroll">
  <a class="btn-floating btn-large waves-effect waves-light" 
        href="javascript:;" 
    title="直达评论">
    <i class="fas fa-comments"></i>
  </a>
</div>

</div>

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/posts/4a2050e2/">
                    <div class="card-image card-image-V">
                        <div class="box-content">
                            <p class="title">阅读全文</p>
                            <span class="post" style="width: 180px">基于Hexo的matery主题搭建博客个性定制篇5</span>
                        </div>
                        
                        <img src="/medias_webp/cover/hexo.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload class="responsive-img" alt="基于Hexo的matery主题搭建博客个性定制篇5">
                        
                        <span class="card-title title-V">基于Hexo的matery主题搭建博客个性定制篇5</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            我想对我的博客进行各种个性定制，增加各种额外功能，评论邮件提醒，个人相册，图片懒加载，看板娘，黑暗模式等等，在这里啥都有
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-03-27
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/hexo/" class="post-category">
                                    hexo
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/hexo/">
                        <span class="chip bg-color">hexo</span>
                    </a>
                    
                    <a href="/tags/github/">
                        <span class="chip bg-color">github</span>
                    </a>
                    
                    <a href="/tags/matery/">
                        <span class="chip bg-color">matery</span>
                    </a>
                    
                    <a href="/tags/cdn/">
                        <span class="chip bg-color">cdn</span>
                    </a>
                    
                    <a href="/tags/seo/">
                        <span class="chip bg-color">seo</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/posts/9b056c86/">
                    <div class="card-image  card-image-V">
                        <div class="box-content">
                            <p class="title">阅读全文</p>
                            <span class="post" style="width: 180px">基于Hexo的matery主题搭建博客网络优化篇3</span>
                        </div>
                        
                        <img src="/medias_webp/cover/hexo.webp" srcset="/medias_webp/loading2.svg" loading="lazy" lazyload class="responsive-img" alt="基于Hexo的matery主题搭建博客网络优化篇3">
                        
                        <span class="card-title title-V">基于Hexo的matery主题搭建博客网络优化篇3</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            有了一个独立博客后，访问速度很忙怎么办？这时候你需要上各种各样的优化手段了，比喻CDN，service worker,页面压缩技术，SEO优化等等。
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-03-27
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/hexo/" class="post-category">
                                    hexo
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/hexo/">
                        <span class="chip bg-color">hexo</span>
                    </a>
                    
                    <a href="/tags/github/">
                        <span class="chip bg-color">github</span>
                    </a>
                    
                    <a href="/tags/matery/">
                        <span class="chip bg-color">matery</span>
                    </a>
                    
                    <a href="/tags/cdn/">
                        <span class="chip bg-color">cdn</span>
                    </a>
                    
                    <a href="/tags/seo/">
                        <span class="chip bg-color">seo</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>

    </div>
    
    
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
    
        <div class="toc-widget card" >
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color" href="javascript:;" title="显示/隐藏目录">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
        style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2020-2023</span>
            
            <a href="/about" target="_blank">夜法之书</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
              <span id="translate">|&nbsp;繁/简：</span><a id="translateLink" href="javascript:translatePage();">繁</a>
            
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">490.2k</span>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            

            
                <span id="waline_container_site_pv"  style="display: none" >
                    &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                        <span class="waline-pageview-count" data-path="/" class="white-color"></span>
                </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
                <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2020";
                        var startMonth = "6";
                        var startDate = "28";
                        var startHour = "0";
                        var startMinute = "0";
                        var startSecond = "0";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);

                        // 区分是否有年份.
                        var language = 'zh-CN';
                        if (startYear === String(todayYear)) {
                            document.getElementById("year").innerHTML = todayYear;
                            var daysTip = 'This site has been running for ' + diffDays + ' days';
                            if (language === 'zh-CN') {
                                daysTip = '本站已运行 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                daysTip = '本站已運行 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = daysTip;
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            var yearsAndDaysTip = 'This site has been running for ' + diffYears + ' years and '
                                + diffDays + ' days';
                            if (language === 'zh-CN') {
                                yearsAndDaysTip = '本站已运行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = '本站已運行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                        }
                    }

                    calcSiteTime();
                </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/appotry" class="tooltipped" target="_blank" title="访问我的GitHub" aria-label="访问我的GitHub" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github fa-fw"></i>
    </a>



    <a href="https://hub.docker.com/u/bloodstar" class="tooltipped" target="_blank" title="访问我的DockerHub" aria-label="访问我的DockerHub" data-tooltip="访问我的DockerHub" data-position="top" data-delay="50">
        <i class="fab fa-docker fa-fw"></i>
    </a>





    <a href="mailto:andycrusoe@gmail.com" class="tooltipped" target="_blank" title="邮件联系我" aria-label="邮件联系我" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open fa-fw"></i>
    </a>





    <a href="https://twitter.com/firekingden" class="tooltipped" target="_blank" title="关注我的Twitter: https://twitter.com/firekingden" aria-label="关注我的Twitter" data-tooltip="关注我的Twitter: https://twitter.com/firekingden" data-position="top" data-delay="50">
        <i class="fab fa-twitter fa-fw"></i>
    </a>









    <a href="/atom.xml" class="tooltipped" target="_blank" title="RSS 订阅" aria-label="RSS 订阅" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss fa-fw"></i>
    </a>



</div>
    </div>
    
</footer>

<div class="progress-bar"></div>





  <canvas id="snowdown" style="position:fixed;top:0;left:0;width:100%;height:100%;z-index:100;pointer-events:none"></canvas>



    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <div class="search-input-container">
                <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                class="search-input">
            </div>
            <a class="close modal-close" href="javascript:;" title="关闭搜索"><span class="popup-btn-close" role="button">
                <i class="fa fa-times-circle"></i>
            </span></a>
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<!-- <script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script> -->
<script type="text/javascript">
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                                //str += "<a href='" + data_url + "' >" + "<p class=\"search-result\">" + match_content + "...</p>" + "</a>";
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    function startXMLSearch() {
        searchFunc('/search.xml', 'searchInput', 'searchResult');
    }

</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!" title="回到顶部">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <!-- Scripts -->
    


<script src="https://cdn.jsdelivr.net/npm/@materializecss/materialize@1.2.1/dist/js/materialize.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.min.js"></script>
<script src="/js/matery.js"></script>

<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <!-- <script src="https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/pageview.min.mjs"></script> -->
  <script type="module" async>
      var pagePath = window.location.pathname.replace(/\/$/,'') + '/';
      import { pageviewCount } from "https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/pageview.min.mjs";
        /**
        * 检测对象是否是空对象(不包含任何可读属性)。
        * 方法只既检测对象本身的属性，不检测从原型继承的属性。 
        * null与undefined区别：
        * 对已声明但未初始化的和未声明的变量执行typeof，都返回 "undefined" 。
        * null表示一个空对象指针，typeof操作会返回 "object" 。*/
      function isOwnEmpty(obj) {
        for (var name in obj) {
          if (obj.hasOwnProperty(name)) {
            return false;
          }
        } return true;
      }
      function upDatePageview() {
        const pvabort = pageviewCount({
          serverURL: 'https://waline.17lai.site',
          path: pagePath,
        });
        setTimeout(() => pvabort(), 2000);

        var wa_csp = "waline_container_site_pv";
        var ewacsp=document.getElementById(wa_csp);
        //ewacsp.style.display = 'inline';

        var wa_cpv = "waline_container_page_pv";
        var ewacpv=document.getElementById(wa_cpv);
        if( !ewacpv ){
          console.log("[waline]home page!");
        }else{
          if( isOwnEmpty(ewacpv.style) != true ){
            ewacpv.style.display = 'inline';
            console.log("[waline]update pageview count!");
          }else{
            console.log("[waline]ewacpv.style null!");
          }
        }
      }
      //upDatePageview();
      function delayupDatePageview() {
        setTimeout(function() { upDatePageview(); }, 3000);
        console.log("[waline]delay update comment count!");
      }
      delayupDatePageview();
  </script>
  

  
    <!-- <script src="https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/comment.min.mjs"></script> -->
    <script type="module" async>
      var pagePath = window.location.pathname.replace(/\/$/,'') + '/';
      import { commentCount } from "https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/comment.min.mjs";
      function upDateComment() {
        const cabort = commentCount({
          serverURL: 'https://waline.17lai.site',
          path: pagePath,
        });

        //alert("事件监听");
        setTimeout(() => cabort(), 3000);

        try {
          wa_ccc = "waline_container_comment_count";
          var ewaccc=document.getElementById(wa_ccc);
          ewaccc.style.display = 'inline';
        } catch(err) { console.log("[waline-count][Error] err") }
        console.log("[waline]update comment count!");
      }

      function delayUpDateComment() {
        setTimeout(function() { upDateComment(); }, 3000);
        console.log("[waline]delay update comment count!");
      }
      delayUpDateComment();
    </script>
    








  
  

  
  




  
    

  
  
    

  





<!-- 随机背景图片 -->

<script async>
  var windowWidth = $(window).width();
  var colorSchemaInitStorageKey = 'Matery_Color_Scheme_Now';
  var colorToggleButtonSelector = '#color-toggle-btn';
  var index;
  var img;
  var image;
  function getRandomBackgroundPic(scheme) {
    // base forest dark default neutral
    if ( scheme == 'dark' ) {
      //document.getElementsByClassName("lazy-background")[0].style.backgroundImage = 'url(/medias_webp/loading2-dark.svg)';
      index = Math.ceil(Math.random() * 17) - 1;
      img=[ "/medias_webp/featureimages/5.webp", "/medias_webp/featureimages/7.webp", "/medias_webp/featureimages/8.webp", "/medias_webp/featureimages/12.webp", "/medias_webp/featureimages/15.webp", "/medias_webp/featureimages/24.webp", "/medias_webp/featureimages/26.webp", "/medias_webp/featureimages/28.webp", "/medias_webp/featureimages/31.webp", "/medias_webp/featureimages/32.webp", "/medias_webp/featureimages/37.webp", "/medias_webp/featureimages/38.webp", "/medias_webp/featureimages/39.webp", "/medias_webp/featureimages/40.webp", "/medias_webp/featureimages/41.webp", "/medias_webp/featureimages/42.webp", "/medias_webp/featureimages/50.webp",];
      return 'dark';
    } else {
      //document.getElementsByClassName("lazy-background")[0].style.backgroundImage = 'url(/medias_webp/loading2.svg)';
      index = Math.ceil(Math.random() * 15) - 1;
      img=[ "/medias_webp/featureimages/0.webp", "/medias_webp/featureimages/6.webp", "/medias_webp/featureimages/8.webp", "/medias_webp/featureimages/17.webp", "/medias_webp/featureimages/18.webp", "/medias_webp/featureimages/22.webp", "/medias_webp/featureimages/23.webp", "/medias_webp/featureimages/26.webp", "/medias_webp/featureimages/29.webp", "/medias_webp/featureimages/48.webp", "/medias_webp/featureimages/49.webp", "/medias_webp/featureimages/1.webp", "/medias_webp/featureimages/13.webp", "/medias_webp/featureimages/14.webp", "/medias_webp/featureimages/16.webp",];
      return 'light';
    }
  }
  function setBackgroundPic() {
    // 注册切换模式事件
    var button = document.querySelector(colorToggleButtonSelector);
    if (button) {
      button.addEventListener('click', function() {
        getRandomBackgroundPic(getLS(colorSchemaInitStorageKey));
        image = new Image();
        image.onload = function () {
          document.getElementsByClassName("lazy-background")[0].style.backgroundImage = 'url(' + img[index] + ')';
          console.log( 'get background pic:' + index + ':' + img[index]);
        }
        image.src = img[index];
      });
    }
    return;
  }
  if (windowWidth > 1024 && Number(localStorage.viewCount) > 1 ) {
      try {
        getRandomBackgroundPic(getLS(colorSchemaInitStorageKey));
        document.getElementsByClassName("lazy-background")[0].style.backgroundImage = 'var(--loading-img)';
        //document.getElementsByClassName("lazy-background")[0].style.backgroundImage = img[index];
        image = new Image();
        image.onload = function () {
          document.getElementsByClassName("lazy-background")[0].style.backgroundImage = 'url(' + img[index] + ')';
          console.log( 'get background pic:' + index + ':' + img[index]);
        }
        image.src = img[index];
      } catch(err) { console.log("随机背景图片 error.") }
  }
  if (windowWidth > 1024 ) {
    setBackgroundPic();
  }
</script>


<script src="https://cdn.jsdelivr.net/npm/scrollprogress@3.0.2/dist/scrollProgress.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery-all.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-ui@1.13.2/dist/jquery-ui.min.js"></script>


    <script type="text/javascript" src="/js/tw_cn.js"></script>
    <script type="text/javascript">
      var defaultEncoding = 2; //网站编写字体是否繁体，1-繁体，2-简体
      var translateDelay = 0; //延迟时间,若不在前, 要设定延迟翻译时间, 如100表示100ms,默认为0
      var cookieDomain = "https://blog.17lai.site"; //Cookie地址, 一定要设定, 通常为你的网址
      var msgToTraditionalChinese = "繁"; //此处可以更改为你想要显示的文字
      var msgToSimplifiedChinese = "简"; //同上，但两处均不建议更改
      var translateButtonId = "translateLink"; //默认互换id
      translateInitilization();
    </script>



  <div class="waifu">
    <div class="waifu-tips"></div>
    <canvas id="live2d" class="live2d"></canvas>
    <div class="waifu-tool">
        <span class="fa fa-lg fa-home"></span>
        <span class="fa fa-lg fa-comment"></span>
        <span class="fa fa-lg fa-user-circle"></span>
        <span class="fa fa-lg fa-street-view"></span>
        <span class="fa fa-lg fa-camera-retro"></span>
        <span class="fa fa-lg fa-info-circle"></span>
        <span class="fa fa-lg fa-times-circle"></span>
    </div>
</div>




  <script async src="https://cdn.jsdelivr.net/npm/instant.page@5/instantpage.min.js" type="module"></script>


<script type="text/javascript">
    //document.addEventListener('DOMContentLoaded', (event) => {
    //});
    //用户访问页面计数
    if (localStorage.getItem('viewCount')) {
        localStorage.viewCount=Number(localStorage.viewCount) +1;
        console.log('Welcome to visited again!');
    } else {
        localStorage.setItem('viewCount', '1');
        console.log('Welcome! New Reader!');
    }

</script>

<script type="text/javascript">
    var themeStorage=window.localStorage;
    if(! window.localStorage){
        //alert("浏览器不支持localstorage");
        console.log("浏览器不支持localstorage");
        //return false;
    }else{
        //主逻辑业务
        console.log("设定waline count title");
        themeStorage.setItem("title", "夜法之书");
    }
</script>







<!-- Baidu Push -->



  <script src="https://cdn.jsdelivr.net/npm/jquery-ui@1.13.2/dist/jquery-ui.min.js"></script>
<script type="text/javascript">
    // 只在桌面版网页启用特效 localStorage访问计数决定是否开启看板娘
    var windowWidth = $(window).width();
    if (windowWidth > 1024 && Number(localStorage.viewCount) > 1 ) {
        //动态加载live2d
        try {
            //$("<link>").attr({href: "/libs/live2d/waifu.css", rel: "stylesheet", type: "text/css"}).appendTo('head');
            //$('body').append('<div class="waifu"><div class="waifu-tips"></div><canvas id="live2d" class="live2d"></canvas><div class="waifu-tool"><span class="fa fa-lg fa-home"></span><span class="fa fa-lg fa-comment"></span><span class="fa fa-lg fa-user-circle"></span><span class="fa fa-lg fa-street-view"></span><span class="fa fa-lg fa-camera-retro"></span><span class="fa fa-lg fa-info-circle"></span><span class="fa fa-lg fa-times"></span></div></div>');
            $.ajax({url: "/libs/live2d/waifu-tips.js", dataType:"script", cache: true, success: function() {
                $.ajax({url: "/libs/live2d/live2d.js", dataType:"script", cache: true, success: function() {
                    /* 可直接修改部分参数 */
                    live2d_settings['modelId'] = 2;                 // 默认模型 ID
                    live2d_settings['modelTexturesId'] = 17;         // 默认材质 ID
                    live2d_settings['modelStorage'] = true;         // 存模型 ID
                    live2d_settings['canCloseLive2d'] = true;       // 隐藏 关闭看板娘 按钮
                    live2d_settings['canTurnToHomePage'] = false;   // 隐藏 返回首页 按钮
                    live2d_settings['waifuDraggable'] = 'axis-x';   // 拖拽样式
                    live2d_settings['waifuDraggableRevert'] = true; // 拖拽后是否回复原位置
                    /* 在 initModel 前添加 */
                    initModel("/libs/live2d/waifu-tips.json");
                }});
            }});
        } catch(err) { console.log("[Live2d][Error] JQuery is not defined.") }
    }

</script>





    



  <!-- <script src="https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/waline.min.js"></script> -->
<script>
  var pagePath = window.location.pathname.replace(/\/$/,'') + '/';
  function initWaline() {
    console.log('[WALINE]init waline');
    Waline.init({
      el: '#waline',
      locale: {
        "lang":"zh-cn",
        "nick":"🧊 昵称",
        "mail":"📧 邮箱",
        "link":"🔗 网址",
        "placeholder":"🤣一起来玩，留下你的足迹吧~。评论支持邮箱回复通知！📧\r\n 🚀支持注册登录，并新增支持Github登录(⊙o⊙)！💖\r\n 💣请文明评论哦禁止恶意评论🈲\r\n ⚠️公开网络空间，请不要发表任何包含个人或其他人的隐私信息⛔",
        "sofa":"🌌 来发评论吧~",
        "submit":"发送留言",
        "comment":"评论",
        "more":"读取更多评论",
        "uploading":"正在上传",
        "login":"登录",
        "admin":"博主",
        "word":"个字",
        "nickError":"昵称不能少於 3 个字符",
        "mailError":"请填写正确的电子邮箱",
        "wordHint":"评论字数应在 $0 到 $1 字之间！\\n目前字数：$2",
        "seconds":"秒前",
        "minutes":"分钟前",
        "hours":"小时前",
        "days":"天前",
        "now":"就在刚刚",
        "reply":"回复",
        "canaleReply":"取消回复",
        "emoji":"表情",
        "uploadImage":"上传图片",
        "logout":"退出登录",
        "preview":"预览",
        "level0": '炼体',
        "level1": '炼气',
        "level2": '筑基',
        "level3": '金丹',
        "level4": '元婴',
        "level5": '化神',
        "reactionTitle": '码字辛苦！客官不评论一下么？',
        "reaction0": '赞一个',
        "reaction1": '踩一下',
        "reaction2": '有点酷',
        "reaction3": '看不懂',
        "reaction4": '啥玩意',
        "reaction5": '想睡觉',
      },
      serverURL: 'https://waline.17lai.site',
      //path: "",
      path: pagePath,
      avatar: 'mp',
      emoji: [
        '//cdn.jsdelivr.net/gh/walinejs/emojis@latest/weibo',
      ],
      lang: 'zh-CN',
      dark: 'html[data-user-color-scheme="dark"]',
      login: 'enable',
      wordLimit: '1000',
      pageSize: '10',
      highlighter: 'hanabi',
      pageview: false,
      comment: true,
      reaction: true,
      imageUploader: false,
      meta: ['nick', 'mail', 'link'],
      recaptchaV3Key: '6LeUY0MiAAAAABNBvi6m4PcCtKkv_W6x-_YhTb6n',
      requiredMeta: ['nick', 'mail'],
    });

    if (true) {

      function upDateComment() {
          const cabort = Waline.commentCount({
            serverURL: 'https://waline.17lai.site',
            path: pagePath,
          });

          //alert("事件监听");
          setTimeout(() => cabort(), 2000);

          try {
            wa_ccc = "waline_container_comment_count";
            var ewaccc=document.getElementById(wa_ccc);
            ewaccc.style.display = 'inline';
          } catch(err) { console.log("[waline-count][Error] err") }
          console.log("[waline]update comment count!");
      }

      function delayUpDateComment() {
        setTimeout(function() { upDateComment(); }, 5000);
        console.log("[waline]delay update comment count!");
      }

      var btnsubmit = document.body.getElementsByClassName('wl-btn primary');

      if(typeof btnsubmit[0] != "undefined"){
          if(typeof window.addEventListener != "undefined"){
              // 表示不是IE，支持addEventListener方法
              btnsubmit[0].addEventListener('click',delayUpDateComment,false);
          }else{
              btnsubmit[0].attachEvent("onclick",delayUpDateComment);
          }
          upDateComment();
      }else{
          console.log("[waline]没有开启waline!");
      }
    }
    AOS.refresh();
    progressBarInit();
  }
  function loadWaline() {
    try {
      $.ajax({
        url:"https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/waline.min.css",
        dataType:"text/css",
        cache: true,
        success:function(data){
          $("head").append("<style>" + data + "</style>");
          //loading complete code here
        },
        error: function(error) {
          console.log(error);
        }
      });
      $.ajax({url: "https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/waline.min.js", dataType:"script", cache: true, success: function() {
        initWaline();
      }});
    } catch(err) { console.log("[SHARE][Error] JQuery is not defined.") }

  }

  //https://blog.skk.moe/post/prevent-disqus-from-slowing-your-site/
  // 通过检查 window 对象确认是否在浏览器中运行
  var runningOnBrowser = typeof window !== "undefined";
  // 通过检查 scroll 事件 API 和 User-Agent 来匹配爬虫
  var isBot = runningOnBrowser && !("onscroll" in window) || typeof navigator !== "undefined" && /(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent);
  // 检查当前浏览器是否支持 IntersectionObserver API
  var supportsIntersectionObserver = runningOnBrowser && "IntersectionObserver" in window;

  // 一个小 hack，将耗时任务包裹在 setTimeout(() => { }, 1) 中，可以推迟到 Event Loop 的任务队列中、等待主调用栈清空后才执行，在绝大部分浏览器中都有效
  // 其实这个 hack 本来是用于优化骨架屏显示的。一些浏览器总是等 JavaScript 执行完了才开始页面渲染，导致骨架屏起不到降低 FCP 的优化效果，所以通过 hack 将耗时函数放到骨架屏渲染完成后再进行。
  setTimeout(function () {
    if (!isBot && supportsIntersectionObserver) {
      // 当前环境不是爬虫、并且浏览器兼容 IntersectionObserver API
      var waline_observer = new IntersectionObserver(function(entries) {
        // 当前视窗中已出现 waline 评论框所在位置
        if (entries[0].isIntersecting) {
          //console.log('[WALINE] start waline IntersectionObserver');
          // 加载 waline
          loadWaline();
          // 停止当前的 Observer
          waline_observer.disconnect();
        }
      }, { threshold: [0] });
      // 设置让 Observer 观察 #waline 元素
      //waline_observer.observe(document.getElementById('reprint-statement'));
      //waline_observer.observe(document.getElementById('waline'));
      waline_observer.observe(document.getElementById('comments'));
    } else {
      // 当前环境是爬虫、或当前浏览器其不兼容 IntersectionObserver API
      // 直接加载 waline
      loadWaline();
      //console.log('[WALINE] start waline');
    }
  }, 1);
</script>














<script>
  AOS.refresh(); //高度改变 刷新视图
  progressBarInit();
</script>



    <script type="text/javascript">
        postTimeliness();
        inPageScroll();
    </script>
    
<script>
  var tocSchemaStorageKey = window.location.pathname.replace(/\/$/,'') + '/toc';
  function setLS(k, v) {
    try {
        localStorage.setItem(k, v);
    } catch (e) {}
  }
  function getLS(k) {
    try {
        return localStorage.getItem(k);
    } catch (e) {
        return null;
    }
  }
  if (!getLS(tocSchemaStorageKey)) {
    
      setLS(tocSchemaStorageKey, 'show');
    
  }
</script>
<script src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js"></script>
<script>
    $(function () {
      var windowWidth = $(window).width();
      //低分辨率不显示目录
      if (windowWidth < 800 ) {
        return true;
      }
    //$(document).ready(function(){
        var rootElement = document.documentElement;
        var toc = jQuery('#toc-aside .toc-widget');
        if (toc.length === 0 || !window.tocbot) { return; }

        var tocHeadingsOffset = jQuery('#headNav').height() + 10;
        var tocSchemaStorageKey = window.location.pathname.replace(/\/$/,'') + '/toc';
        var tocUserSet = getLS(tocSchemaStorageKey);
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        let isTocInitial=false;

        function getUserSetTocAndSetClass(scheme) {
            if (tocUserSet === 'show') {
                console.log("Current page toc: show");
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
                return true;
            } else if (tocUserSet === 'hide') {
                console.log("Current page toc: hide");
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
                return false;
            } else {
                console.log("Current page toc: unknow, use default");
            }
        }

        function getUserSetToc(scheme) {
            if (tocUserSet === 'show') {
                console.log("Current page toc: show");
                return true;
            } else if (tocUserSet === 'hide') {
                console.log("Current page toc: hide");
                return false;
            } else {
                console.log("Current page toc: unknow, use default");
            }
        }
        //https://juejin.cn/post/7018372558999257102
        //var toc = jQuery('#toc-aside .toc-widget');
        var activeItem = toc[0].getElementsByClassName("is-active-li");
        var titleItem = toc[0].getElementsByClassName("toc-title");
        function UpdateVisibleToc() {
            if (toc.length > 0) {
                //超出显示时滚动到中间 显示高度大于容器高度 跳转到中间
                if (activeItem.length > 0 && activeItem[0].offsetTop > toc[0].offsetHeight ) {
                    toc[0].scrollTop = activeItem[0].offsetTop - (toc[0].offsetHeight / 2);
                }
                //用户滚动超出显示时恢复正常显示 显示高度小于容器高度 恢复默认显示
                if (activeItem.length > 0 && toc[0].offsetHeight > activeItem[0].offsetHeight) {
                    toc[0].scrollTop = 0;
                }
                //用户往上滚动超出显示范围时 显示高度大于容器高度 跳转到中间
                if (activeItem.length > 0 && activeItem[0].offsetTop > toc[0].offsetHeight) {
                    toc[0].scrollTop = activeItem[0].offsetTop - (toc[0].offsetHeight / 2);
                }
            }
        }

        window.onscroll = () => UpdateVisibleToc();

        function initMateryToc() {
            tocbot.init({
                tocSelector     : '#toc-content',
                contentSelector : '#articleContent',

                headingsOffset: -tocHeadingsOffset,
                scrollSmoothOffset: -tocHeadingsOffset,
                //scrollEndCallback: e => UpdateVisibleToc(),
                collapseDepth   : Number('0'),
                scrollSmooth    : true,
                headingSelector : 'h2, h3, h4, h5, h6'
            });
            if (toc.find('.toc-list-item').length > 0) {
                toc.css('visibility', 'visible');
            }
        }

        
          if (getUserSetTocAndSetClass(getLS(tocSchemaStorageKey))) {
            initMateryToc();
          }
        

        // Set scroll toc fixed. banner 高度60vh
        let tocHeight = parseInt($(window).height() * 0.6 - 64);
        let $tocWidget = $('#toc-aside .toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
            /* 修复文章卡片 div 的宽度. */
            let fixPostCardWidth = function (srcId, targetId) {
                let srcDiv = $('#' + srcId);
                if (srcDiv.length === 0) {
                    return;
                }

                let w = srcDiv.width();
                if (w >= 450) {
                    w = w + 21;
                } else if (w >= 350 && w < 450) {
                    w = w + 18;
                } else if (w >= 300 && w < 350) {
                    w = w + 16;
                } else {
                    w = w + 14;
                }
                $('#' + targetId).width(w);
            };

            fixPostCardWidth('artDetail', 'prenext-posts');

            $('#floating-toc-btn .btn-floating').click(function () {

                if ($tocAside.hasClass(expandedClass)) {
                    $tocAside.removeClass(expandedClass).hide();
                    $mainContent.removeClass('l9');


                    
                        if (!getUserSetToc(getLS(tocSchemaStorageKey))) {
                            tocbot.destroy();
                        }
                    
                    setLS(tocSchemaStorageKey, 'hide');

                } else {

                    
                        if (!getUserSetToc(getLS(tocSchemaStorageKey))) {

                            initMateryToc();
                        }
                    
                    setLS(tocSchemaStorageKey, 'show');
                    $tocAside.addClass(expandedClass).show();
                    $mainContent.addClass('l9');
                }
                fixPostCardWidth('artDetail', 'prenext-posts');
                AOS.refresh();
                progressBarInit();
                //Matery.utils.retry(function() {
                //    if (Matery.boot && Matery.boot.refresh) {
                //        Matery.boot.refresh();
                //        return true;
                //    }
                //}, 100, 10);
            });
        

        //Matery.events.registerRefreshCallback(function() {
        //    if ('tocbot' in window) {
        //        tocbot.refresh();
        //    }
        //});
    });
</script>

    
<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE' || selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: 夜法之书<br />'
            + '文章作者: 夜法之书<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>



    
    
        <script >
  document.addEventListener("copy", function (e) {
    let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
    M.toast({html: toastHTML})
  });

  function navToReprintStatement() {
    $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
  }
</script>

    








    <script>
  function loadShare() {
    //console.log('[SHARE]init share');
    
      try {
        jQuery.ajax({url: "https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js", dataType:"script", cache: true, success: function() {
            
        }});
      } catch(err) { console.log("[SHARE][Error] JQuery is not defined.") }
    
    

  }
  
  //https://blog.skk.moe/post/prevent-disqus-from-slowing-your-site/
  // 通过检查 window 对象确认是否在浏览器中运行
  var runningOnBrowser = typeof window !== "undefined";
  // 通过检查 scroll 事件 API 和 User-Agent 来匹配爬虫
  var isBot = runningOnBrowser && !("onscroll" in window) || typeof navigator !== "undefined" && /(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent);
  // 检查当前浏览器是否支持 IntersectionObserver API
  var supportsIntersectionObserver = runningOnBrowser && "IntersectionObserver" in window;
  
  // 一个小 hack，将耗时任务包裹在 setTimeout(() => { }, 1) 中，可以推迟到 Event Loop 的任务队列中、等待主调用栈清空后才执行，在绝大部分浏览器中都有效
  // 其实这个 hack 本来是用于优化骨架屏显示的。一些浏览器总是等 JavaScript 执行完了才开始页面渲染，导致骨架屏起不到降低 FCP 的优化效果，所以通过 hack 将耗时函数放到骨架屏渲染完成后再进行。
  setTimeout(function () {
    if (!isBot && supportsIntersectionObserver) {
      // 当前环境不是爬虫、并且浏览器兼容 IntersectionObserver API
      var share_observer = new IntersectionObserver(function(entries) {
        // 当前视窗中已出现 share 评论框所在位置
        if (entries[0].isIntersecting) {
          //console.log('[SHARE] start share IntersectionObserver');
          // 加载 share
          loadShare();
          // 停止当前的 Observer
          share_observer.disconnect();
        }
      }, { threshold: [0] });
      // 设置让 Observer 观察 #article-share 元素
      share_observer.observe(document.getElementById('article-share'));
    } else {
      // 当前环境是爬虫、或当前浏览器其不兼容 IntersectionObserver API
      // 直接加载 share
      loadShare();
      //console.log('[SHARE] start share');
    }
  }, 1);

</script> 



<script type="text/javascript">
    progressBarInit();
</script>


  
    <script async src="/js/img-lazyload.js" ></script>
  




<!-- <script type="text/javascript" defer src="https://gcore.jsdelivr.net/gh/sirxemic/jquery.ripples/dist/jquery.ripples.js"></script> -->
<!-- <script type="text/javascript" defer src="/libs/others/ripples.js"></script> -->





  <script type="text/javascript" defer src="/libs/others/snowflake.js"></script>







    
    











    <script async src="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.min.js"></script>


















  <script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js" ></script>

  <script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" ></script>

  <script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.js" ></script>

  <script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autolinker/prism-autolinker.min.js" ></script>

  <script>Matery.plugins.codeWidget();</script>

  
<script>
  Matery.utils.createScript('https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body #articleContent > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Matery.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body #articleContent > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>









<script  src="/js/boot.js" ></script>



    

    <noscript>
        <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
    </noscript>

<!-- hexo injector body_end start --><script src="https://cdn.jsdelivr.net/npm/hexo-tag-common-new@0.2.4/js/index.js"></script><!-- hexo injector body_end end --><script>(function (w, d, s, id) {
            if (typeof (w.webpushr) !== 'undefined') return; w.webpushr = w.webpushr || function () { (w.webpushr.q = w.webpushr.q || []).push(arguments) }; var js, fjs = d.getElementsByTagName(s)[0]; js = d.createElement(s); js.id = id; js.async = 1; js.src = "https://cdn.webpushr.com/app.min.js";fjs.parentNode.appendChild(js);}(window, document, 'script', 'webpushr-jssdk'));webpushr('setup', { 'key': 'BDHamjevXR9yPJrttxl80MjCYEwm3CKzwsi3rwMXxq4Lnbzhr2fNQARqXJVhfBn_ucmy9QHixa3qps8eEFXBwmw' });</script></body>

</html>
