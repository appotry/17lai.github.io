(function(o){o.languages.xquery=o.languages.extend("markup",{"xquery-comment":{pattern:/\(:[\s\S]*?:\)/,greedy:true,alias:"comment"},string:{pattern:/(["'])(?:\1\1|(?!\1)[\s\S])*\1/,greedy:true},extension:{pattern:/\(#.+?#\)/,alias:"symbol"},variable:/\$[-\w:]+/,axis:{pattern:/(^|[^-])(?:ancestor(?:-or-self)?|attribute|child|descendant(?:-or-self)?|following(?:-sibling)?|parent|preceding(?:-sibling)?|self)(?=::)/,lookbehind:true,alias:"operator"},"keyword-operator":{pattern:/(^|[^:-])\b(?:and|castable as|div|eq|except|ge|gt|idiv|instance of|intersect|is|le|lt|mod|ne|or|union)\b(?=$|[^:-])/,lookbehind:true,alias:"operator"},keyword:{pattern:/(^|[^:-])\b(?:as|ascending|at|base-uri|boundary-space|case|cast as|collation|construction|copy-namespaces|declare|default|descending|else|empty (?:greatest|least)|encoding|every|external|for|function|if|import|in|inherit|lax|let|map|module|namespace|no-inherit|no-preserve|option|order(?: by|ed|ing)?|preserve|return|satisfies|schema|some|stable|strict|strip|then|to|treat as|typeswitch|unordered|validate|variable|version|where|xquery)\b(?=$|[^:-])/,lookbehind:true},function:/[\w-]+(?::[\w-]+)*(?=\s*\()/,"xquery-element":{pattern:/(element\s+)[\w-]+(?::[\w-]+)*/,lookbehind:true,alias:"tag"},"xquery-attribute":{pattern:/(attribute\s+)[\w-]+(?::[\w-]+)*/,lookbehind:true,alias:"attr-name"},builtin:{pattern:/(^|[^:-])\b(?:attribute|comment|document|element|processing-instruction|text|xs:(?:ENTITIES|ENTITY|ID|IDREFS?|NCName|NMTOKENS?|NOTATION|Name|QName|anyAtomicType|anyType|anyURI|base64Binary|boolean|byte|date|dateTime|dayTimeDuration|decimal|double|duration|float|gDay|gMonth|gMonthDay|gYear|gYearMonth|hexBinary|int|integer|language|long|negativeInteger|nonNegativeInteger|nonPositiveInteger|normalizedString|positiveInteger|short|string|time|token|unsigned(?:Byte|Int|Long|Short)|untyped(?:Atomic)?|yearMonthDuration))\b(?=$|[^:-])/,lookbehind:true},number:/\b\d+(?:\.\d+)?(?:E[+-]?\d+)?/,operator:[/[+*=?|@]|\.\.?|:=|!=|<[=<]?|>[=>]?/,{pattern:/(\s)-(?=\s)/,lookbehind:true}],punctuation:/[[\](){},;:/]/});o.languages.xquery.tag.pattern=/<\/?(?!\d)[^\s>\/=$<%]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|\{(?!\{)(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])+\}|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/;o.languages.xquery["tag"].inside["attr-value"].pattern=/=(?:("|')(?:\\[\s\S]|\{(?!\{)(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])+\}|(?!\1)[^\\])*\1|[^\s'">=]+)/;o.languages.xquery["tag"].inside["attr-value"].inside["punctuation"]=/^="|"$/;o.languages.xquery["tag"].inside["attr-value"].inside["expression"]={pattern:/\{(?!\{)(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])+\}/,inside:o.languages.xquery,alias:"language-xquery"};var s=function(e){if(typeof e==="string"){return e}if(typeof e.content==="string"){return e.content}return e.content.map(s).join("")};var l=function(e){var t=[];for(var n=0;n<e.length;n++){var a=e[n];var i=false;if(typeof a!=="string"){if(a.type==="tag"&&a.content[0]&&a.content[0].type==="tag"){if(a.content[0].content[0].content==="</"){if(t.length>0&&t[t.length-1].tagName===s(a.content[0].content[1])){t.pop()}}else{if(a.content[a.content.length-1].content==="/>"){}else{t.push({tagName:s(a.content[0].content[1]),openedBraces:0})}}}else if(t.length>0&&a.type==="punctuation"&&a.content==="{"&&(!e[n+1]||e[n+1].type!=="punctuation"||e[n+1].content!=="{")&&(!e[n-1]||e[n-1].type!=="plain-text"||e[n-1].content!=="{")){t[t.length-1].openedBraces++}else if(t.length>0&&t[t.length-1].openedBraces>0&&a.type==="punctuation"&&a.content==="}"){t[t.length-1].openedBraces--}else if(a.type!=="comment"){i=true}}if(i||typeof a==="string"){if(t.length>0&&t[t.length-1].openedBraces===0){var r=s(a);if(n<e.length-1&&(typeof e[n+1]==="string"||e[n+1].type==="plain-text")){r+=s(e[n+1]);e.splice(n+1,1)}if(n>0&&(typeof e[n-1]==="string"||e[n-1].type==="plain-text")){r=s(e[n-1])+r;e.splice(n-1,1);n--}if(/^\s+$/.test(r)){e[n]=r}else{e[n]=new o.Token("plain-text",r,null,r)}}}if(a.content&&typeof a.content!=="string"){l(a.content)}}};o.hooks.add("after-tokenize",function(e){if(e.language!=="xquery"){return}l(e.tokens)})})(Prism);