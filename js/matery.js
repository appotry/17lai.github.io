$(function(){{let e="animated pulse";$("article .article").hover(function(){$(this).addClass(e)},function(){$(this).removeClass(e)})}$(".sidenav").sidenav();function e(e,t){let n=$("#"+e);if(0!==n.length){let e=n.width();450<=e?e+=21:350<=e&&e<450?e+=18:300<=e&&e<350?e+=16:e+=14,$("#"+t).width(e)}}function t(){e("navContainer"),e("artDetail","prenext-posts"),$(".content").css("min-height",window.innerHeight-165)}t(),$(window).resize(function(){t()}),$("#articles").masonry({itemSelector:".article"}),AOS.init({easing:"ease-in-out-sine",duration:700,delay:100});{$("#articleContent a").attr("target","_blank"),$("#articleContent img").each(function(){var e=$(this).attr("src"),e=($(this).wrap('<div class="img-item" data-src="'+e+'" data-sub-html=".caption"></div>'),$(this).css("max-width","99%"),$(this).addClass("img-shadow img-margin"),$(this).attr("alt")),t=$(this).attr("title");let n="";if(void 0===e||""===e?void 0!==t&&""!==t&&(n=t):n=e,""!==n){let e=document.createElement("div"),t=(e.className="caption",document.createElement("b"));t.className="center-caption",t.innerText=n,e.appendChild(t),this.insertAdjacentElement("afterend",e)}}),$("#articleContent, #myGallery").lightGallery({selector:".img-item",subHtmlSelectorRelative:!0}),$(document).find("img[data-original]").each(function(){$(this).parent().attr("href",$(this).attr("data-original"))});const a=window.document.querySelector(".progress-bar");a&&new ScrollProgress((e,t)=>{a.style.width=100*t+"%"})}$(".modal").modal(),$("#backTop").click(function(){return $("body,html").animate({scrollTop:0},400),!1});let n=$("#headNav"),o=$(".top-scroll");function s(e){e<100?(n.addClass("nav-transparent"),o.slideUp(300)):(n.removeClass("nav-transparent"),o.slideDown(300))}s($(window).scrollTop()),$(window).scroll(function(){s($(window).scrollTop())}),$(".nav-menu>li").hover(function(){$(this).children("ul").stop(!0,!0).show(),$(this).addClass("nav-show").siblings("li").removeClass("nav-show")},function(){$(this).children("ul").stop(!0,!0).hide(),$(".nav-item.nav-show").removeClass("nav-show")}),$(".m-nav-item>a").on("click",function(){"none"==$(this).next("ul").css("display")?($(".m-nav-item").children("ul").slideUp(300),$(this).next("ul").slideDown(100),$(this).parent("li").addClass("m-nav-show").siblings("li").removeClass("m-nav-show")):($(this).next("ul").slideUp(100),$(".m-nav-item.m-nav-show").removeClass("m-nav-show"))}),$(".tooltipped").tooltip()}),setTimeout(function(){(19<=(new Date).getHours()||(new Date).getHours()<7)&&!$("body").hasClass("DarkMode")&&M.toast({html:'<span style="color:#97b8b2;border-radius: 10px;><i class="fa fa-bellaria-hidden="true"></i>晚上使用深色模式阅读更好哦。(ﾟ▽ﾟ)</span>'})},2200),"1"===localStorage.getItem("isDark")?(document.body.classList.add("DarkMode"),$("#sum-moon-icon").addClass("fa-sun").removeClass("fa-moon")):(document.body.classList.remove("DarkMode"),$("#sum-moon-icon").removeClass("fa-sun").addClass("fa-moon")),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(function(){console.log("Service Worker Registered")});let deferredPrompt;function showAddToHomeScreen(){M.toast({html:'<span>使<b> <%= config.title %> </b>可以离线访问？</span><button class="btn-flat toast-action" onclick="addToHomeScreen()">Yes</button>'})}function addToHomeScreen(){deferredPrompt.prompt(),deferredPrompt.userChoice.then(function(e){"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),deferredPrompt=null})}window.addEventListener("beforeinstallprompt",function(e){e.preventDefault(),deferredPrompt=e,showAddToHomeScreen()});