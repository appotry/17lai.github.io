<!DOCTYPE html><html><head><meta charset="utf-8"><title>Elixir Guards</title><link href="style.css" rel="stylesheet"><link href="//dash_ref/Category/Operators/1"><link href="//dash_ref_Operators/Entry/Comparison/0"><link href="//dash_ref_Operators/Entry/Arithmetic/0"><link href="//dash_ref_Operators/Entry/Boolean and Negation/0"><link href="//dash_ref_Operators/Entry/Join/0"><link href="//dash_ref_Operators/Entry/Membership/0"><link href="//dash_ref/Category/Functions/1"><link href="//dash_ref_Functions/Entry/Type-check/0"><link href="//dash_ref_Functions/Entry/Other/0"></head><body><header><h1>Elixir Guards</h1></header><article><p></p><p>Guard clauses allow Elixir to determine which function to invoke based not only on which arguments are passed, but also based on type or some tests involving their values. Guard clauses are defined using the <code>when</code> keyword.</p><p>Examples:</p><pre class="highlight elixir"><span class="k">defmodule</span> <span class="no">Guard</span> <span class="k">do</span>&#x000A;  <span class="k">def</span> <span class="n">kind_of</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">when</span> <span class="n">is_binary</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">do</span>&#x000A;    <span class="s2">"</span><span class="si">#{</span><span class="n">x</span><span class="si">}</span><span class="s2"> is a binary"</span>&#x000A;  <span class="k">end</span>&#x000A;&#x000A;  <span class="k">def</span> <span class="n">kind_of</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">when</span> <span class="n">is_atom</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">do</span>&#x000A;    <span class="s2">"</span><span class="si">#{</span><span class="n">x</span><span class="si">}</span><span class="s2"> is an atom"</span>&#x000A;  <span class="k">end</span>&#x000A;&#x000A;  <span class="k">def</span> <span class="n">is_ten</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">when</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">,</span> <span class="k">do</span><span class="p">:</span> <span class="s2">"Greater than ten"</span>&#x000A;&#x000A;  <span class="k">def</span> <span class="n">is_ten</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">when</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">,</span> <span class="k">do</span><span class="p">:</span> <span class="s2">"Less than ten"</span>&#x000A;&#x000A;  <span class="k">def</span> <span class="n">is_ten</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="s2">"Yes"</span>&#x000A;<span class="k">end</span></pre><pre class="highlight elixir"><span class="n">max</span> <span class="o">=</span> <span class="k">fn</span>&#x000A;  <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">when</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">x</span>&#x000A;  <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">y</span>&#x000A;<span class="k">end</span></pre><pre class="highlight plaintext">case 42 do&#x000A;  x when is_binary(x) -&gt; "Nope"&#x000A;  x                   -&gt; "Yep"&#x000A;end</pre><p>Additionally, users may define their own guards. Example: the <code>Bitwise</code> module defines <code>bnot</code>, <code>~~~</code>, <code>band</code>, <code>&amp;&amp;&amp;</code>, <code>bor</code>, <code>|||</code>, <code>bxor</code>, <code>^^^</code>, <code>bsl</code> <code>&lt;&lt;&lt;</code>, <code>bsr</code> <code>&gt;&gt;&gt;</code>.</p><p></p><section class="category"><h2 id="//dash_ref/Category/Operators/1"> Operators</h2><div class="scrollable"><table><tr id="//dash_ref_Operators/Entry/Comparison/0"><td class="description" colspan="2"><div class="name"><p>Comparison</p></div><div class="notes"><p><code>==</code>, <code>!=</code>, <code>===</code>, <code>!==</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code></p></div></td></tr><tr id="//dash_ref_Operators/Entry/Arithmetic/0"><td class="description" colspan="2"><div class="name"><p>Arithmetic</p></div><div class="notes"><p><code>+</code>, <code>-</code>, <code>*</code>, <code>/</code></p><p>Unary operators <code>+</code>, and <code>-</code> are also allowed.</p></div></td></tr><tr id="//dash_ref_Operators/Entry/Boolean and Negation/0"><td class="description" colspan="2"><div class="name"><p>Boolean and Negation</p></div><div class="notes"><p><code>or</code>, <code>and</code>, <code>not</code></p><p>Short-circuiting operators <code>&amp;&amp;</code>, <code>||</code>, and <code>!</code> are not allowed.</p></div></td></tr><tr id="//dash_ref_Operators/Entry/Join/0"><td class="description" colspan="2"><div class="name"><p>Join</p></div><div class="notes"><p><code>&lt;&gt;</code>, <code>++</code> as long as left side is a literal.</p></div></td></tr><tr id="//dash_ref_Operators/Entry/Membership/0"><td class="description" colspan="2"><div class="name"><p>Membership</p></div><div class="notes"><p>Test membership in a list or range with <code>in</code>.</p><p>Example:</p><pre class="highlight elixir"><span class="k">def</span> <span class="n">is_animal</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="ow">when</span> <span class="n">animal</span> <span class="ow">in</span> <span class="p">[</span><span class="ss">:dog</span><span class="p">,</span> <span class="ss">:cat</span><span class="p">,</span> <span class="ss">:fish</span><span class="p">]</span> <span class="k">do</span>&#x000A;  <span class="no">true</span>&#x000A;<span class="k">end</span>&#x000A;&#x000A;<span class="k">def</span> <span class="n">in_range</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">when</span> <span class="n">x</span> <span class="ow">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">6</span> <span class="k">do</span>&#x000A;  <span class="no">true</span>&#x000A;<span class="k">end</span></pre></div></td></tr></table></div></section><section class="category"><h2 id="//dash_ref/Category/Functions/1"> Functions</h2><div class="scrollable"><table><tr id="//dash_ref_Functions/Entry/Type-check/0"><td class="description" colspan="2"><div class="name"><p>Type-check</p></div><div class="notes"><p>See main Elixir documentation for more information.</p><p><code>is_atom/1</code>, <code>is_binary/1</code>, <code>is_bitstring/1</code>, <code>is_boolean/1</code>, <code>is_float/1</code>, <code>is_function/1</code>, <code>is_function/2</code>, <code>is_integer/1</code>, <code>is_list/1</code>, <code>is_map/1</code>, <code>is_number/1</code>, <code>is_pid/1</code>, <code>is_port/1</code>, <code>is_record/1</code>, <code>is_record/2</code>, <code>is_reference/1</code>, <code>is_tuple/1</code></p></div></td></tr><tr id="//dash_ref_Functions/Entry/Other/0"><td class="description" colspan="2"><div class="name"><p>Other</p></div><div class="notes"><p>See main Elixir documentation for more information.</p><p><code>abs(number)</code>, <code>binary_part(binary, start, length)</code>, <code>bit_size(bitstring)</code>, <code>byte_size(bitstring)</code>, <code>div(number, number)</code>, <code>elem(tuple, n)</code>, <code>hd(list)</code>, <code>length(list)</code>, <code>map_size(map)</code>, <code>node()</code>, <code>node(pid | ref | port)</code>, <code>rem(integer, integer)</code>, <code>round(number)</code>, <code>self()</code>, <code>tl(list)</code>, <code>trunc(number)</code>, <code>tuple_size(tuple)</code></p></div></td></tr></table></div></section><section class="notes"><h2>Notes</h2><ul><li>Based on <a href="http://elixir-lang.org/getting-started/case-cond-and-if.html#expressions-in-guard-clauses">&quot;Expressions in guard clauses&quot;</a> from <a href="http://elixir-lang.org/getting-started/introduction.html">Elixir-Lang Getting Started Guide</a></li></ul></section></article><footer> You can modify and improve this cheat sheet <a onclick="return window.dash.openExternal_(this.href),!1" href="http://cheat.kapeli.com">here</a></footer></body></html>