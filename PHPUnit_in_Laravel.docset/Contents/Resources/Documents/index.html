<!DOCTYPE html><html><head><meta charset="utf-8"><title>PHPUnit in Laravel</title><link href="style.css" rel="stylesheet"><link href="//dash_ref/Category/Installation and Setup/1"><link href="//dash_ref_Installation and Setup/Entry/Step 1: Install PHPUnit and update Composer/0"><link href="//dash_ref_Installation and Setup/Entry/Step 2: Install Laracasts%2FIntegrated/0"><link href="//dash_ref_Installation and Setup/Entry/Step 3: Extend/0"><link href="//dash_ref/Category/Extensions/1"><link href="//dash_ref_Extensions/Entry/visit($uri)/0"><link href="//dash_ref_Extensions/Entry/see($text)/0"><link href="//dash_ref_Extensions/Entry/click($linkText) or follow($linkText)/0"><link href="//dash_ref_Extensions/Entry/seePageIs($uri) and onPage($uri)/0"><link href="//dash_ref_Extensions/Entry/type($text, $selector) or fill($text, $selector)/0"><link href="//dash_ref_Extensions/Entry/tick($name) or check($name)/0"><link href="//dash_ref_Extensions/Entry/select($selectName, $optionValue)/0"><link href="//dash_ref_Extensions/Entry/attachFile($fileInputName, $absolutePath)/0"><link href="//dash_ref_Extensions/Entry/press($submitText)/0"><link href="//dash_ref_Extensions/Entry/submitForm($submitText, $formData)/0"><link href="//dash_ref_Extensions/Entry/seeInDatabase($table, $data) or verifyInDatabase($table, $data)/0"><link href="//dash_ref_Extensions/Entry/seeFile($path)/0"><link href="//dash_ref_Extensions/Entry/dump()/0"><link href="//dash_ref/Category/Example/1"><link href="//dash_ref_Example/Entry/Real Example/0"></head><body><header><h1>PHPUnit in Laravel</h1></header><article><p></p><section class="category"><h2 id="//dash_ref/Category/Installation and Setup/1">Installation and Setup</h2><div class="scrollable"><table><tr id="//dash_ref_Installation and Setup/Entry/Step 1: Install PHPUnit and update Composer/0"><td class="description" colspan="2"><div class="name"><p>Step 1: Install PHPUnit and update Composer</p></div><div class="notes"><pre class="highlight shell"><span class="nb">sudo </span>composer global require phpunit/phpunit&#x000A;<span class="nb">sudo </span>composer global update</pre></div></td></tr><tr id="//dash_ref_Installation and Setup/Entry/Step 2: Install Laracasts%2FIntegrated/0"><td class="description" colspan="2"><div class="name"><p>Step 2: Install Laracasts/Integrated</p></div><div class="notes"><p>On the new Laravel project root</p><pre class="highlight shell">composer require laracasts/integrated <span class="nt">--dev</span></pre></div></td></tr><tr id="//dash_ref_Installation and Setup/Entry/Step 3: Extend/0"><td class="description" colspan="2"><div class="name"><p>Step 3: Extend</p></div><div class="notes"><pre class="highlight php"><span class="c1">// tests/TestCase.php</span>&#x000A;&#x000A;<span class="kn">use</span> <span class="nc">Laracasts\Integrated\Extensions\Laravel</span> <span class="k">as</span> <span class="nc">IntegrationTest</span><span class="p">;</span>&#x000A;&#x000A;<span class="kd">class</span> <span class="nc">TestCase</span> <span class="kd">extends</span> <span class="nc">IntegrationTest</span>&#x000A;<span class="p">{</span>&#x000A;    <span class="c1">// ...</span>&#x000A;<span class="p">}</span></pre></div></td></tr></table></div></section><section class="category"><h2 id="//dash_ref/Category/Extensions/1">Extensions</h2><div class="scrollable"><table><tr id="//dash_ref_Extensions/Entry/visit($uri)/0"><td class="description" colspan="2"><div class="name"><p><strong>visit($uri)</strong></p></div><div class="notes"><p>This will perform a GET request to the given <code>$uri</code>, while also triggering an assertion to guarantee that a <code>200 status</code> code was returned.</p><pre class="highlight php"><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'/page'</span><span class="p">);</span></pre></div></td></tr><tr id="//dash_ref_Extensions/Entry/see($text)/0"><td class="description" colspan="2"><div class="name"><p><strong>see($text)</strong></p></div><div class="notes"><p>To verify that the current page contains the given text, you will want to use the see method.</p><pre class="highlight php"><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'/page'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">see</span><span class="p">(</span><span class="s1">'Hello World'</span><span class="p">);</span></pre></div></td></tr><tr id="//dash_ref_Extensions/Entry/click($linkText) or follow($linkText)/0"><td class="description" colspan="2"><div class="name"><p><strong>click($linkText) or follow($linkText)</strong></p></div><div class="notes"><p>To simulate the behavior of clicking a link on the page, the click method is your friend.</p><pre class="highlight php"><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'/page'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">click</span><span class="p">(</span><span class="s1">'Follow Me'</span><span class="p">);</span></pre></div></td></tr><tr id="//dash_ref_Extensions/Entry/seePageIs($uri) and onPage($uri)/0"><td class="description" colspan="2"><div class="name"><p><strong>seePageIs($uri) and onPage($uri)</strong></p></div><div class="notes"><p>In many situations, it can prove useful to make an assertion against the current url.</p><pre class="highlight php"><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'/page'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">click</span><span class="p">(</span><span class="s1">'Follow Me'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">seePageIs</span><span class="p">(</span><span class="s1">'/next-page'</span><span class="p">);</span></pre></div></td></tr><tr id="//dash_ref_Extensions/Entry/type($text, $selector) or fill($text, $selector)/0"><td class="description" colspan="2"><div class="name"><p><strong>type($text, $selector) or fill($text, $selector)</strong></p></div><div class="notes"><p>If you need to type something into an input field, one option is to use the type method, like so:</p><pre class="highlight php"><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'search'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">type</span><span class="p">(</span><span class="s1">'Total Recall'</span><span class="p">,</span> <span class="s1">'#search'</span><span class="p">);</span></pre><p>Simply provide the value for the input, and a CSS selector for us to hunt down the input that you are looking for. You may pass an id, element name, or an input with the given &quot;name&quot; attribute. The fill method is an alias that does the same thing.</p></div></td></tr><tr id="//dash_ref_Extensions/Entry/tick($name) or check($name)/0"><td class="description" colspan="2"><div class="name"><p><strong>tick($name) or check($name)</strong></p></div><div class="notes"><p>To &quot;tick&quot; a checkbox, call the tick method, and pass either the id or the name of the input.</p><pre class="highlight php"><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'newsletter'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">tick</span><span class="p">(</span><span class="s1">'opt-in'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">press</span><span class="p">(</span><span class="s1">'Save'</span><span class="p">);</span></pre><p>The check method is an alias for tick. Use either.</p></div></td></tr><tr id="//dash_ref_Extensions/Entry/select($selectName, $optionValue)/0"><td class="description" colspan="2"><div class="name"><p><strong>select($selectName, $optionValue)</strong></p></div><div class="notes"><p>This method allows you to select an option from a dropdown. You only need to provide the name of the select element, and the value attribute from the desired option tag.</p><pre class="highlight php"><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'signup'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">select</span><span class="p">(</span><span class="s1">'plan'</span><span class="p">,</span> <span class="s1">'monthly'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">press</span><span class="p">(</span><span class="s1">'Sign Up'</span><span class="p">);</span></pre><p>The following HTML would satisfy the example above</p><pre class="highlight html"><span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">action=</span><span class="s">"..."</span><span class="nt">&gt;</span>&#x000A;    <span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">"plan"</span><span class="nt">&gt;</span>&#x000A;        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"monthly"</span><span class="nt">&gt;</span>Monthly<span class="nt">&lt;/option&gt;</span>&#x000A;        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"yearly"</span><span class="nt">&gt;</span>Yearly<span class="nt">&lt;/option&gt;</span>&#x000A;    <span class="nt">&lt;/select&gt;</span>&#x000A;  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Sign Up"</span><span class="nt">&gt;</span>&#x000A;<span class="nt">&lt;/form&gt;</span></pre></div></td></tr><tr id="//dash_ref_Extensions/Entry/attachFile($fileInputName, $absolutePath)/0"><td class="description" colspan="2"><div class="name"><p><strong>attachFile($fileInputName, $absolutePath)</strong></p></div><div class="notes"><p>Imagine that, as part of filling out a form, you need to attach a file. Easy enough!</p><pre class="highlight php"><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'/page'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">attachFile</span><span class="p">(</span><span class="s1">'input-name'</span><span class="p">,</span> <span class="k">__DIR__</span><span class="mf">.</span><span class="s1">'/foo.txt'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">press</span><span class="p">(</span><span class="s1">'Submit'</span><span class="p">);</span></pre><p>It is important that you provide an absolute path to the file you wish to attach. Do not use a relative path.</p></div></td></tr><tr id="//dash_ref_Extensions/Entry/press($submitText)/0"><td class="description" colspan="2"><div class="name"><p><strong>press($submitText)</strong></p></div><div class="notes"><p>Not to be confused with click, the press method is used to submit a form with a submit button that has the given text.</p><pre class="highlight php"><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'search'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">type</span><span class="p">(</span><span class="s1">'Total Recall'</span><span class="p">,</span> <span class="s1">'#q'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">press</span><span class="p">(</span><span class="s1">'Search Now'</span><span class="p">);</span></pre><p>When called, this package will handle the process of submitting the form, and following any applicable redirects. This means, we could combine some of previous examples to form a full integration test.</p><pre class="highlight php"><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'/search'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">type</span><span class="p">(</span><span class="s1">'Total Recall'</span><span class="p">,</span> <span class="s1">'#q'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">press</span><span class="p">(</span><span class="s1">'Search Now'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">andSee</span><span class="p">(</span><span class="s1">'Search results for "Total Recall"'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">onPage</span><span class="p">(</span><span class="s1">'/search/results'</span><span class="p">);</span></pre></div></td></tr><tr id="//dash_ref_Extensions/Entry/submitForm($submitText, $formData)/0"><td class="description" colspan="2"><div class="name"><p><strong>submitForm($submitText, $formData)</strong></p></div><div class="notes"><p>For situations where multiple form inputs must be filled out, you might choose to forego multiple type() calls, and instead use the submitForm method.</p><pre class="highlight php"><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'/search'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">submitForm</span><span class="p">(</span><span class="s1">'Search Now'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'q'</span> <span class="o">=&gt;</span> <span class="s1">'Total Recall'</span><span class="p">]);</span></pre><p>This method offers a more compact option, which will both populate and submit the form.</p><p>Take special note of the second argument, which is for the form data. You willl want to pass an associative array, where each key refers to the &quot;name&quot; of an input (not the element name, but the &quot;name&quot; attribute). As such, this test would satisfy the following form:</p><pre class="highlight html"><span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">action=</span><span class="s">"/search/results"</span><span class="nt">&gt;</span>&#x000A;    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"q"</span> <span class="na">placeholder=</span><span class="s">"Search for something..."</span><span class="nt">&gt;</span>&#x000A;    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Search Now"</span><span class="nt">&gt;</span>&#x000A;<span class="nt">&lt;/form&gt;</span></pre></div></td></tr><tr id="//dash_ref_Extensions/Entry/seeInDatabase($table, $data) or verifyInDatabase($table, $data)/0"><td class="description" colspan="2"><div class="name"><p><strong>seeInDatabase($table, $data) or verifyInDatabase($table, $data)</strong></p></div><div class="notes"><p>For situations when you want to peek inside the database to verify that a certain record/row exists, seeInDatabase or its alias verifyInDatabase will do the trick nicely.</p><pre class="highlight php"><span class="nv">$data</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Finish documentation'</span><span class="p">];</span>&#x000A;&#x000A;<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'/tasks'</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">submitForm</span><span class="p">(</span><span class="s1">'Create Task'</span><span class="p">,</span> <span class="nv">$data</span><span class="p">)</span>&#x000A;     <span class="o">-&gt;</span><span class="nf">verifyInDatabase</span><span class="p">(</span><span class="s1">'tasks'</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span></pre><p>When calling verifyInDatabase, as the two arguments, provide the name of the table you are interested in, and an array of any attributes for the query.</p></div></td></tr><tr id="//dash_ref_Extensions/Entry/seeFile($path)/0"><td class="description" colspan="2"><div class="name"><p><strong>seeFile($path)</strong></p></div><div class="notes"><p>To ensure that a file exists, you may use the seeFile method.</p></div></td></tr><tr id="//dash_ref_Extensions/Entry/dump()/0"><td class="description" colspan="2"><div class="name"><p><strong>dump()</strong></p></div><div class="notes"><p>When you want to quickly spit out the response content from the most recent request, call the dump method, like so:</p><pre class="highlight php"><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'/page'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">dump</span><span class="p">();</span></pre><p>This will both dump the response content to the console, and save it to a tests/logs/output.txt file, for your review. Please note that this method will die. So no tests beyond this call will be fired. Nonetheless, it is great for the times when you need a better look at what you are working with, temporarily of course.</p></div></td></tr></table></div></section><section class="category"><h2 id="//dash_ref/Category/Example/1">Example</h2><div class="scrollable"><table><tr id="//dash_ref_Example/Entry/Real Example/0"><td class="description" colspan="2"><div class="name"><p><strong>Real Example</strong></p></div><div class="notes"><pre class="highlight php"><span class="c1">// ExampleTest.php</span>&#x000A;<span class="kn">use</span> <span class="nc">Laracasts\Integrated\Extensions\Laravel</span> <span class="k">as</span> <span class="nc">IntegrationTest</span><span class="p">;</span>&#x000A;<span class="kd">class</span> <span class="nc">ExampleTest</span> <span class="kd">extends</span> <span class="nc">IntegrationTest</span>&#x000A;<span class="p">{</span>&#x000A;&#x000A;    <span class="cd">/** @test */</span>&#x000A;    <span class="k">public</span> <span class="k">function</span> <span class="n">it_verifies_that_pages_load_properly</span><span class="p">()</span>&#x000A;    <span class="p">{</span>&#x000A;       <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>&#x000A;    <span class="p">}</span>&#x000A;&#x000A;    <span class="cd">/** @test */</span>&#x000A;    <span class="k">public</span> <span class="k">function</span> <span class="n">it_verifies_the_current_page</span><span class="p">()</span>&#x000A;    <span class="p">{</span>&#x000A;       <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'/some-page'</span><span class="p">)</span>&#x000A;            <span class="o">-&gt;</span><span class="nf">seePageIs</span><span class="p">(</span><span class="s1">'some-page'</span><span class="p">);</span>&#x000A;    <span class="p">}</span>&#x000A;&#x000A;    <span class="cd">/** @test */</span>&#x000A;    <span class="k">public</span> <span class="k">function</span> <span class="n">it_follows_links</span><span class="p">()</span>&#x000A;    <span class="p">{</span>&#x000A;       <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'/page-1'</span><span class="p">)</span>&#x000A;            <span class="o">-&gt;</span><span class="nf">click</span><span class="p">(</span><span class="s1">'Follow Me'</span><span class="p">)</span>&#x000A;            <span class="o">-&gt;</span><span class="nf">andSee</span><span class="p">(</span><span class="s1">'You are on Page 2'</span><span class="p">)</span>&#x000A;            <span class="o">-&gt;</span><span class="nf">onPage</span><span class="p">(</span><span class="s1">'/page-2'</span><span class="p">);</span>&#x000A;    <span class="p">}</span>&#x000A;&#x000A;    <span class="cd">/** @test */</span>&#x000A;    <span class="k">public</span> <span class="k">function</span> <span class="n">it_submits_forms</span><span class="p">()</span>&#x000A;    <span class="p">{</span>&#x000A;       <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'page-with-form'</span><span class="p">)</span>&#x000A;            <span class="o">-&gt;</span><span class="nf">submitForm</span><span class="p">(</span><span class="s1">'Submit'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'Foo Title'</span><span class="p">])</span>&#x000A;            <span class="o">-&gt;</span><span class="nf">andSee</span><span class="p">(</span><span class="s1">'You entered Foo Title'</span><span class="p">)</span>&#x000A;            <span class="o">-&gt;</span><span class="nf">onPage</span><span class="p">(</span><span class="s1">'/page-with-form-results'</span><span class="p">);</span>&#x000A;&#x000A;        <span class="c1">// Another way to write it.</span>&#x000A;        <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'page-with-form'</span><span class="p">)</span>&#x000A;             <span class="o">-&gt;</span><span class="nf">type</span><span class="p">(</span><span class="s1">'Foo Title'</span><span class="p">,</span> <span class="s1">'#title'</span><span class="p">)</span>&#x000A;             <span class="o">-&gt;</span><span class="nf">press</span><span class="p">(</span><span class="s1">'Submit'</span><span class="p">)</span>&#x000A;             <span class="o">-&gt;</span><span class="nf">see</span><span class="p">(</span><span class="s1">'You Entered Foo Title'</span><span class="p">);</span>&#x000A;    <span class="p">}</span>&#x000A;&#x000A;    <span class="cd">/** @test */</span>&#x000A;    <span class="k">public</span> <span class="k">function</span> <span class="n">it_verifies_information_in_the_database</span><span class="p">()</span>&#x000A;    <span class="p">{</span>&#x000A;       <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">visit</span><span class="p">(</span><span class="s1">'database-test'</span><span class="p">)</span>&#x000A;            <span class="o">-&gt;</span><span class="nf">type</span><span class="p">(</span><span class="s1">'Testing'</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">)</span>&#x000A;            <span class="o">-&gt;</span><span class="nf">press</span><span class="p">(</span><span class="s1">'Save to Database'</span><span class="p">)</span>&#x000A;            <span class="o">-&gt;</span><span class="nf">verifyInDatabase</span><span class="p">(</span><span class="s1">'things'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Testing'</span><span class="p">]);</span>&#x000A;    <span class="p">}</span>&#x000A;<span class="p">}</span>&#x000A;</pre></div></td></tr></table></div></section><section class="notes"><h2>Notes</h2><ul><li>Based on the <a href="https://github.com/laracasts/Integrated">official documentation</a></li><li>Converted and extended by <a href="https://github.com/marionava">Mario Nava</a></li></ul></section></article><footer>You can modify and improve this cheat sheet <a onclick="return window.dash.openExternal_(this.href),!1" href="http://cheat.kapeli.com">here</a></footer></body></html>