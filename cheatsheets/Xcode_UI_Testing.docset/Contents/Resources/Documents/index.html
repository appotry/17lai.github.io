<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>Xcode UI Testing</title>
<link href='style.css' rel='stylesheet'>
<link href='//dash_ref/Category/Basic Functionality/1'>
<link href='//dash_ref_Basic Functionality/Entry/Testing if an element exists/0'>
<link href='//dash_ref_Basic Functionality/Entry/Testing if text with an ellipse exists/0'>
<link href='//dash_ref_Basic Functionality/Entry/Waiting for an element to appear/0'>
<link href='//dash_ref/Category/Interacting with System Controls/1'>
<link href='//dash_ref_Interacting with System Controls/Entry/Tapping buttons/0'>
<link href='//dash_ref_Interacting with System Controls/Entry/Typing text/0'>
<link href='//dash_ref_Interacting with System Controls/Entry/Dismissing alerts/0'>
<link href='//dash_ref_Interacting with System Controls/Entry/Handling system alerts/0'>
<link href='//dash_ref_Interacting with System Controls/Entry/Sliding sliders/0'>
<link href='//dash_ref_Interacting with System Controls/Entry/Interacting with pickers/0'>
<link href='//dash_ref_Interacting with System Controls/Entry/Tapping links in web views/0'>
<link href='//dash_ref/Category/Interactions/1'>
<link href='//dash_ref_Interactions/Entry/Verifying the current controller&#39;s title/0'>
<link href='//dash_ref_Interactions/Entry/Reordering table cells/0'>
<link href='//dash_ref_Interactions/Entry/Pull to refresh/0'>
<link href='//dash_ref_Interactions/Entry/Pushing and popping view controllers/0'>
</head>
<body>
<header>
<h1>Xcode UI Testing</h1>
</header>
<article>
<p></p>
<section class='category'>
<h2 id='//dash_ref/Category/Basic Functionality/1'>
Basic Functionality
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Basic Functionality/Entry/Testing if an element exists/0'>
<td class='description' colspan='2'>
<div class='name'><p>Testing if an element exists</p>
</div>
<div class='notes'><pre class="highlight swift"><span class="kt">XCTAssert</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">staticTexts</span><span class="p">[</span><span class="s">"Welcome"</span><span class="p">]</span><span class="o">.</span><span class="n">exists</span><span class="p">)</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basic Functionality/Entry/Testing if text with an ellipse exists/0'>
<td class='description' colspan='2'>
<div class='name'><p>Testing if text with an ellipse exists</p>
</div>
<div class='notes'><p>A full text match will find an element even if the displayed text has an ellipse due to truncation.</p>
<pre class="highlight swift"><span class="k">let</span> <span class="nv">longNameCell</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">staticTexts</span><span class="p">[</span><span class="s">"Adolph Blaine Charles David Earl Frederick Gerald Hubert Irvin John Kenneth Lloyd Martin Nero Oliver Paul Quincy Randolph Sherman Thomas Uncas Victor William Xerxes Yancy Wolfeschlegelsteinhausenbergerdorff, Senior"</span><span class="p">]</span>&#x000A;<span class="kt">XCTAssert</span><span class="p">(</span><span class="n">longNameCell</span><span class="o">.</span><span class="n">exists</span><span class="p">)</span> <span class="c1">// displayed text is "Adolph Blaine Charles David Earl Freder..."</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Basic Functionality/Entry/Waiting for an element to appear/0'>
<td class='description' colspan='2'>
<div class='name'><p>Waiting for an element to appear</p>
</div>
<div class='notes'><p>Set up an expectation to use with XCTest. The predicate will wait until the element&#39;s <code>-exist</code> property is true.</p>
<pre class="highlight swift"><span class="k">let</span> <span class="nv">goLabel</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">staticTexts</span><span class="p">[</span><span class="s">"Go!"</span><span class="p">]</span>&#x000A;<span class="kt">XCTAssertFalse</span><span class="p">(</span><span class="n">goLabel</span><span class="o">.</span><span class="n">exists</span><span class="p">)</span>&#x000A;&#x000A;<span class="k">let</span> <span class="nv">exists</span> <span class="o">=</span> <span class="kt">NSPredicate</span><span class="p">(</span><span class="nv">format</span><span class="p">:</span> <span class="s">"exists == true"</span><span class="p">)</span>&#x000A;<span class="nf">expectationForPredicate</span><span class="p">(</span><span class="n">exists</span><span class="p">,</span> <span class="nv">evaluatedWithObject</span><span class="p">:</span> <span class="n">goLabel</span><span class="p">,</span> <span class="nv">handler</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>&#x000A;&#x000A;<span class="n">app</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s">"Ready, set..."</span><span class="p">]</span><span class="o">.</span><span class="nf">tap</span><span class="p">()</span>&#x000A;<span class="nf">waitForExpectationsWithTimeout</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="nv">handler</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>&#x000A;<span class="kt">XCTAssert</span><span class="p">(</span><span class="n">goLabel</span><span class="o">.</span><span class="n">exists</span><span class="p">)</span></pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Interacting with System Controls/1'>
Interacting with System Controls
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Interacting with System Controls/Entry/Tapping buttons/0'>
<td class='description' colspan='2'>
<div class='name'><p>Tapping buttons</p>
</div>
<div class='notes'><p>Identify buttons by their accessibility label.</p>
<pre class="highlight swift"><span class="n">app</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s">"Add"</span><span class="p">]</span><span class="o">.</span><span class="nf">tap</span><span class="p">()</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Interacting with System Controls/Entry/Typing text/0'>
<td class='description' colspan='2'>
<div class='name'><p>Typing text</p>
</div>
<div class='notes'><p>First make sure the text field has focus by tapping on it.</p>
<pre class="highlight swift"><span class="k">let</span> <span class="nv">textField</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">textFields</span><span class="p">[</span><span class="s">"Username"</span><span class="p">]</span>&#x000A;<span class="n">textField</span><span class="o">.</span><span class="nf">tap</span><span class="p">()</span>&#x000A;<span class="n">textField</span><span class="o">.</span><span class="nf">typeText</span><span class="p">(</span><span class="s">"joemasilotti"</span><span class="p">)</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Interacting with System Controls/Entry/Dismissing alerts/0'>
<td class='description' colspan='2'>
<div class='name'><p>Dismissing alerts</p>
</div>
<div class='notes'><pre class="highlight swift"><span class="n">app</span><span class="o">.</span><span class="n">alerts</span><span class="p">[</span><span class="s">"Alert Title"</span><span class="p">]</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s">"Button Title"</span><span class="p">]</span><span class="o">.</span><span class="nf">tap</span><span class="p">()</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Interacting with System Controls/Entry/Handling system alerts/0'>
<td class='description' colspan='2'>
<div class='name'><p>Handling system alerts</p>
</div>
<div class='notes'><p>Present a location services authorization dialog to the user and dismiss it with the following code.</p>

<p>Before presenting the alert add a UI Interuption Handler. When this fires, dismiss with the &quot;Allow&quot; button.</p>
<pre class="highlight swift"><span class="nf">addUIInterruptionMonitorWithDescription</span><span class="p">(</span><span class="s">"Location Services"</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">alert</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="k">in</span>&#x000A;  <span class="n">alert</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s">"Allow"</span><span class="p">]</span><span class="o">.</span><span class="nf">tap</span><span class="p">()</span>&#x000A;  <span class="k">return</span> <span class="kc">true</span>&#x000A;<span class="p">}</span>&#x000A;&#x000A;<span class="n">app</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s">"Request Location"</span><span class="p">]</span><span class="o">.</span><span class="nf">tap</span><span class="p">()</span>&#x000A;<span class="n">app</span><span class="o">.</span><span class="nf">tap</span><span class="p">()</span> <span class="c1">// need to interact with the app again for the handler to fire</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Interacting with System Controls/Entry/Sliding sliders/0'>
<td class='description' colspan='2'>
<div class='name'><p>Sliding sliders</p>
</div>
<div class='notes'><p>This will slide the value of the slider to 70%.</p>
<pre class="highlight swift"><span class="n">app</span><span class="o">.</span><span class="n">sliders</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="nf">adjustToNormalizedSliderPosition</span><span class="p">(</span><span class="mf">0.7</span><span class="p">)</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Interacting with System Controls/Entry/Interacting with pickers/0'>
<td class='description' colspan='2'>
<div class='name'><p>Interacting with pickers</p>
</div>
<div class='notes'><p>A picker with one wheel:</p>
<pre class="highlight swift"><span class="n">app</span><span class="o">.</span><span class="n">pickerWheels</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="nf">adjustToPickerWheelValue</span><span class="p">(</span><span class="s">"Picker Wheel Item Title"</span><span class="p">)</span></pre>
<p>A picker with multiple wheels. Make sure to set the accessibility delegate so the framework can identify the different wheels.</p>
<pre class="highlight swift"><span class="k">let</span> <span class="nv">firstPredicate</span> <span class="o">=</span> <span class="kt">NSPredicate</span><span class="p">(</span><span class="nv">format</span><span class="p">:</span> <span class="s">"label BEGINSWITH 'First Picker'"</span><span class="p">)</span>&#x000A;<span class="k">let</span> <span class="nv">firstPicker</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">pickerWheels</span><span class="o">.</span><span class="nf">elementMatchingPredicate</span><span class="p">(</span><span class="n">firstPredicate</span><span class="p">)</span>&#x000A;<span class="n">firstPicker</span><span class="o">.</span><span class="nf">adjustToPickerWheelValue</span><span class="p">(</span><span class="s">"first value"</span><span class="p">)</span>&#x000A;&#x000A;<span class="k">let</span> <span class="nv">secondPredicate</span> <span class="o">=</span> <span class="kt">NSPredicate</span><span class="p">(</span><span class="nv">format</span><span class="p">:</span> <span class="s">"label BEGINSWITH 'Second Picker'"</span><span class="p">)</span>&#x000A;<span class="k">let</span> <span class="nv">secondPicker</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">pickerWheels</span><span class="o">.</span><span class="nf">elementMatchingPredicate</span><span class="p">(</span><span class="n">secondPredicate</span><span class="p">)</span>&#x000A;<span class="n">secondPicker</span><span class="o">.</span><span class="nf">adjustToPickerWheelValue</span><span class="p">(</span><span class="s">"second value"</span><span class="p">)</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Interacting with System Controls/Entry/Tapping links in web views/0'>
<td class='description' colspan='2'>
<div class='name'><p>Tapping links in web views</p>
</div>
<div class='notes'><pre class="highlight swift"><span class="n">app</span><span class="o">.</span><span class="n">links</span><span class="p">[</span><span class="s">"Tweet this"</span><span class="p">]</span><span class="o">.</span><span class="nf">tap</span><span class="p">()</span></pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Interactions/1'>
Interactions
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Interactions/Entry/Verifying the current controller&#39;s title/0'>
<td class='description' colspan='2'>
<div class='name'><p>Verifying the current controller&#39;s title</p>
</div>
<div class='notes'><pre class="highlight swift"><span class="kt">XCTAssert</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">navigationBars</span><span class="p">[</span><span class="s">"Details"</span><span class="p">]</span><span class="o">.</span><span class="n">exists</span><span class="p">)</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Interactions/Entry/Reordering table cells/0'>
<td class='description' colspan='2'>
<div class='name'><p>Reordering table cells</p>
</div>
<div class='notes'><p>If you have a <code>UITableViewCell</code> with default style and set the text to &quot;Title&quot;, the reorder control&#39;s accessibility label becomes &quot;Reorder Title&quot;.</p>

<p>Using this we can drag one reorder control to another, essentially reordering the cells.</p>
<pre class="highlight swift"><span class="k">let</span> <span class="nv">topButton</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s">"Reorder Top Cell"</span><span class="p">]</span>&#x000A;<span class="k">let</span> <span class="nv">bottomButton</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s">"Reorder Bottom Cell"</span><span class="p">]</span>&#x000A;<span class="n">bottomButton</span><span class="o">.</span><span class="nf">pressForDuration</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="nv">thenDragToElement</span><span class="p">:</span> <span class="n">topButton</span><span class="p">)</span>&#x000A;&#x000A;<span class="kt">XCTAssertLessThanOrEqual</span><span class="p">(</span><span class="n">bottomButton</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">maxY</span><span class="p">,</span> <span class="n">topButton</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">minY</span><span class="p">)</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Interactions/Entry/Pull to refresh/0'>
<td class='description' colspan='2'>
<div class='name'><p>Pull to refresh</p>
</div>
<div class='notes'><p>Create a <code>XCUICoordinate</code> from the first cell in your table and another one with a <code>dy</code> of six. Then drag the first coordinate to the second.</p>
<pre class="highlight swift"><span class="k">let</span> <span class="nv">firstCell</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">staticTexts</span><span class="p">[</span><span class="s">"Adrienne"</span><span class="p">]</span>&#x000A;<span class="k">let</span> <span class="nv">start</span> <span class="o">=</span> <span class="n">firstCell</span><span class="o">.</span><span class="nf">coordinateWithNormalizedOffset</span><span class="p">(</span><span class="kt">CGVectorMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>&#x000A;<span class="k">let</span> <span class="nv">finish</span> <span class="o">=</span> <span class="n">firstCell</span><span class="o">.</span><span class="nf">coordinateWithNormalizedOffset</span><span class="p">(</span><span class="kt">CGVectorMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>&#x000A;<span class="n">start</span><span class="o">.</span><span class="nf">pressForDuration</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nv">thenDragToCoordinate</span><span class="p">:</span> <span class="n">finish</span><span class="p">)</span></pre></div>
</td>
</tr>
<tr id='//dash_ref_Interactions/Entry/Pushing and popping view controllers/0'>
<td class='description' colspan='2'>
<div class='name'><p>Pushing and popping view controllers</p>
</div>
<div class='notes'><p>Test if a view controller was pushed onto the navigation stack.</p>
<pre class="highlight swift"><span class="n">app</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="s">"More Info"</span><span class="p">]</span><span class="o">.</span><span class="nf">tap</span><span class="p">()</span>&#x000A;<span class="kt">XCTAssert</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">navigationBars</span><span class="p">[</span><span class="s">"Volleyball?"</span><span class="p">]</span><span class="o">.</span><span class="n">exists</span><span class="p">)</span></pre>
<p>Pop a view controller by tapping the back button in the navigation bar and assert that the title in the navigation bar has changed.</p>
<pre class="highlight swift"><span class="n">app</span><span class="o">.</span><span class="n">navigationBars</span><span class="o">.</span><span class="n">buttons</span><span class="o">.</span><span class="nf">elementBoundByIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="nf">tap</span><span class="p">()</span>&#x000A;<span class="kt">XCTAssert</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">navigationBars</span><span class="p">[</span><span class="s">"Volley"</span><span class="p">]</span><span class="o">.</span><span class="n">exists</span><span class="p">)</span></pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='notes'>
<h2>Notes</h2>
<ul>
<li>Based on a <a href="https://github.com/joemasilotti/UI-Testing-Cheat-Sheet">cheat sheet</a> by <a href="https://twitter.com/joemasilotti">joemasilotti</a></li>
</ul>

</section>
</article>
<footer>
You can modify and improve this cheat sheet <a onclick="window.dash.openExternal_(this.href); return false;" href="http://cheat.kapeli.com">here</a>
</footer>
</body>
</html>
