<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>RBQL</title>
<link href='style.css' rel='stylesheet'>
<link href='//dash_ref/Category/Supported SQL Keywords/1'>
<link href='//dash_ref_Supported SQL Keywords/Entry/The SELECT statement is used to query the database./0'>
<link href='//dash_ref_Supported SQL Keywords/Entry/the WHERE expression is evaluated for each row in the input data as a boolean expression./0'>
<link href='//dash_ref_Supported SQL Keywords/Entry/Orders the values returned by a SELECT statement ascending (ASC) or descending (DESC) order./0'>
<link href='//dash_ref_Supported SQL Keywords/Entry/INNER JOIN: selects records that have matching values in both tables.   LEFT JOIN: selects all records from the left table, and the matching records from the right table./0'>
<link href='//dash_ref_Supported SQL Keywords/Entry/Eliminates duplicate rows./0'>
<link href='//dash_ref_Supported SQL Keywords/Entry/Groups together rows in a table that have the same values in all the columns listed./0'>
<link href='//dash_ref_Supported SQL Keywords/Entry/Specifies the number of records to return./0'>
<link href='//dash_ref_Supported SQL Keywords/Entry/Places an upper bound on the number of rows returned by the entire SELECT statement./0'>
<link href='//dash_ref_Supported SQL Keywords/Entry/UPDATE query produces a new table where original values are replaced according to the UPDATE expression, so it can also be considered a special type of SELECT query./0'>
<link href='//dash_ref/Category/RBQL variables/1'>
<link href='//dash_ref_RBQL variables/Entry/Value of i-th field in the current record in input table/0'>
<link href='//dash_ref_RBQL variables/Entry/Value of i-th field in the current record in join table B/0'>
<link href='//dash_ref_RBQL variables/Entry/Record number (1-based)/0'>
<link href='//dash_ref_RBQL variables/Entry/Number of fields in the current record/0'>
<link href='//dash_ref_RBQL variables/Entry/Value of the field referenced by it’s “name”, You can use this notation if the field in the header has a “good” alphanumeric name./0'>
<link href='//dash_ref_RBQL variables/Entry/Value of the field referenced by it’s “name”, You can use this notation to reference fields by arbitrary values in the header./0'>
<link href='//dash_ref/Category/Aggregate functions/1'>
<link href='//dash_ref_Aggregate functions/Entry/Returns a count of the number of times that X is not NULL in a group./0'>
<link href='//dash_ref_Aggregate functions/Entry/Collects all the input values, including nulls, into an array./0'>
<link href='//dash_ref_Aggregate functions/Entry/Returns the minimum non-NULL value of all values in the group./0'>
<link href='//dash_ref_Aggregate functions/Entry/Returns the maximum value of all values in the group./0'>
<link href='//dash_ref_Aggregate functions/Entry/Return sum of all non-NULL values in the group./0'>
<link href='//dash_ref_Aggregate functions/Entry/Returns the average value of all non-NULL X within a group./0'>
<link href='//dash_ref_Aggregate functions/Entry/Returns the population standard variance./0'>
<link href='//dash_ref_Aggregate functions/Entry/Return the median (middle value) of numeric data./0'>
<link href='//dash_ref/Category/Aggregate statements/1'>
<link href='//dash_ref_Aggregate statements/Entry/[ LEFT JOIN and INNER JOIN/0'>
<link href='//dash_ref_Aggregate statements/Entry/Can be used to select everything except specific columns. E.g. to select everything but columns 2 and 4, run: SELECT * EXCEPT a2, a4 Traditional SQL engines do not support this query mode./0'>
<link href='//dash_ref_Aggregate statements/Entry/You can set whether the input (and join) CSV file has a header or not using the environment configuration parameters which could be --with_headers CLI flag or GUI checkbox or something else. But it is also possible to override this selection directly in the query by adding either WITH (header) or WITH (noheader) statement at the end of the query. Example: select top 5 NR, * with (header)/0'>
<link href='//dash_ref_Aggregate statements/Entry/UNNEST(list) takes a list%2Farray as an argument and repeats the output record multiple times - one time for each value from the list argument. Example: SELECT a1, UNNEST(a2.split(&#39;;&#39;))/0'>
<link href='//dash_ref_Aggregate statements/Entry/RBQL does not support LIKE operator, instead it provides “like()” function which can be used like this: SELECT * where like(a1, &#39;foo%bar&#39;)/0'>
<link href='//dash_ref/Category/User Defined Functions/1'>
<link href='//dash_ref_User Defined Functions/Entry/User Defined Functions (UDF)/0'>
<link href='//dash_ref/Category/Examples/1'>
<link href='//dash_ref_Examples/Entry/With Python expressions/0'>
<link href='//dash_ref_Examples/Entry/With JavaScript expressions/0'>
<!--inserted_before-->
<script async src="https://ana.17lai.site/script.js" data-website-id="e532f69d-5606-40c9-9dbb-bfa04258384f"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JNYZP4ZLDJ" type="text/javascript" charset="UTF-8"></script>
<!--inserted_after-->
</head>
<body>
<header>
<h1>RBQL</h1>
</header>
<article>
<p></p>
<section class='category'>
<h2 id='//dash_ref/Category/Supported SQL Keywords/1'>
Supported SQL Keywords
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Supported SQL Keywords/Entry/The SELECT statement is used to query the database./0'>
<td class='command'>
<p>
<code>SELECT</code>
</p>
</td>
<td class='description'>
<div class='name'><p>The <code>SELECT</code> statement is used to query the database.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Supported SQL Keywords/Entry/the WHERE expression is evaluated for each row in the input data as a boolean expression./0'>
<td class='command'>
<p>
<code>WHERE</code>
</p>
</td>
<td class='description'>
<div class='name'><p>the <code>WHERE</code> expression is evaluated for each row in the input data as a boolean expression.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Supported SQL Keywords/Entry/Orders the values returned by a SELECT statement ascending (ASC) or descending (DESC) order./0'>
<td class='command'>
<p>
<code>ORDER BY … [ DESC | ASC ]</code>
</p>
</td>
<td class='description'>
<div class='name'><p>Orders the values returned by a SELECT statement ascending (<code>ASC</code>) or descending (<code>DESC</code>) order.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Supported SQL Keywords/Entry/INNER JOIN: selects records that have matching values in both tables.   LEFT JOIN: selects all records from the left table, and the matching records from the right table./0'>
<td class='command'>
<p>
<code>[ LEFT | INNER ] JOIN</code>
</p>
</td>
<td class='description'>
<div class='name'><ul>
<li><code>INNER JOIN</code>: selects records that have matching values in both tables.</li>
<li><code>LEFT JOIN</code>: selects all records from the left table, and the matching records from the right table.</li>
</ul>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Supported SQL Keywords/Entry/Eliminates duplicate rows./0'>
<td class='command'>
<p>
<code>DISTINCT</code>
</p>
</td>
<td class='description'>
<div class='name'><p>Eliminates duplicate rows.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Supported SQL Keywords/Entry/Groups together rows in a table that have the same values in all the columns listed./0'>
<td class='command'>
<p>
<code>GROUP BY</code>
</p>
</td>
<td class='description'>
<div class='name'><p>Groups together rows in a table that have the same values in all the columns listed.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Supported SQL Keywords/Entry/Specifies the number of records to return./0'>
<td class='command'>
<p>
<code>TOP</code>
</p>
</td>
<td class='description'>
<div class='name'><p>Specifies the number of records to return.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Supported SQL Keywords/Entry/Places an upper bound on the number of rows returned by the entire SELECT statement./0'>
<td class='command'>
<p>
<code>LIMIT</code>
</p>
</td>
<td class='description'>
<div class='name'><p>Places an upper bound on the number of rows returned by the entire <code>SELECT</code> statement.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Supported SQL Keywords/Entry/UPDATE query produces a new table where original values are replaced according to the UPDATE expression, so it can also be considered a special type of SELECT query./0'>
<td class='command'>
<p>
<code>UPDATE</code>
</p>
</td>
<td class='description'>
<div class='name'><p><code>UPDATE</code> query produces a new table where original values are replaced according to the <code>UPDATE</code> expression, so it can also be considered a special type of <code>SELECT</code> query.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/RBQL variables/1'>
RBQL variables
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_RBQL variables/Entry/Value of i-th field in the current record in input table/0'>
<td class='description' colspan='2'>
<div class='name'><p>Value of i-th field in the current record in input table</p>
</div>
<div class='notes'><pre class="highlight plaintext">a1, a2,…, a{N}</pre></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_RBQL variables/Entry/Value of i-th field in the current record in join table B/0'>
<td class='description' colspan='2'>
<div class='name'><p>Value of i-th field in the current record in join table B</p>
</div>
<div class='notes'><pre class="highlight plaintext">b1, b2,…, b{N}</pre></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_RBQL variables/Entry/Record number (1-based)/0'>
<td class='description' colspan='2'>
<div class='name'><p>Record number (1-based)</p>
</div>
<div class='notes'><pre class="highlight plaintext">NR</pre></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_RBQL variables/Entry/Number of fields in the current record/0'>
<td class='description' colspan='2'>
<div class='name'><p>Number of fields in the current record</p>
</div>
<div class='notes'><pre class="highlight plaintext">NF</pre></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_RBQL variables/Entry/Value of the field referenced by it’s “name”, You can use this notation if the field in the header has a “good” alphanumeric name./0'>
<td class='description' colspan='2'>
<div class='name'><p>Value of the field referenced by it’s “name”, You can use this notation if the field in the header has a “good” alphanumeric name.</p>
</div>
<div class='notes'><pre class="highlight plaintext">a.name, b.Person_age, … a.{Good_alphanumeric_column_name}</pre></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_RBQL variables/Entry/Value of the field referenced by it’s “name”, You can use this notation to reference fields by arbitrary values in the header./0'>
<td class='description' colspan='2'>
<div class='name'><p>Value of the field referenced by it’s “name”, You can use this notation to reference fields by arbitrary values in the header.</p>
</div>
<div class='notes'><pre class="highlight plaintext">a[“object id”], a[‘9.12341234’], b[“%$ !! 10 20”] … a[“Arbitrary column name!”]</pre></div>
<div class='notes'></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Aggregate functions/1'>
Aggregate functions
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Aggregate functions/Entry/Returns a count of the number of times that X is not NULL in a group./0'>
<td class='command'>
<p>
<code>COUNT</code>
</p>
</td>
<td class='description'>
<div class='name'><p>Returns a count of the number of times that X is not NULL in a group.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Aggregate functions/Entry/Collects all the input values, including nulls, into an array./0'>
<td class='command'>
<p>
<code>ARRAY_AGG</code>
</p>
</td>
<td class='description'>
<div class='name'><p>Collects all the input values, including nulls, into an array.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Aggregate functions/Entry/Returns the minimum non-NULL value of all values in the group./0'>
<td class='command'>
<p>
<code>MIN</code>
</p>
</td>
<td class='description'>
<div class='name'><p>Returns the minimum non-NULL value of all values in the group.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Aggregate functions/Entry/Returns the maximum value of all values in the group./0'>
<td class='command'>
<p>
<code>MAX</code>
</p>
</td>
<td class='description'>
<div class='name'><p>Returns the maximum value of all values in the group.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Aggregate functions/Entry/Return sum of all non-NULL values in the group./0'>
<td class='command'>
<p>
<code>SUM</code>
</p>
</td>
<td class='description'>
<div class='name'><p>Return sum of all non-NULL values in the group.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Aggregate functions/Entry/Returns the average value of all non-NULL X within a group./0'>
<td class='command'>
<p>
<code>AVG</code>
</p>
</td>
<td class='description'>
<div class='name'><p>Returns the average value of all non-NULL X within a group.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Aggregate functions/Entry/Returns the population standard variance./0'>
<td class='command'>
<p>
<code>VARIANCE</code>
</p>
</td>
<td class='description'>
<div class='name'><p>Returns the population standard variance.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Aggregate functions/Entry/Return the median (middle value) of numeric data./0'>
<td class='command'>
<p>
<code>MEDIAN</code>
</p>
</td>
<td class='description'>
<div class='name'><p>Return the median (middle value) of numeric data.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Aggregate statements/1'>
Aggregate statements
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Aggregate statements/Entry/[ LEFT JOIN and INNER JOIN/0'>
<td class='command'>
<p>
<code>JOIN</code>
</p>
</td>
<td class='description'>
<div class='name'><p>[ LEFT JOIN and INNER JOIN</p>
</div>
<div class='notes'><p>Join table B can be referenced either by its file path or by its command - an arbitrary string name the user should provide before executing the JOIN query.<br>
      RBQL supports <code>STRICT LEFT JOIN</code> which is like <code>LEFT JOIN</code>, but generates an error if any key in the left table “A” doesn’t have exactly one matching key in the right table “B”.<br>
      Table B path can be either relative to the working dir, relative to the main table or absolute.
      Limitation: <code>JOIN</code> statements can’t contain Python/JS expressions and must have the following form:<br>
      <code>&#x000A;      &lt;JOIN_KEYWORD&gt; (/path/to/table.tsv | table_command ) ON a… == b… [AND a… == b… [AND … ]]</code></p>
</div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Aggregate statements/Entry/Can be used to select everything except specific columns. E.g. to select everything but columns 2 and 4, run: SELECT * EXCEPT a2, a4 Traditional SQL engines do not support this query mode./0'>
<td class='command'>
<p>
<code>EXCEPT</code>
</p>
</td>
<td class='description'>
<div class='name'><p>Can be used to select everything except specific columns. E.g. to select everything but columns 2 and 4, run:
      <code>SELECT * EXCEPT a2, a4</code>
      Traditional SQL engines do not support this query mode.</p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Aggregate statements/Entry/You can set whether the input (and join) CSV file has a header or not using the environment configuration parameters which could be --with_headers CLI flag or GUI checkbox or something else. But it is also possible to override this selection directly in the query by adding either WITH (header) or WITH (noheader) statement at the end of the query. Example: select top 5 NR, * with (header)/0'>
<td class='command'>
<p>
<code>WITH</code>
</p>
</td>
<td class='description'>
<div class='name'><p>You can set whether the input (and join) CSV file has a header or not using the environment configuration parameters which could be --with_headers CLI flag or GUI checkbox or something else.
    But it is also possible to override this selection directly in the query by adding either WITH (header) or WITH (noheader) statement at the end of the query.
    Example: <code>select top 5 NR, * with (header)</code></p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Aggregate statements/Entry/UNNEST(list) takes a list%2Farray as an argument and repeats the output record multiple times - one time for each value from the list argument. Example: SELECT a1, UNNEST(a2.split(&#39;;&#39;))/0'>
<td class='command'>
<p>
<code>UNNEST()</code>
</p>
</td>
<td class='description'>
<div class='name'><p><code>UNNEST(list)</code> takes a list/array as an argument and repeats the output record multiple times - one time for each value from the list argument.
      Example: <code>SELECT a1, UNNEST(a2.split(&#39;;&#39;))</code></p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Aggregate statements/Entry/RBQL does not support LIKE operator, instead it provides “like()” function which can be used like this: SELECT * where like(a1, &#39;foo%bar&#39;)/0'>
<td class='command'>
<p>
<code>LIKE()</code>
</p>
</td>
<td class='description'>
<div class='name'><p>RBQL does not support LIKE operator, instead it provides “like()” function which can be used like this: <code>SELECT * where like(a1, &#39;foo%bar&#39;)</code></p>
</div>
<div class='notes'></div>
<div class='notes'></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/User Defined Functions/1'>
User Defined Functions
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_User Defined Functions/Entry/User Defined Functions (UDF)/0'>
<td class='description' colspan='2'>
<div class='name'><p>User Defined Functions (UDF)</p>
</div>
<div class='notes'><p>RBQL supports User Defined Functions
      You can define custom functions and/or import libraries in two special files:<br>
      <code>* ~/.rbql_init_source.py</code> - for Python<br>
      <code>* ~/.rbql_init_source.js</code> - for JavaScript</p>
</div>
<div class='notes'></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Examples/1'>
Examples
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Examples/Entry/With Python expressions/0'>
<td class='description' colspan='2'>
<div class='name'><p>With Python expressions</p>
</div>
<div class='notes'><ol>
<li><code>select top 100 a1, int(a2) * 10, len(a4) where a1 == &quot;Buy&quot; order by int(a2) desc</code></li>
<li><code>select * order by random.random()</code> - random sort</li>
<li><code>select len(a.vehicle_price) / 10, a2 &#x000A;where int(a.vehicle_price) &lt; 500 and a[&#39;Vehicle type&#39;] &#x000A;in [&quot;car&quot;, &quot;plane&quot;, &quot;boat&quot;] &#x000A;limit 20</code> - referencing columns by names from header and using Python’s “in” to emulate SQL’s “in”</li>
<li><code>update set a3 = &#39;NPC&#39; where a3.find(&#39;Non-playable character&#39;) != -1</code></li>
<li><code>select NR, *</code> - enumerate records, NR is 1-based</li>
<li><code>select * where re.match(&quot;.*ab.*&quot;, a1) is not None</code> - select entries where first column has “ab” pattern</li>
<li><code>select a1, b1, b2 inner join ./countries.txt on a2 == b1 order by a1, a3</code> - example of join query</li>
<li><code>select MAX(a1), MIN(a1) where a.Name != &#39;John&#39; group by a2, a3</code> - example of aggregate query</li>
<li><code>select *a1.split(&#39;:&#39;)</code> - Using Python3 unpack operator to split one column into many.<br>
Do not try this with other SQL engines!</li>
</ol>
</div>
<div class='notes'></div>
</td>
</tr>
<tr id='//dash_ref_Examples/Entry/With JavaScript expressions/0'>
<td class='description' colspan='2'>
<div class='name'><p>With JavaScript expressions</p>
</div>
<div class='notes'><ol>
<li><code>select top 100 a1, a2 * 10, a4.length where a1 == &quot;Buy&quot; order by parseInt(a2) desc</code></li>
<li><code>select * order by Math.random()</code> - random sort</li>
<li><code>select top 20 a.vehicle_price.length / 10, a2   &#x000A;where parseInt(a.vehicle_price) &lt; 500   &#x000A;&amp;&amp; [&quot;car&quot;, &quot;plane&quot;, * &quot;boat&quot;].indexOf(a[&#39;Vehicle type&#39;]) &gt; -1   &#x000A;limit 20</code> - referencing columns by names from header</li>
<li><code>update set a3 = &#39;NPC&#39; where a3.indexOf(&#39;Non-playable character&#39;) != -1*</code></li>
<li><code>select NR, *</code> - enumerate records, NR is 1-based*</li>
<li><code>select a1, b1, b2 inner join ./countries.txt on a2 == b1 order by a1, a3</code> - example of join query</li>
<li><code>select MAX(a1), MIN(a1) where a.Name != &#39;John&#39; group by a2, a3</code> - example of aggregate query</li>
<li><code>select ...a1.split(&#39;:&#39;)</code> - Using JS &quot;destructuring assignment&quot; syntax to split one column into many.<br>
Do not try this with other SQL engines!</li>
</ol>
</div>
<div class='notes'></div>
</td>
</tr>
</table>
</div>
</section>
<section class='notes'>
<h2>Notes</h2>
<ul>
<li>Keywords are case insensitive</li>
<li><p>Limitations: </p>

<ul>
<li>Aggregate functions inside Python (or JS) expressions are not supported. Although you can use expressions inside aggregate functions.<br>
<code>MAX(float(a1) / 1000)</code> - valid;<br>
<code>MAX(a1) / 1000</code> - invalid.<br></li>
<li>RBQL doesn’t support nested queries, but they can be emulated with consecutive queries.</li>
<li>Number of tables in all <code>JOIN</code> queries is always 2 (input table and join table), use consecutive queries to join 3 or more tables.</li>
</ul></li>
<li><p>Based on the <a href="https://github.com/mechatroner/RBQL">RBQL</a> README. The original can be found <a href="https://github.com/mechatroner/RBQL/blob/master/README.md">here</a>.</p></li>
<li><p><a href="https://rbql.org/">RBQL: Official Site</a></p></li>
<li><p>RBQL is integrated with Rainbow CSV extensions in <a href="https://github.com/mechatroner/rainbow_csv">Vim</a>, <a href="https://marketplace.visualstudio.com/items?itemName=mechatroner.rainbow-csv">VSCode</a>, <a href="https://packagecontrol.io/packages/rainbow_csv">Sublime Text</a> and <a href="https://atom.io/packages/rainbow-csv">Atom</a> editors.</p></li>
<li><p><a href="https://www.npmjs.com/package/rbql">RBQL in npm</a>: <code>$ npm install -g rbql</code></p></li>
<li><p><a href="https://pypi.org/project/rbql/">RBQL in PyPI</a>: <code>$ pip install rbql</code></p></li>
</ul>

</section>
</article>
<footer>
You can modify and improve this cheat sheet <a onclick="window.dash.openExternal_(this.href); return false;" href="https://cheat.kapeli.com">here</a>
</footer>
</body>
</html>
